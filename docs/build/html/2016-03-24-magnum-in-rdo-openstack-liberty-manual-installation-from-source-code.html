
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Magnum in RDO OpenStack Liberty manual installation from source code &#8212; egonzalez  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Ceph Ansible baremetal deployment" href="2016-03-17-ceph-ansible-baremetal-deployment.html" />
    <link rel="prev" title="OpenStack kolla deployment from RDO packages" href="2016-04-24-openstack-kolla-deployment-from-rdo-packages.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="magnum-in-rdo-openstack-liberty-manual-installation-from-source-code">
<h1>Magnum in RDO OpenStack Liberty manual installation from source code<a class="headerlink" href="#magnum-in-rdo-openstack-liberty-manual-installation-from-source-code" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line">Want to install Magnum (Containers as a Service) in an OpenStack
environment based on packages from RDO project?</div>
<div class="line">Here are the steps to do it:</div>
</div>
<div class="line-block">
<div class="line">Primary steps are the same as official Magnum guide, major differences
come from DevStack or manual installations vs packages from RDO
project.</div>
<div class="line">Also, some of the steps are explained to show how Magnum should work,
as well this guide can help you understand Magnum integration with
your current environment.</div>
<div class="line">I’m not going to use Barbican service for certs management, you will
see how to use Magnum without Barbican too.</div>
</div>
<ul class="simple">
<li>For now, there is not RDO packages for magnum, so we are going to
install it from source code.</li>
<li>As i know, currently magnum packages are under development and will
be added in future OpenStack versions to RDO project packages.
(Probably Mitaka or Newton)</li>
</ul>
<p>Passwords used at this demo are:</p>
<ul class="simple">
<li>temporal (Databases and OpenStack users)</li>
<li>guest (RabbitMQ)</li>
</ul>
<p>IPs used are:</p>
<ul class="simple">
<li>192.168.200.208 (Service APIs)</li>
<li>192.168.100.0/24 (External network range)</li>
<li>10.0.0.0/24 (Tenant network range)</li>
<li>8.8.8.8 (Google DNS server)</li>
</ul>
<p>First we need to install some dependencies and packages needed for next
steps.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">gcc</span> <span class="n">python</span><span class="o">-</span><span class="n">setuptools</span> <span class="n">python</span><span class="o">-</span><span class="n">devel</span> <span class="n">git</span> <span class="n">libffi</span><span class="o">-</span><span class="n">devel</span> <span class="n">openssl</span><span class="o">-</span><span class="n">devel</span> <span class="n">wget</span>
</pre></div>
</div>
<p>Install pip</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">easy_install</span> <span class="n">pip</span>
</pre></div>
</div>
<p>Clone Magnum source code from OpenStack git repository, ensure you use
Liberty branch, if not, Magnum dependencies will break all OpenStack
services dependencies and lost your current environment (Trust me, i’m
talking from my own experience)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">git</span><span class="o">.</span><span class="n">openstack</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">openstack</span><span class="o">/</span><span class="n">magnum</span> <span class="o">-</span><span class="n">b</span> <span class="n">stable</span><span class="o">/</span><span class="n">liberty</span>
</pre></div>
</div>
<p>Move to your newly created folder and install Magnum (dependency
requirements and Magnum)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">magnum</span>
<span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</pre></div>
</div>
<p>Once Magnum is installed, create Magnum database and Magnum user</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span> <span class="o">-</span><span class="n">uroot</span> <span class="o">-</span><span class="n">p</span>
<span class="n">CREATE</span> <span class="n">DATABASE</span> <span class="n">IF</span> <span class="n">NOT</span> <span class="n">EXISTS</span> <span class="n">magnum</span> <span class="n">DEFAULT</span> <span class="n">CHARACTER</span> <span class="n">SET</span> <span class="n">utf8</span><span class="p">;</span>
<span class="n">GRANT</span> <span class="n">ALL</span> <span class="n">PRIVILEGES</span> <span class="n">ON</span> <span class="n">magnum</span><span class="o">.*</span> <span class="n">TO</span><span class="s1">&#39;magnum&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span> <span class="n">IDENTIFIED</span> <span class="n">BY</span> <span class="s1">&#39;temporal&#39;</span><span class="p">;</span>
<span class="n">GRANT</span> <span class="n">ALL</span> <span class="n">PRIVILEGES</span> <span class="n">ON</span> <span class="n">magnum</span><span class="o">.*</span> <span class="n">TO</span><span class="s1">&#39;magnum&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span> <span class="n">IDENTIFIED</span> <span class="n">BY</span> <span class="s1">&#39;temporal&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Create Magnum folder and copy sample configuration files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">magnum</span>
<span class="n">sudo</span> <span class="n">cp</span> <span class="n">etc</span><span class="o">/</span><span class="n">magnum</span><span class="o">/</span><span class="n">magnum</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">sample</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">magnum</span><span class="o">/</span><span class="n">magnum</span><span class="o">.</span><span class="n">conf</span>
<span class="n">sudo</span> <span class="n">cp</span> <span class="n">etc</span><span class="o">/</span><span class="n">magnum</span><span class="o">/</span><span class="n">policy</span><span class="o">.</span><span class="n">json</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">magnum</span><span class="o">/</span><span class="n">policy</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>Edit Magnum main configuration file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">magnum</span><span class="o">/</span><span class="n">magnum</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>Configure messaging backend to RabbitMQ</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>

<span class="n">rpc_backend</span> <span class="o">=</span> <span class="n">rabbit</span>
<span class="n">notification_driver</span> <span class="o">=</span> <span class="n">messaging</span>
</pre></div>
</div>
<p>Bind Magnum API port to listen on all the interfaces, you can also
especify on which IP Magnum API will be listening if you are concerned
about security risks.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">api</span><span class="p">]</span>

<span class="n">host</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>
</pre></div>
</div>
<p>Configure RabbitMQ backend</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">oslo_messaging_rabbit</span><span class="p">]</span>

<span class="n">rabbit_host</span> <span class="o">=</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">200.208</span>
<span class="n">rabbit_userid</span> <span class="o">=</span> <span class="n">guest</span>
<span class="n">rabbit_password</span> <span class="o">=</span> <span class="n">guest</span>
<span class="n">rabbit_virtual_host</span> <span class="o">=</span> <span class="o">/</span>
</pre></div>
</div>
<p>Set database connection</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">database</span><span class="p">]</span>

<span class="n">connection</span><span class="o">=</span><span class="n">mysql</span><span class="p">:</span><span class="o">//</span><span class="n">magnum</span><span class="p">:</span><span class="n">temporal</span><span class="nd">@192</span><span class="o">.</span><span class="mf">168.200</span><span class="o">.</span><span class="mi">208</span><span class="o">/</span><span class="n">magnum</span>
</pre></div>
</div>
<p>Set cert_manager_type to local, this option will disable Barbican
service, you will need to create a folder (We will do it in next steps)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">certificates</span><span class="p">]</span>

<span class="n">cert_manager_type</span> <span class="o">=</span> <span class="n">local</span>
</pre></div>
</div>
<p>As all OpenStack services, Keystone authentication is required.</p>
<ul class="simple">
<li>Check what your service tenant name it is (RDO default name is
“services” other installations usually use “service” name.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">keystone_authtoken</span><span class="p">]</span>

<span class="n">auth_uri</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">200.208</span><span class="p">:</span><span class="mi">5000</span><span class="o">/</span><span class="n">v2</span><span class="o">.</span><span class="mi">0</span>
<span class="n">identity_uri</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">200.208</span><span class="p">:</span><span class="mi">35357</span>
<span class="n">auth_strategy</span><span class="o">=</span><span class="n">keystone</span>
<span class="n">admin_user</span><span class="o">=</span><span class="n">magnum</span>
<span class="n">admin_password</span><span class="o">=</span><span class="n">temporal</span>
<span class="n">admin_tenant_name</span><span class="o">=</span><span class="n">services</span>
</pre></div>
</div>
<p>As we saw before, create local certificates folder to avoid using
Barbican service. This is the step we previously commented</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">magnum</span><span class="o">/</span><span class="n">certificates</span><span class="o">/</span>
</pre></div>
</div>
<p>Clone python-magnumclient and install it, this package will provide us
commands to use Magnum</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">git</span><span class="o">.</span><span class="n">openstack</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">openstack</span><span class="o">/</span><span class="n">python</span><span class="o">-</span><span class="n">magnumclient</span> <span class="o">-</span><span class="n">b</span> <span class="n">stable</span><span class="o">/</span><span class="n">liberty</span>
<span class="n">cd</span> <span class="n">python</span><span class="o">-</span><span class="n">magnumclient</span>
<span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</pre></div>
</div>
<p>Create Magnum user at keystone</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openstack</span> <span class="n">user</span> <span class="n">create</span> <span class="o">--</span><span class="n">password</span> <span class="n">temporal</span> <span class="n">magnum</span>
</pre></div>
</div>
<p>Add admin role to Magnum user at tenant services</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openstack</span> <span class="n">role</span> <span class="n">add</span> <span class="o">--</span><span class="n">project</span> <span class="n">services</span> <span class="o">--</span><span class="n">user</span> <span class="n">magnum</span> <span class="n">admin</span>
</pre></div>
</div>
<p>Create container service</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openstack</span> <span class="n">service</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">magnum</span> <span class="o">--</span><span class="n">description</span> <span class="s2">&quot;Magnum Container Service&quot;</span> <span class="n">container</span>
</pre></div>
</div>
<p>Finally create Magnum endpoints</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openstack</span> <span class="n">endpoint</span> <span class="n">create</span> <span class="o">--</span><span class="n">region</span> <span class="n">RegionOne</span> <span class="o">--</span><span class="n">publicurl</span> <span class="s1">&#39;http://192.168.200.208:9511/v1&#39;</span> <span class="o">--</span><span class="n">adminurl</span> <span class="s1">&#39;http://192.168.200.208:9511/v1&#39;</span> <span class="o">--</span><span class="n">internalurl</span> <span class="s1">&#39;http://192.168.200.208:9511/v1&#39;</span> <span class="n">magnum</span>
</pre></div>
</div>
<p>Sync Magnum database, this step will create Magnum tables at the
database</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">magnum</span><span class="o">-</span><span class="n">db</span><span class="o">-</span><span class="n">manage</span> <span class="o">--</span><span class="n">config</span><span class="o">-</span><span class="n">file</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">magnum</span><span class="o">/</span><span class="n">magnum</span><span class="o">.</span><span class="n">conf</span> <span class="n">upgrade</span>
</pre></div>
</div>
<p>Open two terminal session and execute one command on each terminal to
start both services. If you encounter any issue, logs can be found at
these terminal</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">magnum</span><span class="o">-</span><span class="n">api</span> <span class="o">--</span><span class="n">config</span><span class="o">-</span><span class="n">file</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">magnum</span><span class="o">/</span><span class="n">magnum</span><span class="o">.</span><span class="n">conf</span>
<span class="n">magnum</span><span class="o">-</span><span class="n">conductor</span> <span class="o">--</span><span class="n">config</span><span class="o">-</span><span class="n">file</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">magnum</span><span class="o">/</span><span class="n">magnum</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>Check if Magnum service is fine</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">magnum</span> <span class="n">service</span><span class="o">-</span><span class="nb">list</span>
<span class="o">+----+------------+------------------+-------+</span>
<span class="o">|</span> <span class="nb">id</span> <span class="o">|</span> <span class="n">host</span>       <span class="o">|</span> <span class="n">binary</span>           <span class="o">|</span> <span class="n">state</span> <span class="o">|</span>
<span class="o">+----+------------+------------------+-------+</span>
<span class="o">|</span> <span class="mi">1</span>  <span class="o">|</span> <span class="n">controller</span> <span class="o">|</span> <span class="n">magnum</span><span class="o">-</span><span class="n">conductor</span> <span class="o">|</span> <span class="n">up</span>    <span class="o">|</span>
<span class="o">+----+------------+------------------+-------+</span>
</pre></div>
</div>
<p>Download fedora atomic image</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">fedorapeople</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">groups</span><span class="o">/</span><span class="n">magnum</span><span class="o">/</span><span class="n">fedora</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">atomic</span><span class="o">-</span><span class="mf">5.</span><span class="n">qcow2</span>
</pre></div>
</div>
<p>Create a Glance image with Atomic.qcow2 file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">glance</span> <span class="n">image</span><span class="o">-</span><span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">fedora</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">atomic</span><span class="o">-</span><span class="mi">5</span> \
                    <span class="o">--</span><span class="n">visibility</span> <span class="n">public</span> \
                    <span class="o">--</span><span class="n">disk</span><span class="o">-</span><span class="nb">format</span> <span class="n">qcow2</span> \
                    <span class="o">--</span><span class="n">os</span><span class="o">-</span><span class="n">distro</span> <span class="n">fedora</span><span class="o">-</span><span class="n">atomic</span> \
                    <span class="o">--</span><span class="n">container</span><span class="o">-</span><span class="nb">format</span> <span class="n">bare</span> <span class="o">&lt;</span> <span class="n">fedora</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">atomic</span><span class="o">-</span><span class="mf">5.</span><span class="n">qcow2</span>
<span class="o">+------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Property</span>         <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">checksum</span>         <span class="o">|</span> <span class="n">cebefc0c21fb8567e662bf9f2d5b78b0</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">container_format</span> <span class="o">|</span> <span class="n">bare</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span>       <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T15</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">21</span><span class="n">Z</span>                 <span class="o">|</span>
<span class="o">|</span> <span class="n">disk_format</span>      <span class="o">|</span> <span class="n">qcow2</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>               <span class="o">|</span> <span class="mi">7293891</span><span class="n">d</span><span class="o">-</span><span class="n">cfba</span><span class="o">-</span><span class="mi">48</span><span class="n">a9</span><span class="o">-</span><span class="n">a4db</span><span class="o">-</span><span class="mi">72</span><span class="n">c29c65f681</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">min_disk</span>         <span class="o">|</span> <span class="mi">0</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">min_ram</span>          <span class="o">|</span> <span class="mi">0</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>             <span class="o">|</span> <span class="n">fedora</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">atomic</span><span class="o">-</span><span class="mi">5</span>                   <span class="o">|</span>
<span class="o">|</span> <span class="n">os_distro</span>        <span class="o">|</span> <span class="n">fedora</span><span class="o">-</span><span class="n">atomic</span>                        <span class="o">|</span>
<span class="o">|</span> <span class="n">owner</span>            <span class="o">|</span> <span class="n">e3cca42ed57745148e0c342a000d99e9</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">protected</span>        <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">size</span>             <span class="o">|</span> <span class="mi">891355136</span>                            <span class="o">|</span>
<span class="o">|</span> <span class="n">status</span>           <span class="o">|</span> <span class="n">active</span>                               <span class="o">|</span>
<span class="o">|</span> <span class="n">tags</span>             <span class="o">|</span> <span class="p">[]</span>                                   <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span>       <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T15</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">28</span><span class="n">Z</span>                 <span class="o">|</span>
<span class="o">|</span> <span class="n">virtual_size</span>     <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">visibility</span>       <span class="o">|</span> <span class="n">public</span>                               <span class="o">|</span>
<span class="o">+------------------+--------------------------------------+</span>
</pre></div>
</div>
<p>Create a ssh key if not exists, this command won’t create a new ssh key
if already exists</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test</span> <span class="o">-</span><span class="n">f</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span><span class="n">pub</span> <span class="o">||</span> <span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span> <span class="o">-</span><span class="n">t</span> <span class="n">rsa</span> <span class="o">-</span><span class="n">N</span> <span class="s2">&quot;&quot;</span> <span class="o">-</span><span class="n">f</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span>
</pre></div>
</div>
<p>Add the key to nova, mine is called egonzalez</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nova</span> <span class="n">keypair</span><span class="o">-</span><span class="n">add</span> <span class="o">--</span><span class="n">pub</span><span class="o">-</span><span class="n">key</span> <span class="o">~/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span><span class="n">pub</span> <span class="n">egonzalez</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Now we are going to test our new Magnum service, you have various
methods to do it.</div>
<div class="line">I will use Docker Swarm method because is the simplest one for this
demo purposes. Go through Magnum documentation to check other
container methods as Kubernetes is.</div>
</div>
<p>Create a baymodel with atomic image and swarm, select a flavor with at
least 10GB of disk</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">magnum</span> <span class="n">baymodel</span><span class="o">-</span><span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">demoswarmbaymodel</span> \
                       <span class="o">--</span><span class="n">image</span><span class="o">-</span><span class="nb">id</span> <span class="n">fedora</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">atomic</span><span class="o">-</span><span class="mi">5</span> \
                       <span class="o">--</span><span class="n">keypair</span><span class="o">-</span><span class="nb">id</span> <span class="n">egonzalez</span> \
                       <span class="o">--</span><span class="n">external</span><span class="o">-</span><span class="n">network</span><span class="o">-</span><span class="nb">id</span> <span class="n">public</span> \
                       <span class="o">--</span><span class="n">dns</span><span class="o">-</span><span class="n">nameserver</span> <span class="mf">8.8</span><span class="o">.</span><span class="mf">8.8</span> \
                       <span class="o">--</span><span class="n">flavor</span><span class="o">-</span><span class="nb">id</span> <span class="n">testflavor</span> \
                       <span class="o">--</span><span class="n">docker</span><span class="o">-</span><span class="n">volume</span><span class="o">-</span><span class="n">size</span> <span class="mi">1</span> \
                       <span class="o">--</span><span class="n">coe</span> <span class="n">swarm</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Property</span>            <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">http_proxy</span>          <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span>          <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">master_flavor_id</span>    <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">fixed_network</span>       <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">uuid</span>                <span class="o">|</span> <span class="mi">887</span><span class="n">edbc7</span><span class="o">-</span><span class="mi">0805</span><span class="o">-</span><span class="mi">4796</span><span class="o">-</span><span class="n">be78</span><span class="o">-</span><span class="n">dfcddad8eb03</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">no_proxy</span>            <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">https_proxy</span>         <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">tls_disabled</span>        <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">keypair_id</span>          <span class="o">|</span> <span class="n">egonzalez</span>                            <span class="o">|</span>
<span class="o">|</span> <span class="n">public</span>              <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">labels</span>              <span class="o">|</span> <span class="p">{}</span>                                   <span class="o">|</span>
<span class="o">|</span> <span class="n">docker_volume_size</span>  <span class="o">|</span> <span class="mi">1</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">external_network_id</span> <span class="o">|</span> <span class="n">public</span>                               <span class="o">|</span>
<span class="o">|</span> <span class="n">cluster_distro</span>      <span class="o">|</span> <span class="n">fedora</span><span class="o">-</span><span class="n">atomic</span>                        <span class="o">|</span>
<span class="o">|</span> <span class="n">image_id</span>            <span class="o">|</span> <span class="n">fedora</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="n">atomic</span><span class="o">-</span><span class="mi">5</span>                   <span class="o">|</span>
<span class="o">|</span> <span class="n">registry_enabled</span>    <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">apiserver_port</span>      <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>                <span class="o">|</span> <span class="n">demoswarmbaymodel</span>                    <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span>          <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">43</span><span class="o">+</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">network_driver</span>      <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">ssh_authorized_key</span>  <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">coe</span>                 <span class="o">|</span> <span class="n">swarm</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">flavor_id</span>           <span class="o">|</span> <span class="n">testflavor</span>                           <span class="o">|</span>
<span class="o">|</span> <span class="n">dns_nameserver</span>      <span class="o">|</span> <span class="mf">8.8</span><span class="o">.</span><span class="mf">8.8</span>                              <span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
</pre></div>
</div>
<p>Create a bay with the previous bay model, we are going to create one
master node and one worker, specify all that apply to your environment</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">magnum</span> <span class="n">bay</span><span class="o">-</span><span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">demoswarmbay</span> <span class="o">--</span><span class="n">baymodel</span> <span class="n">demoswarmbaymodel</span> <span class="o">--</span><span class="n">master</span><span class="o">-</span><span class="n">count</span> <span class="mi">1</span> <span class="o">--</span><span class="n">node</span><span class="o">-</span><span class="n">count</span> <span class="mi">1</span>
<span class="o">+--------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Property</span>           <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+--------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">status</span>             <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">uuid</span>               <span class="o">|</span> <span class="n">a2388916</span><span class="o">-</span><span class="n">db30</span><span class="o">-</span><span class="mi">41</span><span class="n">bf</span><span class="o">-</span><span class="mi">84</span><span class="n">eb</span><span class="o">-</span><span class="n">df0b65979eaf</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">status_reason</span>      <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span>         <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">00</span><span class="o">+</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span>         <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">bay_create_timeout</span> <span class="o">|</span> <span class="mi">0</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">api_address</span>        <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">baymodel_id</span>        <span class="o">|</span> <span class="mi">887</span><span class="n">edbc7</span><span class="o">-</span><span class="mi">0805</span><span class="o">-</span><span class="mi">4796</span><span class="o">-</span><span class="n">be78</span><span class="o">-</span><span class="n">dfcddad8eb03</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">node_count</span>         <span class="o">|</span> <span class="mi">1</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">node_addresses</span>     <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">master_count</span>       <span class="o">|</span> <span class="mi">1</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">discovery_url</span>      <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>               <span class="o">|</span> <span class="n">demoswarmbay</span>                         <span class="o">|</span>
<span class="o">+--------------------+--------------------------------------+</span>
</pre></div>
</div>
<p>Check bay status, for now it should be in CREATE_IN_PROGRESS state</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">magnum</span> <span class="n">bay</span><span class="o">-</span><span class="n">show</span> <span class="n">demoswarmbay</span>
<span class="o">+--------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Property</span>           <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+--------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">status</span>             <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span>                   <span class="o">|</span>
<span class="o">|</span> <span class="n">uuid</span>               <span class="o">|</span> <span class="n">a2388916</span><span class="o">-</span><span class="n">db30</span><span class="o">-</span><span class="mi">41</span><span class="n">bf</span><span class="o">-</span><span class="mi">84</span><span class="n">eb</span><span class="o">-</span><span class="n">df0b65979eaf</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">status_reason</span>      <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span>         <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">00</span><span class="o">+</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span>         <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">01</span><span class="o">+</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">bay_create_timeout</span> <span class="o">|</span> <span class="mi">0</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">api_address</span>        <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">baymodel_id</span>        <span class="o">|</span> <span class="mi">887</span><span class="n">edbc7</span><span class="o">-</span><span class="mi">0805</span><span class="o">-</span><span class="mi">4796</span><span class="o">-</span><span class="n">be78</span><span class="o">-</span><span class="n">dfcddad8eb03</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">node_count</span>         <span class="o">|</span> <span class="mi">1</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">node_addresses</span>     <span class="o">|</span> <span class="p">[]</span>                                   <span class="o">|</span>
<span class="o">|</span> <span class="n">master_count</span>       <span class="o">|</span> <span class="mi">1</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">discovery_url</span>      <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>               <span class="o">|</span> <span class="n">demoswarmbay</span>                         <span class="o">|</span>
<span class="o">+--------------------+--------------------------------------+</span>
</pre></div>
</div>
<p>If all is going fine, nova should have two new instances(in ACTIVE
state), one for the master node and second for the worker.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nova</span> <span class="nb">list</span>
<span class="o">+--------------------------------------+-------------------------------------------------------+--------+------------+-------------+-------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">ID</span>                                   <span class="o">|</span> <span class="n">Name</span>                                                  <span class="o">|</span> <span class="n">Status</span> <span class="o">|</span> <span class="n">Task</span> <span class="n">State</span> <span class="o">|</span> <span class="n">Power</span> <span class="n">State</span> <span class="o">|</span> <span class="n">Networks</span>                                                                      <span class="o">|</span>
<span class="o">+--------------------------------------+-------------------------------------------------------+--------+------------+-------------+-------------------------------------------------------------------------------+</span>
<span class="o">|</span> <span class="n">e38eb88c</span><span class="o">-</span><span class="n">bb6b</span><span class="o">-</span><span class="mi">427</span><span class="n">d</span><span class="o">-</span><span class="n">a2c5</span><span class="o">-</span><span class="n">cdfe868796f0</span> <span class="o">|</span> <span class="n">de</span><span class="o">-</span><span class="mi">44</span><span class="n">kx2l4q4wc</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">d6j5svvjxmne</span><span class="o">-</span><span class="n">swarm_node</span><span class="o">-</span><span class="n">xafkm2jskf5j</span> <span class="o">|</span> <span class="n">ACTIVE</span> <span class="o">|</span> <span class="o">-</span>          <span class="o">|</span> <span class="n">Running</span>     <span class="o">|</span> <span class="n">demoswarmbay</span><span class="o">-</span><span class="n">agf6y3qnjoyw</span><span class="o">-</span><span class="n">fixed_network</span><span class="o">-</span><span class="n">g37bcmc52akv</span><span class="o">=</span><span class="mf">10.0</span><span class="o">.</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">100.16</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">5</span><span class="n">acc579d</span><span class="o">-</span><span class="mi">152</span><span class="n">a</span><span class="o">-</span><span class="mi">4656</span><span class="o">-</span><span class="mi">9</span><span class="n">eb8</span><span class="o">-</span><span class="n">e800b7ab3bcf</span> <span class="o">|</span> <span class="n">demoswarmbay</span><span class="o">-</span><span class="n">agf6y3qnjoyw</span><span class="o">-</span><span class="n">swarm_master</span><span class="o">-</span><span class="n">fllwhrpuabbq</span>   <span class="o">|</span> <span class="n">ACTIVE</span> <span class="o">|</span> <span class="o">-</span>          <span class="o">|</span> <span class="n">Running</span>     <span class="o">|</span> <span class="n">demoswarmbay</span><span class="o">-</span><span class="n">agf6y3qnjoyw</span><span class="o">-</span><span class="n">fixed_network</span><span class="o">-</span><span class="n">g37bcmc52akv</span><span class="o">=</span><span class="mf">10.0</span><span class="o">.</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">100.15</span> <span class="o">|</span>
<span class="o">+--------------------------------------+-------------------------------------------------------+--------+------------+-------------+-------------------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>You can see how heat stack is going</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">heat</span> <span class="n">stack</span><span class="o">-</span><span class="nb">list</span>
<span class="o">+--------------------------------------+---------------------------+--------------------+---------------------+--------------+</span>
<span class="o">|</span> <span class="nb">id</span>                                   <span class="o">|</span> <span class="n">stack_name</span>                <span class="o">|</span> <span class="n">stack_status</span>       <span class="o">|</span> <span class="n">creation_time</span>       <span class="o">|</span> <span class="n">updated_time</span> <span class="o">|</span>
<span class="o">+--------------------------------------+---------------------------+--------------------+---------------------+--------------+</span>
<span class="o">|</span> <span class="mi">3</span><span class="n">a64fa60</span><span class="o">-</span><span class="mi">4</span><span class="n">df8</span><span class="o">-</span><span class="mi">498</span><span class="n">f</span><span class="o">-</span><span class="n">aceb</span><span class="o">-</span><span class="n">a0cb8cfc0b18</span> <span class="o">|</span> <span class="n">demoswarmbay</span><span class="o">-</span><span class="n">agf6y3qnjoyw</span> <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">59</span> <span class="o">|</span> <span class="kc">None</span>         <span class="o">|</span>
<span class="o">+--------------------------------------+---------------------------+--------------------+---------------------+--------------+</span>
</pre></div>
</div>
<p>We can see what tasks are executing during stack creation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">heat</span> <span class="n">event</span><span class="o">-</span><span class="nb">list</span> <span class="n">demoswarmbay</span><span class="o">-</span><span class="n">agf6y3qnjoyw</span>
<span class="o">+-------------------------------------+--------------------------------------+------------------------+--------------------+---------------------+</span>
<span class="o">|</span> <span class="n">resource_name</span>                       <span class="o">|</span> <span class="nb">id</span>                                   <span class="o">|</span> <span class="n">resource_status_reason</span> <span class="o">|</span> <span class="n">resource_status</span>    <span class="o">|</span> <span class="n">event_time</span>          <span class="o">|</span>
<span class="o">+-------------------------------------+--------------------------------------+------------------------+--------------------+---------------------+</span>
<span class="o">|</span> <span class="n">demoswarmbay</span><span class="o">-</span><span class="n">agf6y3qnjoyw</span>           <span class="o">|</span> <span class="mi">004</span><span class="n">c9388</span><span class="o">-</span><span class="n">b8ab</span><span class="o">-</span><span class="mi">4541</span><span class="o">-</span><span class="n">ada8</span><span class="o">-</span><span class="mi">99</span><span class="n">b65203e41d</span> <span class="o">|</span> <span class="n">Stack</span> <span class="n">CREATE</span> <span class="n">started</span>   <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">master_wait_handle</span>                  <span class="o">|</span> <span class="n">d6f0798a</span><span class="o">-</span><span class="n">bfde</span><span class="o">-</span><span class="mi">4</span><span class="n">bad</span><span class="o">-</span><span class="mi">9</span><span class="n">c73</span><span class="o">-</span><span class="n">e108bd101009</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">01</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">secgroup_manager</span>                    <span class="o">|</span> <span class="n">e2e0eb08</span><span class="o">-</span><span class="n">aeeb</span><span class="o">-</span><span class="mi">4290</span><span class="o">-</span><span class="mi">9</span><span class="n">ad5</span><span class="o">-</span><span class="n">bd20fe243f07</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">02</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">disable_selinux</span>                     <span class="o">|</span> <span class="n">d7290592</span><span class="o">-</span><span class="n">ab81</span><span class="o">-</span><span class="mi">4</span><span class="n">d7a</span><span class="o">-</span><span class="n">b2fa</span><span class="o">-</span><span class="mi">902975904</span><span class="n">a25</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">03</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">agent_wait_handle</span>                   <span class="o">|</span> <span class="mi">65</span><span class="n">ec5553</span><span class="o">-</span><span class="mi">56</span><span class="n">a4</span><span class="o">-</span><span class="mi">4416</span><span class="o">-</span><span class="mi">9748</span><span class="o">-</span><span class="n">bfa0ae35737a</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">03</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">add_proxy</span>                           <span class="o">|</span> <span class="mi">46</span><span class="n">bdcff8</span><span class="o">-</span><span class="mi">4606</span><span class="o">-</span><span class="mi">406</span><span class="n">f</span><span class="o">-</span><span class="mi">8</span><span class="n">c99</span><span class="o">-</span><span class="mi">7</span><span class="n">f48adc4de57</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">03</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_docker_socket</span>                 <span class="o">|</span> <span class="n">ab5402ea</span><span class="o">-</span><span class="mi">44</span><span class="n">af</span><span class="o">-</span><span class="mi">4433</span><span class="o">-</span><span class="mi">84</span><span class="n">aa</span><span class="o">-</span><span class="n">a63256817a9a</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">04</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">make_cert</span>                           <span class="o">|</span> <span class="mi">3</span><span class="n">b9817a5</span><span class="o">-</span><span class="mi">606</span><span class="n">f</span><span class="o">-</span><span class="mi">41</span><span class="n">ab</span><span class="o">-</span><span class="mi">8799</span><span class="o">-</span><span class="n">b411c017f05d</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">04</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">cfn_signal</span>                          <span class="o">|</span> <span class="mi">0</span><span class="n">add665a</span><span class="o">-</span><span class="mi">3</span><span class="n">fdf</span><span class="o">-</span><span class="mi">4408</span><span class="o">-</span><span class="n">ab15</span><span class="o">-</span><span class="mi">76332</span><span class="n">aa326fe</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">04</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">remove_docker_key</span>                   <span class="o">|</span> <span class="mi">94</span><span class="n">f4106e</span><span class="o">-</span><span class="n">f139</span><span class="o">-</span><span class="mi">4</span><span class="n">d9f</span><span class="o">-</span><span class="mi">9974</span><span class="o">-</span><span class="mi">8821</span><span class="n">d04be103</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">05</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">configure_swarm</span>                     <span class="o">|</span> <span class="n">f7e0ebd5</span><span class="o">-</span><span class="mi">1893</span><span class="o">-</span><span class="mi">43</span><span class="n">d1</span><span class="o">-</span><span class="n">bd29</span><span class="o">-</span><span class="mi">81</span><span class="n">a7e39de0c0</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">05</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">extrouter</span>                           <span class="o">|</span> <span class="n">a94a8f68</span><span class="o">-</span><span class="n">c237</span><span class="o">-</span><span class="mi">4</span><span class="n">dbc</span><span class="o">-</span><span class="mi">9513</span><span class="o">-</span><span class="n">cdbe3de1465e</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">05</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">enable_services</span>                     <span class="o">|</span> <span class="n">c250f532</span><span class="o">-</span><span class="mi">99</span><span class="n">bd</span><span class="o">-</span><span class="mi">43</span><span class="n">d7</span><span class="o">-</span><span class="mi">9</span><span class="n">d15</span><span class="o">-</span><span class="n">b2d3ae16567a</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">06</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_docker_service</span>                <span class="o">|</span> <span class="mi">2</span><span class="n">c9d8954</span><span class="o">-</span><span class="mi">4446</span><span class="o">-</span><span class="mi">4578</span><span class="o">-</span><span class="n">a871</span><span class="o">-</span><span class="mf">0910e8996571</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">06</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">cloud_init_wait_handle</span>              <span class="o">|</span> <span class="mi">6</span><span class="n">cc51d2d</span><span class="o">-</span><span class="mf">56e9</span><span class="o">-</span><span class="mi">458</span><span class="n">b</span><span class="o">-</span><span class="n">a21b</span><span class="o">-</span><span class="n">bc553e0c8291</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">06</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">fixed_network</span>                       <span class="o">|</span> <span class="mi">3125395</span><span class="n">f</span><span class="o">-</span><span class="n">c689</span><span class="o">-</span><span class="mi">4481</span><span class="o">-</span><span class="n">bf01</span><span class="o">-</span><span class="mi">94</span><span class="n">bb2f701993</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">07</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">agent_wait_handle</span>                   <span class="o">|</span> <span class="mi">2</span><span class="n">db801e8</span><span class="o">-</span><span class="n">c2b5</span><span class="o">-</span><span class="mi">47</span><span class="n">b0</span><span class="o">-</span><span class="n">ac16</span><span class="o">-</span><span class="mi">122</span><span class="n">dba3a22d6</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">08</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">remove_docker_key</span>                   <span class="o">|</span> <span class="mf">75e2</span><span class="n">c7a6</span><span class="o">-</span><span class="n">a2ce</span><span class="o">-</span><span class="mi">4026</span><span class="o">-</span><span class="n">aeeb</span><span class="o">-</span><span class="mi">739</span><span class="n">c4a522f48</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">08</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">secgroup_manager</span>                    <span class="o">|</span> <span class="n">ac51a029</span><span class="o">-</span><span class="mi">26</span><span class="n">c1</span><span class="o">-</span><span class="mi">495</span><span class="n">a</span><span class="o">-</span><span class="n">bc13</span><span class="o">-</span><span class="mi">232</span><span class="n">cfb8c1060</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">08</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_docker_socket</span>                 <span class="o">|</span> <span class="mf">58e08</span><span class="n">b52</span><span class="o">-</span><span class="n">a12a</span><span class="o">-</span><span class="mf">43e9</span><span class="o">-</span><span class="n">b41d</span><span class="o">-</span><span class="mi">071750294024</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">08</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">master_wait_handle</span>                  <span class="o">|</span> <span class="mf">3e741</span><span class="n">b76</span><span class="o">-</span><span class="mi">6470</span><span class="o">-</span><span class="mi">47</span><span class="n">d4</span><span class="o">-</span><span class="n">b13e</span><span class="o">-</span><span class="mi">3</span><span class="n">f8f446be53c</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">08</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">cfn_signal</span>                          <span class="o">|</span> <span class="mi">96</span><span class="n">c26b4f</span><span class="o">-</span><span class="mf">1e99</span><span class="o">-</span><span class="mi">478</span><span class="n">e</span><span class="o">-</span><span class="n">a8e5</span><span class="o">-</span><span class="mi">9</span><span class="n">dcc4486e1b3</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">08</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">enable_services</span>                     <span class="o">|</span> <span class="n">beedc358</span><span class="o">-</span><span class="n">ee72</span><span class="o">-</span><span class="mi">4</span><span class="n">b34</span><span class="o">-</span><span class="n">a6b9</span><span class="o">-</span><span class="mi">1</span><span class="n">b47ffc15306</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">08</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">add_proxy</span>                           <span class="o">|</span> <span class="n">caae3a07</span><span class="o">-</span><span class="n">d5f1</span><span class="o">-</span><span class="mi">4</span><span class="n">eb0</span><span class="o">-</span><span class="mi">8</span><span class="n">a82</span><span class="o">-</span><span class="mi">02</span><span class="n">ea634f77ae</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">08</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">make_cert</span>                           <span class="o">|</span> <span class="mi">79363643</span><span class="o">-</span><span class="n">e5e4</span><span class="o">-</span><span class="mi">4</span><span class="n">d1b</span><span class="o">-</span><span class="n">ad8a</span><span class="o">-</span><span class="mi">5</span><span class="n">a56e1f6a8e7</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">08</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">cloud_init_wait_handle</span>              <span class="o">|</span> <span class="mi">0457</span><span class="n">b008</span><span class="o">-</span><span class="mi">6</span><span class="n">da8</span><span class="o">-</span><span class="mi">44</span><span class="n">fd</span><span class="o">-</span><span class="n">abef</span><span class="o">-</span><span class="n">cb99bd4d0518</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">09</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">configure_swarm</span>                     <span class="o">|</span> <span class="n">baf1e089</span><span class="o">-</span><span class="n">c627</span><span class="o">-</span><span class="mi">4</span><span class="n">b24</span><span class="o">-</span><span class="n">a571</span><span class="o">-</span><span class="mi">63</span><span class="n">b3c9c14e28</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">09</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">extrouter</span>                           <span class="o">|</span> <span class="mi">184614</span><span class="n">d9</span><span class="o">-</span><span class="mi">2280</span><span class="o">-</span><span class="mi">4</span><span class="n">cb4</span><span class="o">-</span><span class="mi">9253</span><span class="o">-</span><span class="n">f538463dbdf4</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">09</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_docker_service</span>                <span class="o">|</span> <span class="mf">80e66</span><span class="n">b4e</span><span class="o">-</span><span class="n">d40a</span><span class="o">-</span><span class="mi">4243</span><span class="o">-</span><span class="n">bb27</span><span class="o">-</span><span class="mi">0</span><span class="n">d2a6b68651f</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">09</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">disable_selinux</span>                     <span class="o">|</span> <span class="n">d8a64822</span><span class="o">-</span><span class="mi">2571</span><span class="o">-</span><span class="mi">4</span><span class="n">dcf</span><span class="o">-</span><span class="mi">9</span><span class="n">da5</span><span class="o">-</span><span class="n">b3ec73e771eb</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">09</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">fixed_network</span>                       <span class="o">|</span> <span class="mi">528</span><span class="n">b0ced</span><span class="o">-</span><span class="mi">23</span><span class="n">f6</span><span class="o">-</span><span class="mi">4</span><span class="n">c22</span><span class="o">-</span><span class="mi">8</span><span class="n">cbc</span><span class="o">-</span><span class="mi">357</span><span class="n">ba0ee5bc5</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">09</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_swarm_manager_failure_service</span> <span class="o">|</span> <span class="mi">9</span><span class="n">fa100a3</span><span class="o">-</span><span class="n">b4a9</span><span class="o">-</span><span class="mi">465</span><span class="n">c</span><span class="o">-</span><span class="mi">8</span><span class="n">b33</span><span class="o">-</span><span class="n">dd000cb4866a</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">10</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_swarm_agent_failure_service</span>   <span class="o">|</span> <span class="n">a7c09833</span><span class="o">-</span><span class="mf">929e-4711</span><span class="o">-</span><span class="n">a3e9</span><span class="o">-</span><span class="mi">39923</span><span class="n">d23b2f2</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">10</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">fixed_subnet</span>                        <span class="o">|</span> <span class="mi">23</span><span class="n">d8b0a6</span><span class="o">-</span><span class="n">a7a3</span><span class="o">-</span><span class="mi">4</span><span class="n">f71</span><span class="o">-</span><span class="mi">9</span><span class="n">c18</span><span class="o">-</span><span class="n">ba6255cf071a</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">10</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_swarm_master_service</span>          <span class="o">|</span> <span class="n">d24a6099</span><span class="o">-</span><span class="mi">3</span><span class="n">cad</span><span class="o">-</span><span class="mi">41</span><span class="n">ce</span><span class="o">-</span><span class="mi">8</span><span class="n">d4b</span><span class="o">-</span><span class="n">a7ad0661aaea</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">11</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">fixed_subnet</span>                        <span class="o">|</span> <span class="mi">1</span><span class="n">a2b7397</span><span class="o">-</span><span class="mi">1</span><span class="n">d09</span><span class="o">-</span><span class="mi">4544</span><span class="o">-</span><span class="n">bb9f</span><span class="o">-</span><span class="mi">985</span><span class="n">c2f64cb09</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">13</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_swarm_manager_failure_service</span> <span class="o">|</span> <span class="mi">615</span><span class="n">a2a7a</span><span class="o">-</span><span class="mi">5266</span><span class="o">-</span><span class="mi">487</span><span class="n">b</span><span class="o">-</span><span class="n">bbe1</span><span class="o">-</span><span class="n">fcaa82f43243</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">13</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_swarm_agent_failure_service</span>   <span class="o">|</span> <span class="mi">3</span><span class="n">f8c54b4</span><span class="o">-</span><span class="mi">6644</span><span class="o">-</span><span class="mi">49</span><span class="n">a0</span><span class="o">-</span><span class="n">ad98</span><span class="o">-</span><span class="mi">9</span><span class="n">bc6b4332a07</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">13</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_swarm_master_service</span>          <span class="o">|</span> <span class="mi">2</span><span class="n">f58b3c8</span><span class="o">-</span><span class="n">d1cc</span><span class="o">-</span><span class="mi">4590</span><span class="o">-</span><span class="n">a328</span><span class="o">-</span><span class="mf">0e775</span><span class="n">e495bcf</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">13</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">extrouter_inside</span>                    <span class="o">|</span> <span class="n">f3da7f2f</span><span class="o">-</span><span class="mf">643e-4</span><span class="n">f29</span><span class="o">-</span><span class="n">a00f</span><span class="o">-</span><span class="n">d2595d7faeaf</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">14</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">swarm_master_eth0</span>                   <span class="o">|</span> <span class="mi">1</span><span class="n">d6a510d</span><span class="o">-</span><span class="mi">520</span><span class="n">c</span><span class="o">-</span><span class="mi">4796</span><span class="o">-</span><span class="mi">8990</span><span class="o">-</span><span class="n">aa8f7dd59757</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">16</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">swarm_master_eth0</span>                   <span class="o">|</span> <span class="mi">3</span><span class="n">fd85913</span><span class="o">-</span><span class="mi">7399</span><span class="o">-</span><span class="mi">49</span><span class="n">be</span><span class="o">-</span><span class="n">bb46</span><span class="o">-</span><span class="mi">5085</span><span class="n">ff953611</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">extrouter_inside</span>                    <span class="o">|</span> <span class="mf">33749e30</span><span class="o">-</span><span class="n">cbea</span><span class="o">-</span><span class="mi">4093</span><span class="o">-</span><span class="n">b36a</span><span class="o">-</span><span class="mf">94967e299002</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_heat_params</span>                   <span class="o">|</span> <span class="mf">054e0</span><span class="n">af5</span><span class="o">-</span><span class="n">e3e0</span><span class="o">-</span><span class="mi">4</span><span class="n">bc0</span><span class="o">-</span><span class="mi">92</span><span class="n">b5</span><span class="o">-</span><span class="n">b40aeedc39ab</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">19</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">swarm_nodes</span>                         <span class="o">|</span> <span class="n">df7af58c</span><span class="o">-</span><span class="mi">8148</span><span class="o">-</span><span class="mi">4</span><span class="n">b51</span><span class="o">-</span><span class="n">bd65</span><span class="o">-</span><span class="n">b0734d9051b5</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">20</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_swarm_agent_service</span>           <span class="o">|</span> <span class="n">ab1e8b1e</span><span class="o">-</span><span class="mi">2837</span><span class="o">-</span><span class="mi">4693</span><span class="o">-</span><span class="n">b791</span><span class="o">-</span><span class="n">e1311f85fa63</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">21</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">swarm_master_floating</span>               <span class="o">|</span> <span class="n">d99ffe66</span><span class="o">-</span><span class="n">cb02</span><span class="o">-</span><span class="mi">4279</span><span class="o">-</span><span class="mi">99</span><span class="n">dc</span><span class="o">-</span><span class="n">a1f3e2ca817c</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">22</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_heat_params</span>                   <span class="o">|</span> <span class="mi">33</span><span class="n">d9999f</span><span class="o">-</span><span class="mi">6</span><span class="n">c93</span><span class="o">-</span><span class="mi">453</span><span class="n">d</span><span class="o">-</span><span class="mi">8565</span><span class="o">-</span><span class="n">ac99db021f8f</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">25</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">write_swarm_agent_service</span>           <span class="o">|</span> <span class="mi">02</span><span class="n">a1b7f6</span><span class="o">-</span><span class="mi">2660</span><span class="o">-</span><span class="mi">4345</span><span class="o">-</span><span class="n">ad08</span><span class="o">-</span><span class="mi">42</span><span class="n">b66ffaaad5</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">25</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">swarm_master_floating</span>               <span class="o">|</span> <span class="mi">8</span><span class="n">ce6ecd8</span><span class="o">-</span><span class="n">c421</span><span class="o">-</span><span class="mf">4e4</span><span class="n">a</span><span class="o">-</span><span class="n">ab81</span><span class="o">-</span><span class="n">cba4b5ccedf4</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">25</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">swarm_master_init</span>                   <span class="o">|</span> <span class="mi">3787</span><span class="n">dcc8</span><span class="o">-</span><span class="n">e644</span><span class="o">-</span><span class="mi">412</span><span class="n">b</span><span class="o">-</span><span class="mi">859</span><span class="n">b</span><span class="o">-</span><span class="mi">63</span><span class="n">a434b9ee6c</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">26</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">swarm_master_init</span>                   <span class="o">|</span> <span class="n">a1dd67bb</span><span class="o">-</span><span class="mi">49</span><span class="n">c7</span><span class="o">-</span><span class="mi">4507</span><span class="o">-</span><span class="mi">8</span><span class="n">af0</span><span class="o">-</span><span class="mi">7758</span><span class="n">b76b57e1</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">28</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">swarm_master</span>                        <span class="o">|</span> <span class="n">d12b915e</span><span class="o">-</span><span class="mi">3087</span><span class="o">-</span><span class="mf">4e17</span><span class="o">-</span><span class="mi">9954</span><span class="o">-</span><span class="mi">8233926</span><span class="n">b504b</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">29</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">swarm_master</span>                        <span class="o">|</span> <span class="n">a34ad52a</span><span class="o">-</span><span class="n">def7</span><span class="o">-</span><span class="mi">460</span><span class="n">b</span><span class="o">-</span><span class="n">b5b7</span><span class="o">-</span><span class="mi">410000207</span><span class="n">b3e</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_COMPLETE</span>    <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">48</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">master_wait_condition</span>               <span class="o">|</span> <span class="mi">0</span><span class="n">c9331a4</span><span class="o">-</span><span class="mi">8</span><span class="n">ad0</span><span class="o">-</span><span class="mf">46e0</span><span class="o">-</span><span class="n">bf2a</span><span class="o">-</span><span class="mi">35943021</span><span class="n">a1a3</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">49</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">cloud_init_wait_condition</span>           <span class="o">|</span> <span class="n">de3707a0</span><span class="o">-</span><span class="n">f46a</span><span class="o">-</span><span class="mi">44</span><span class="n">a9</span><span class="o">-</span><span class="n">b4b8</span><span class="o">-</span><span class="n">ff50e12cc77f</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">49</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">agent_wait_condition</span>                <span class="o">|</span> <span class="n">a1a810a4</span><span class="o">-</span><span class="mi">9</span><span class="n">c19</span><span class="o">-</span><span class="mi">4983</span><span class="o">-</span><span class="n">aaa8</span><span class="o">-</span><span class="n">e03f308c1e39</span> <span class="o">|</span> <span class="n">state</span> <span class="n">changed</span>          <span class="o">|</span> <span class="n">CREATE_IN_PROGRESS</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">49</span> <span class="o">|</span>
<span class="o">+-------------------------------------+--------------------------------------+------------------------+--------------------+---------------------+</span>
</pre></div>
</div>
<p>Once all tasks are completed, we can create containers in the bay we
created in previous steps.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">magnum</span> <span class="n">container</span><span class="o">-</span><span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">demo</span><span class="o">-</span><span class="n">container</span> \
                        <span class="o">--</span><span class="n">image</span> <span class="n">docker</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">cirros</span><span class="p">:</span><span class="n">latest</span> \
                        <span class="o">--</span><span class="n">bay</span> <span class="n">demoswarmbay</span> \
                        <span class="o">--</span><span class="n">command</span> <span class="s2">&quot;ping -c 4 192.168.100.2&quot;</span>
<span class="o">+------------+----------------------------------------+</span>
<span class="o">|</span> <span class="n">Property</span>   <span class="o">|</span> <span class="n">Value</span>                                  <span class="o">|</span>
<span class="o">+------------+----------------------------------------+</span>
<span class="o">|</span> <span class="n">uuid</span>       <span class="o">|</span> <span class="mi">36595858</span><span class="o">-</span><span class="mi">8657</span><span class="o">-</span><span class="n">d465</span><span class="o">-</span><span class="mf">3e5</span><span class="n">a</span><span class="o">-</span><span class="n">dfcddad8a238</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">links</span>      <span class="o">|</span> <span class="o">...</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">bay_uuid</span>   <span class="o">|</span> <span class="n">a2388916</span><span class="o">-</span><span class="n">db30</span><span class="o">-</span><span class="mi">41</span><span class="n">bf</span><span class="o">-</span><span class="mi">84</span><span class="n">eb</span><span class="o">-</span><span class="n">df0b65979eaf</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span> <span class="o">|</span> <span class="kc">None</span>                                   <span class="o">|</span>
<span class="o">|</span> <span class="n">image</span>      <span class="o">|</span> <span class="n">cirros</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">command</span>    <span class="o">|</span> <span class="n">ping</span> <span class="o">-</span><span class="n">c</span> <span class="mi">4</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">100.2</span>                <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span> <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">19</span><span class="n">T17</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">00</span><span class="o">+</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>              <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>       <span class="o">|</span> <span class="n">demo</span><span class="o">-</span><span class="n">container</span>                         <span class="o">|</span>
<span class="o">+------------+----------------------------------------+</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Container is created, but not started.</div>
<div class="line">Start the container</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">magnum</span> <span class="n">container</span><span class="o">-</span><span class="n">start</span> <span class="n">demo</span><span class="o">-</span><span class="n">container</span>
</pre></div>
</div>
<p>Check container logs, you should see 4 pings succeed to our external
router gateway.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">magnum</span> <span class="n">container</span><span class="o">-</span><span class="n">logs</span> <span class="n">demo</span><span class="o">-</span><span class="n">container</span>

<span class="n">PING</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">100.2</span> <span class="p">(</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">100.2</span><span class="p">)</span> <span class="mi">56</span><span class="p">(</span><span class="mi">84</span><span class="p">)</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">data</span><span class="o">.</span>
<span class="mi">64</span> <span class="nb">bytes</span> <span class="kn">from</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">100.2</span><span class="p">:</span> <span class="n">icmp_seq</span><span class="o">=</span><span class="mi">1</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">64</span> <span class="n">time</span><span class="o">=</span><span class="mf">0.083</span> <span class="n">ms</span>
<span class="mi">64</span> <span class="nb">bytes</span> <span class="kn">from</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">100.2</span><span class="p">:</span> <span class="n">icmp_seq</span><span class="o">=</span><span class="mi">2</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">64</span> <span class="n">time</span><span class="o">=</span><span class="mf">0.068</span> <span class="n">ms</span>
<span class="mi">64</span> <span class="nb">bytes</span> <span class="kn">from</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">100.2</span><span class="p">:</span> <span class="n">icmp_seq</span><span class="o">=</span><span class="mi">3</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">64</span> <span class="n">time</span><span class="o">=</span><span class="mf">0.043</span> <span class="n">ms</span>
<span class="mi">64</span> <span class="nb">bytes</span> <span class="kn">from</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">100.2</span><span class="p">:</span> <span class="n">icmp_seq</span><span class="o">=</span><span class="mi">4</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">64</span> <span class="n">time</span><span class="o">=</span><span class="mf">0.099</span> <span class="n">ms</span>
</pre></div>
</div>
<p>You can delete the container</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">magnum</span> <span class="n">container</span><span class="o">-</span><span class="n">delete</span> <span class="n">demo</span><span class="o">-</span><span class="n">container</span>
</pre></div>
</div>
<p>While doing this demo, i missed adding branch name while cloning Magnum
source code, when i installed Magnum all package dependencies where
installed from master, who was Mitaka instead of Liberty, which broke my
environment.</p>
<p>I suffered the following issues:</p>
<p>Issues with packages</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ImportError</span><span class="p">:</span> <span class="n">No</span> <span class="n">module</span> <span class="n">named</span> <span class="n">MySQLdb</span>
</pre></div>
</div>
<p>Was solved installing MySQL-python from pip instead of yum</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">MySQL</span><span class="o">-</span><span class="n">python</span>
</pre></div>
</div>
<p>Issues with policies, admin privileges weren’t recognized by Magnum api.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PolicyNotAuthorized</span><span class="p">:</span> <span class="n">magnum</span><span class="o">-</span><span class="n">service</span><span class="p">:</span><span class="n">get_all</span><span class="p">{{</span> <span class="n">bunch</span> <span class="n">of</span> <span class="n">stuff</span> <span class="p">}}</span> <span class="n">disallowed</span> <span class="n">by</span> <span class="n">policy</span>
</pre></div>
</div>
<p>Was solved removing admin_api rule at Magnum policy.json file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">magnum</span><span class="o">/</span><span class="n">policy</span><span class="o">.</span><span class="n">json</span>

<span class="c1">#    &quot;admin_api&quot;: &quot;rule:context_is_admin&quot;,</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Unfortunately, nova was completely broken and it was not working at
all, so i installed a new environment and added branch while cloning
source code.</div>
<div class="line">Next issue i found was Barbican, who was not installed, i used the
steps mentioned at this post to solve this issue.</div>
</div>
<p>Hope this guide helps you integrating Magnum Container as a Service in
OpenStack.</p>
<p>Regards, Eduardo Gonzalez</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">egonzalez</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Post:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="2017-08-28-openstack-tacker-and-service-function-chaining-sfc-with-kolla.html">OpenStack tacker and service function chaining sfc with kolla</a></li>
<li class="toctree-l1"><a class="reference internal" href="2017-02-22-deploy-openstack-designate-with-kolla-ansible.html">Deploy OpenStack designate with kolla-ansible</a></li>
<li class="toctree-l1"><a class="reference internal" href="2017-01-31-openstack-keystone-zero-downtime-upgrade-process-n-to-o.html">OpenStack keystone zero downtime upgrade process newton to ocata</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-10-31-to-conditional-or-to-skip-that-is-the-ansible-question.html">To conditional or to skip, that’s the Ansible question</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-07-12-spacewalk-red-hat-satellite-v5-in-a-docker-container-poc.html">Spacewalk Red Hat Satellite v5 in a Docker container PoC</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-07-04-midonet-integration-with-openstack-mitaka.html">Midonet integration with OpenStack Mitaka</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-06-15-rally-openstack-benchmarking-from-docker-containers.html">Rally OpenStack benchmarking from Docker containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-06-06-opendaylight-in-a-docker-container.html">OpenDaylight in a Docker container</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-04-24-openstack-kolla-deployment-from-rdo-packages.html">OpenStack kolla deployment from RDO packages</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Magnum in RDO OpenStack Liberty manual installation from source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-03-17-ceph-ansible-baremetal-deployment.html">Ceph Ansible baremetal deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-03-02-nova-vnc-flows-under-the-hood.html">Nova VNC flows under the hood</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-02-24-ansible-ini_file-module-simplifying-your-devops-life.html">Ansible INI file module, simplifying your DevOps life</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-02-15-working-with-affinityanti-affinity-groups-openstack.html">Working with affinity/anti-affinity groups OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-02-02-migrate-from-keystone-v2-0-to-keystone-v3-openstack-liberty.html">Migrate keystone v2.0 to keystone v3 OpenStack Liberty</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-01-27-configure-neutron-dvr-openstack-liberty.html">Configure neutron DVR OpenStack Liberty</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-01-14-openstack-segregation-with-availability-zones-and-host-aggregates.html">OpenStack segregation with availability zones and host aggregates</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-12-23-nova-docker-driver.html">Nova Docker driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-12-14-murano-in-rdo-openstack-manual-installation.html">Murano in RDO OpenStack manual installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-09-08-ceph-radosgw-admin-ops-how-to-use-it.html">Ceph RadosGW admin Ops, how to use it</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-08-13-multiple-store-locations-for-glance-images.html">Multiple store locations for glance images</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-07-02-list-all-tenants-belonging-an-user.html">List all tenants belonging an user</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-03-24-load-balancer-as-a-service-lbaas.html">Load balancer as a service OpenStack LbaaS</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-03-16-openstack-nova-api-start-error-could-not-bind-to-0-0-0-0-address-already-in-use.html">OpenStack nova APi start error, could not bind to 0.0.0.0 address all ready in use</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-03-09-delete-openstack-neutron-networks-solution-to-unable-to-complete-operation-on-subnet.html">Delete OpenStack neutron networks, fix to unable to complete operation on subnet</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="2016-04-24-openstack-kolla-deployment-from-rdo-packages.html" title="previous chapter">OpenStack kolla deployment from RDO packages</a></li>
      <li>Next: <a href="2016-03-17-ceph-ansible-baremetal-deployment.html" title="next chapter">Ceph Ansible baremetal deployment</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Eduardo Gonzalez.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/2016-03-24-magnum-in-rdo-openstack-liberty-manual-installation-from-source-code.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>