<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenStack Stuff | Page 20</title>
    <link rel="shortcut icon" type="image/png" href="https://egonzalez90.github.io/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://egonzalez90.github.io/favicon.ico">
    <link href="https://egonzalez90.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="OpenStack Stuff Full Atom Feed" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/print.css" type="text/css" media="print" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="Eduardo Gonzalez" />
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="https://egonzalez90.github.io/">Home</a></li>
                <li><a href="https://docs.openstack.org">OpenStack</a></li>
                <li><a href="https://www.linkedin.com/in/eduardogonzalezgutierrez">Linkedin</a></li>
                <li><a href="https://github.com/egonzalez90">Github</a></li>
                <li><a href="https://egonzalez90.github.io/archives">Archives</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="https://egonzalez90.github.io/">OpenStack Stuff</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Sep 27, 2014</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/cambio-de-psp-para-un-dispositivo-rdm-en-esxi-5-x.html" rel="bookmark" title="Permanent Link to &quot;Cambio de PSP para un dispositivo RDM en ESXi 5.x&quot;">Cambio de PSP para un dispositivo RDM en ESXi 5.x</a>
                </h2>

                
                

                <p>Primero veremos la información del RDM mediante este comando</p>
<blockquote>
<p>vmkfstools -q
/vmfs/volumes/CabinaAlmacenamiento/MaquinaVirtual/MaquinaVirtual.vmdk</p>
</blockquote>
<!--more-->

<p>Nos sacara esta información. A nosotros nos interesa el vml.*****,
el cual es el que utilizaremos en el siguiente paso.</p>
<blockquote>
<p>Disk
/vmfs/volumes/CabinaAlmacenamiento/MaquinaVirtual/MaquinaVirtual.vmdk
is a Passthrough Raw Device Mapping</p>
<p>Maps to: vml.0200460111600c0ff0001db1507629da5301000000333833383334</p>
</blockquote>
<p>A continuación utilizaremos el vml.**** para ver la información del
dispositivo</p>
<blockquote>
<p>esxcfg-scsidevs -l
-d vml.0200460111600c0ff0001db1507629da5301000000333833383334</p>
</blockquote>
<p>Esto nos mostrara una información parecida a esta, a nosotros nos
interesa el naa.*****</p>
<blockquote>
<p>naa.600drtf0001db1507629da5301055555</p>
<p>Device Type: Direct-Access</p>
<p>Size: 7629388 MB</p>
<p>Display Name: DotHill Fibre Channel Disk
(naa.600drtf0001db1507629da5301055555)</p>
<p>Multipath Plugin: NMP</p>
<p>Console Device:
/vmfs/devices/disks/naa.600drtf0001db1507629da5301055555</p>
<p>Devfs Path: /vmfs/devices/disks/naa.600drtf0001db1507629da5301055555</p>
<p>Vendor: DotHill   Model: DH3834            Revis: G105</p>
<p>SCSI Level: 5  Is Pseudo: false Status: on</p>
<p>Is RDM Capable: true  Is Removable: false</p>
<p>Is Local: false Is SSD: false</p>
<p>Other Names:</p>
<p>vml.0200460111600c0ff0001db1507629da5301000000333833383334</p>
<p>VAAI Status: supported</p>
</blockquote>
<p>Los siguiente es ver que configuración de PSP tiene el dispositivo, para
ello utilizaremos este comando con el naa.***** que nos mostró el
comando anterior</p>
<blockquote>
<p>esxcli storage nmp device list -d naa.600drtf0001db1507629da5301055555</p>
</blockquote>
<p>Esta es la salida del comando anterior, en el que podremos ver el tipo
de PSP en la linea Path selection Policy, en este caso es MRU (Most
Recent Used)</p>
<blockquote>
<p>naa.600drtf0001db1507629da5301055555</p>
<p>Device Display Name: DotHill Fibre Channel Disk
(naa.600drtf0001db1507629da5301055555)</p>
<p>Storage Array Type: VMW_SATP_ALUA</p>
<p>Storage Array Type Device Config:
{implicit_support=on;explicit_support=off;
explicit_allow=on;alua_followover=on;{TPG_id=1,TPG_state=ANO}{TPG_id=0,TPG_state=AO}}</p>
<p>Path Selection Policy: VMW_PSP_MRU</p>
<p>Path Selection Policy Device Config: Current Path=vmhba0:C0:T3:L1</p>
<p>Path Selection Policy Device Custom Config:</p>
<p>Working Paths: vmhba0:C0:T3:L1</p>
<p>Is Local SAS Device: false</p>
<p>Is Boot USB Device: false</p>
</blockquote>
<p>Si quisiéramos cambiar el PSP lo haremos mediante este comando, en este
caso la política que aplicaremos sera RR(Round Robin)</p>
<blockquote>
<p>esxcli storage nmp device set -d
naa.600drtf0001db1507629da5301055555 --psp=VMW_PSP_RR</p>
</blockquote>
<p>Volvemos a comprobar que tipo de politica se ha aplicado</p>
<blockquote>
<p>esxcli storage nmp device list -d naa.600drtf0001db1507629da5301055555</p>
</blockquote>
<p>Aquí vemos como efectivamente esta en RR el PSP</p>
<blockquote>
<p>naa.600drtf0001db1507629da5301055555</p>
<p>Device Display Name: DotHill Fibre Channel Disk
(naa.600drtf0001db1507629da5301055555)</p>
<p>Storage Array Type: VMW_SATP_ALUA</p>
<p>Storage Array Type Device Config:
{implicit_support=on;explicit_support=off;
explicit_allow=on;alua_followover=on;{TPG_id=1,TPG_state=ANO}{TPG_id=0,TPG_state=AO}}</p>
<p>Path Selection Policy: VMW_PSP_RR</p>
<p>Path Selection Policy Device Config: Current Path=vmhba0:C0:T3:L1</p>
<p>Path Selection Policy Device Custom Config:</p>
<p>Working Paths: vmhba0:C0:T3:L1</p>
<p>Is Local SAS Device: false</p>
<p>Is Boot USB Device: false</p>
</blockquote>
<p>Muchas gracias por leer el blog.</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/cambio-de-psp-para-un-dispositivo-rdm-en-esxi-5-x.html">posted at 16:33</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/virtualizacion.html" rel="tag">Virtualizacion</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/cambiar.html" class="tags">cambiar</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/cambio.html" class="tags">cambio</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/dispositivo.html" class="tags">dispositivo</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/esxcli.html" class="tags">esxcli</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/esxi.html" class="tags">esxi</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/most-recent-used.html" class="tags">most recent used</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/mru.html" class="tags">MRU</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/naa.html" class="tags">naa.</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/nmp.html" class="tags">nmp</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/psp.html" class="tags">PSP</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/raw.html" class="tags">raw</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/rdm.html" class="tags">rdm</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/round-robin.html" class="tags">round robin</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/rr.html" class="tags">RR</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/storage.html" class="tags">storage</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/virtualizacion.html" class="tags">virtualizacion</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/vml.html" class="tags">vml.</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/vmware.html" class="tags">vmware</a>
                </div>
		<a href="https://egonzalez90.github.io/cambio-de-psp-para-un-dispositivo-rdm-en-esxi-5-x.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Sep 26, 2014</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/shellshock-cve-2014-6271-cve-2014-7169-rhel.html" rel="bookmark" title="Permanent Link to &quot;ShellShock CVE-2014-6271, CVE-2014-7169 RHEL&quot;">ShellShock CVE-2014-6271, CVE-2014-7169 RHEL</a>
                </h2>

                
                

                <p>Para comprobar que el sistema es vulnerable a <span
style="font-family: 'Liberation Sans', 'Trebuchet MS', 'Bitstream Vera Sans', helvetica, verdana, arial, sans-serif; line-height: 18.2000007629395px;">CVE-2014-6271</span></p>
<p>``` {style="border-width: 1px 1px 1px 2px; border-style: solid; border-color: #eeeeee #eeeeee #eeeeee #cccccc; margin: 10px 20px; padding: 10px; vertical-align: baseline; font-family: 'Liberation Sans', 'Luxi Sans', 'Trebuchet MS', 'Bitstream Vera Sans', helvetica, verdana, arial, sans-serif; white-space: pre; overflow-x: auto; width: auto; word-wrap: normal; line-height: 18.2000007629395px; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: repeat;"}
$ env 'x=() { :;}; echo vulnerable' 'BASH_FUNC_x()=() { :;}; echo vulnerable' bash -c "echo test"</p>
<div class="highlight"><pre><span></span><span class="c">&lt;!--more--&gt;</span>

Si el resultado es &quot;vulnerable&quot; tienes una versión de Bash vulnerable,
si muestra errores y &quot;test&quot; quiere decir que tienes el parche de bash
adecuado, por lo que estas protegido ante <span class="nt">&lt;span</span>
<span class="na">style=</span><span class="s">&quot;font-family: &#39;Liberation Sans&#39;, &#39;Trebuchet MS&#39;, &#39;Bitstream Vera Sans&#39;, helvetica, verdana, arial, sans-serif; line-height: 18.2000007629395px;&quot;</span><span class="nt">&gt;</span>CVE-2014-6271.<span class="nt">&lt;/span&gt;</span>

<span class="nt">&lt;span</span>
<span class="na">style=</span><span class="s">&quot;font-family: &#39;Liberation Sans&#39;, &#39;Trebuchet MS&#39;, &#39;Bitstream Vera Sans&#39;, helvetica, verdana, arial, sans-serif; line-height: 18.2000007629395px;&quot;</span><span class="nt">&gt;</span>Ahora
bien, con el parche de CVE-2014-6271, se ha encontrado la
vulnerabilidad <span class="nt">&lt;/span&gt;</span>CVE-2014-7169

Comprobaremos si somos vulnerables con el siguiente comando

``` {style=&quot;border-width: 1px 1px 1px 2px; border-style: solid; border-color: #eeeeee #eeeeee #eeeeee #cccccc; margin: 10px 20px; padding: 10px; vertical-align: baseline; font-family: &#39;Liberation Sans&#39;, &#39;Luxi Sans&#39;, &#39;Trebuchet MS&#39;, &#39;Bitstream Vera Sans&#39;, helvetica, verdana, arial, sans-serif; white-space: pre; overflow-x: auto; width: auto; word-wrap: normal; line-height: 18.2000007629395px; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: repeat;&quot;}
cd /tmp; rm -f /tmp/echo; env &#39;x=() { (a)=&gt;&#39; bash -c &quot;echo date&quot;; cat /tmp/echo
</pre></div>


<p>Si te muestra la fecha es que tienes la versión de bash vulnerable, si
te muestra errores y "/tmp/echo no such file or directory" quiere decir
que estas seguro frente a <span
style="line-height: 20.7999992370605px;">CVE-2014-7169</span></p>
<p><span style="line-height: 20.7999992370605px;">Para corregir la
vulnerabilidad introducir el siguiente comando para actualizar la
versión de bash</span></p>
<p>``` {style="border-width: 1px 1px 1px 2px; border-style: solid; border-color: #eeeeee #eeeeee #eeeeee #cccccc; margin: 10px 20px; padding: 10px; vertical-align: baseline; font-family: 'Liberation Sans', 'Luxi Sans', 'Trebuchet MS', 'Bitstream Vera Sans', helvetica, verdana, arial, sans-serif; white-space: pre; overflow-x: auto; width: auto; word-wrap: normal; line-height: 18.2000007629395px; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: repeat;"}</p>
<h1>yum update bash</h1>
<p>```</p>
<p><span
style="font-family: tahoma,geneva,sans-serif; color: #000000;"><code style="font-size: 11px; border: 0px; margin: 0px; padding: 0px; vertical-align: baseline; overflow-x: auto; width: auto; word-wrap: normal; background: transparent;">En estos momentos aun no hay parche adecuado para bash por lo que sigue siendo vulnerable a</code></span><span
style="line-height: 20.7999992370605px;"><span
style="font-family: lucida sans unicode,lucida grande,sans-serif;"><span
style="font-family: tahoma,geneva,sans-serif; color: #000000;">CVE-2014-7169</span>,</span>
deberás estar atento al momento en que lo publiquen para minimizar los
riesgos</span></p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/shellshock-cve-2014-6271-cve-2014-7169-rhel.html">posted at 14:56</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/linux.html" rel="tag">Linux</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/bash.html" class="tags">bash</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/cve-2014-6271.html" class="tags">CVE-2014-6271</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/cve-2014-7169.html" class="tags">CVE-2014-7169</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/fix.html" class="tags">fix</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/parche.html" class="tags">parche</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/red-hat.html" class="tags">red hat</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/rhel.html" class="tags">rhel</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/seguridad.html" class="tags">Seguridad</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/shellshock.html" class="tags">shellshock</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/vulnerable.html" class="tags">vulnerable</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/yum-update.html" class="tags">yum update</a>
                </div>
		<a href="https://egonzalez90.github.io/shellshock-cve-2014-6271-cve-2014-7169-rhel.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Sep 25, 2014</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/elb-en-aws-elastic-load-balancers.html" rel="bookmark" title="Permanent Link to &quot;ELB en AWS (Elastic Load Balancers)&quot;">ELB en AWS (Elastic Load Balancers)</a>
                </h2>

                
                

                <p>Hoy mostraré como crear Elastic Load Balancer (ELB) en Amazon Web
Services el cual nos permitirá distribuir automáticamente el trafico
entre las aplicaciones de las distintas instancias y obtener una mejor
tolerancia a fallos.<!--more--></p>
<p>Primero nos logearemos en AWS e iremos a la pestaña EC2, una vez a, aquí
pulsaremos sobre Load Balancers del menú izquierdo.</p>
<p>Se nos abrirá esta ventana en la que pulsaremos Create Load Balancer
para configurar un ELB nuevo. En esta misa ventana nos mostraría los ELB
ya creados</p>
<p><a href="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/011.png"><img alt="01" src="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/011.png"></a></p>
<p>Una vez abierto Create Load Balancer, rellenaremos el Nombre del ELB a
crear y estableceremos los protocolos que soportara el ELB, por defecto
viene activado HTTP por el puerto 80</p>
<p><a href="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/021.png"><img alt="02" src="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/021.png"></a></p>
<p>En esta próxima pantalla configuraremos los análisis de salud de
nuestras instancias, para ello ajustaremos los parámetros inferiores a
nuestro gusto</p>
<p><a href="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/031.png"><img alt="03" src="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/031.png"></a></p>
<p>Aquí asignaremos o crearemos un Security Group, en mi caso utilizare uno
ya existente</p>
<p><a href="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/041.png"><img alt="04" src="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/041.png"></a></p>
<p>Lo ultimo que configuraremos serán las instancias que harán uso del ELB,
seleccionamos las que queramos y pulsaremos en Continue</p>
<p><a href="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/051.png"><img alt="05" src="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/051.png"></a></p>
<p>Finalizaremos estableciendo una etiqueta a nuestro ELB</p>
<p><a href="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/061.png"><img alt="06" src="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/061.png"></a></p>
<p>Antes de terminar de crear el ELB, nos mostrara una resumen de la
configuración, si estuviéramos de acuerdo pulsaríamos en Create, de lo
contrario modificaremos alguna de las partes anteriores</p>
<p><a href="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/071.png"><img alt="07" src="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/071.png"></a></p>
<p>Esta seria una imagen del ELB creado, tendremos que esperar un rato
hasta que este activo, una vez activo veremos In Service el Status de
las Instancias, aunque en algunas ocasiones aunque este In Service aun
no tenemos conexión a través del ELB</p>
<p><a href="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/081.png"><img alt="08" src="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/081.png"></a></p>
<p>Un saludo</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/elb-en-aws-elastic-load-balancers.html">posted at 16:43</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/openstack.html" rel="tag">OpenStack</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/amazon-automatizar-aws-balancers-cloud-crear-distribuir-elb-http-instancias-load-services.html" class="tags">amazon, automatizar, AWS, Balancers, cloud, crear, distribuir, ELB, http, instancias, Load, Services</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/elastic-trafico-virtualizacion-web.html" class="tags">Elastic, trafico, virtualizacion, web</a>
                </div>
		<a href="https://egonzalez90.github.io/elb-en-aws-elastic-load-balancers.html#disqus_thread">Click to read and post comments</a>
            </article>

                <div class="clear"></div>
                <div class="pages">

                    <a href="https://egonzalez90.github.io/page/19" class="prev_page">&larr;&nbsp;Previous</a>
                    <a href="https://egonzalez90.github.io/page/21" class="next_page">Next&nbsp;&rarr;</a>
                    <span>Page 20 of 34</span>
                </div>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="https://egonzalez90.github.io/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>