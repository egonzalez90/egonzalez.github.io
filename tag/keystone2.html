<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenStack Stuff | articles tagged "keystone" | Page 2</title>
    <link rel="shortcut icon" type="image/png" href="https://egonzalez90.github.io/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://egonzalez90.github.io/favicon.ico">
    <link href="https://egonzalez90.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="OpenStack Stuff Full Atom Feed" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/print.css" type="text/css" media="print" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="Eduardo Gonzalez" />
</head>
<body>
    <header>
        <nav>
            <ul>
                <li class="ephemeral selected"><a href="https://egonzalez90.github.io/tag/keystone2.html">keystone</a></li>
                <li><a href="https://egonzalez90.github.io/">Home</a></li>
                <li><a href="https://docs.openstack.org">OpenStack</a></li>
                <li><a href="https://www.linkedin.com/in/eduardogonzalezgutierrez">Linkedin</a></li>
                <li><a href="https://github.com/egonzalez90">Github</a></li>
                <li><a href="https://egonzalez90.github.io/archives">Archives</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="https://egonzalez90.github.io/">OpenStack Stuff</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Feb 04, 2015</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/fix-keystone-malformed-endpoint-url-500-openstack.html" rel="bookmark" title="Permanent Link to &quot;Fix Keystone malformed endpoint url 500 Openstack&quot;">Fix Keystone malformed endpoint url 500 Openstack</a>
                </h2>

                
                

                <p>How to fix error malformed endpoint url (HTTP 500) in Openstack</p>
<h2><span style="color: #ff0000;">DON'T DO IT IN A PRODUCTION ENVIRONMENT</span></h2>
<p>1st - Delete the malformed endpoint in the database.</p>
<blockquote>
<p>mysql -u root -p</p>
<p># use keystone;</p>
<p># select * from endpoint;</p>
<p># delete from endpoint where service_id="ENDPOINT_ID";</p>
</blockquote>
<p>2nd - Recreate the endpoint with the keystone endpoint-create command.</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/fix-keystone-malformed-endpoint-url-500-openstack.html">posted at 17:34</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/openstack.html" rel="tag">OpenStack</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/500.html" class="tags">500</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/database.html" class="tags">database</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/delete.html" class="tags">delete</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/endpoint.html" class="tags">endpoint</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/entry.html" class="tags">entry</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/error.html" class="tags">error</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/fix.html" class="tags">fix</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/http.html" class="tags">http</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/keystone.html" class="tags selected">keystone</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/malformed.html" class="tags">malformed</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/openstack.html" class="tags">openstack</a>
                </div>
		<a href="https://egonzalez90.github.io/fix-keystone-malformed-endpoint-url-500-openstack.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Dec 29, 2014</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/comprobar-keystone.html" rel="bookmark" title="Permanent Link to &quot;Comprobar Keystone&quot;">Comprobar Keystone</a>
                </h2>

                
                

                <p>En anteriores post hemos configurado Keystone(Identity Service), ahora
deberemos de comprobar que este correctamente configurado. Para ello he
creado esta entrada en el blog.</p>
<p>Lo primero que haremos será quitar las variables de entorno con las que
nos autenticábamos en el servicio, con ello nos tendremos que autenticar
con usuario y contraseña.</p>
<blockquote>
<p>unset OS_SERVICE_TOKEN OS_SERVICE_ENDPOINT</p>
</blockquote>
<p>A continuación crearemos el archivo admin-openrc.sh, en el que
configuraremos los datos de nuestro usuario, en este caso el usuario
admin previamente creado. Una vez creado el fichero anterior mediante un
editor de texto, vi, gedit, nano, etc. Incluiremos el siguiente
contenido:</p>
<blockquote>
<p>export OS_USERNAME=admin</p>
<p>export OS_PASSWORD=\&lt;adminPASSWORD></p>
<p>export OS_TENANT_NAME=admin</p>
<p>export OS_AUTH_URL=http://controller:35357/v2.0</p>
</blockquote>
<p>A continuación, estableceremos las variables de entorno añadidas en el
archivo admin-openrc.sh</p>
<blockquote>
<p>source admin-openrc.sh</p>
</blockquote>
<p>Comprobaremos que podemos listar los usuarios y ya de paso comprobamos
que estan bien definidas las variables y por lo tanto estamos utilizando
el usuario admin en esta operación</p>
<blockquote>
<p>keystone user-list</p>
</blockquote>
<p>Listamos los roles del usuario admin</p>
<blockquote>
<p>keystone user-role-list --user=admin --tenant=admin</p>
</blockquote>
<p>Estos dos últimos comandos nos mostraran una información, en la que
comprobaremos que el ID del usuario admin esta en el rol de admin y
_member_</p>
<p>Si todo lo anterior salió correctamente quiere decir que tenemos la
configuración básica de Identity Service correctamente realizada y
podremos seguir configurando mas servicios en nuestro entorno</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/comprobar-keystone.html">posted at 18:14</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/openstack.html" rel="tag">OpenStack</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/-.html" class="tags">-</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/comprobar.html" class="tags">comprobar</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/instalacion.html" class="tags">instalacion</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/keystone.html" class="tags selected">keystone</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/list.html" class="tags">list</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/openstack.html" class="tags">openstack</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/role.html" class="tags">role</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/usr.html" class="tags">usr</a>
                </div>
		<a href="https://egonzalez90.github.io/comprobar-keystone.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Dec 23, 2014</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/keystone-api-endpoint.html" rel="bookmark" title="Permanent Link to &quot;Keystone API endpoint&quot;">Keystone API endpoint</a>
                </h2>

                
                

                <p>Una vez configurado Keystone, creados sus usuarios y el servicio,
deberemos de decirle a Identity Service donde debe ir a "buscar" el
servicio. Para ello configuramos los Endpoints, que no son ni mas ni
menos que las direcciones donde están los servicios.Al tener únicamente
a Identity Service configurado solo tenemos que configurar un Endpoint
(de momento)</p>
<p>Antes que nada, debemos tener Identity Service configurado, para ello lo
haremos mediante el siguiente comando:</p>
<blockquote>
<p>keystone service-create --name=keystone --type=identity
--description="Openstack Identity"</p>
</blockquote>
<p>El siguiente paso a realizar es especificar/crear el Endpoint a Keystone
de Identity Service. para ello necesitaremos el ID del servicio creado
en el paso anterior.</p>
<blockquote>
<p>keystone endpoint-create --service-id=\&lt;ID></p>
<p>--publicurl=http://controller:5000/v2.0</p>
<p>--internalurl=http://controller:5000/v2.0</p>
<p>--adminurl=http://controller:35357/v2.0</p>
</blockquote>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/keystone-api-endpoint.html">posted at 18:14</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/openstack.html" rel="tag">OpenStack</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/api.html" class="tags">api</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/cloud.html" class="tags">cloud</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/endpoint.html" class="tags">endpoint</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/identity-service.html" class="tags">identity service</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/keystone.html" class="tags selected">keystone</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/openstack.html" class="tags">openstack</a>
                </div>
		<a href="https://egonzalez90.github.io/keystone-api-endpoint.html#disqus_thread">Click to read and post comments</a>
            </article>

                <div class="clear"></div>
                <div class="pages">

                    <a href="https://egonzalez90.github.io/" class="prev_page">&larr;&nbsp;Previous</a>
                    <a href="https://egonzalez90.github.io/page/3" class="next_page">Next&nbsp;&rarr;</a>
                    <span>Page 2 of 3</span>
                </div>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="https://egonzalez90.github.io/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>