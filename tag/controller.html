<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenStack Stuff | articles tagged "controller"</title>
    <link rel="shortcut icon" type="image/png" href="https://egonzalez90.github.io/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://egonzalez90.github.io/favicon.ico">
    <link href="https://egonzalez90.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="OpenStack Stuff Full Atom Feed" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/print.css" type="text/css" media="print" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="Eduardo Gonzalez" />
</head>
<body>
    <header>
        <nav>
            <ul>
                <li class="ephemeral selected"><a href="https://egonzalez90.github.io/tag/controller.html">controller</a></li>
                <li><a href="https://egonzalez90.github.io/">Home</a></li>
                <li><a href="https://docs.openstack.org">OpenStack</a></li>
                <li><a href="https://www.linkedin.com/in/eduardogonzalezgutierrez">Linkedin</a></li>
                <li><a href="https://github.com/egonzalez90">Github</a></li>
                <li><a href="https://egonzalez90.github.io/archives">Archives</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="https://egonzalez90.github.io/">OpenStack Stuff</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Jun 06, 2016</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/opendaylight-in-a-docker-container.html" rel="bookmark" title="Permanent Link to &quot;OpenDaylight in a Docker container&quot;">OpenDaylight in a Docker container</a>
                </h2>

                
                

                <p>This is a quick guide to start a Docker container with OpenDaylight
running on it.</p>
<p>Clone OpenDaylight integration repository</p>
<div class="highlight"><pre><span></span>[egonzalez@localhost]$ git clone https://github.com/opendaylight/integration.git
</pre></div>


<p>Move to the directory where CentOS Dockerfile is saved.</p>
<div class="highlight"><pre><span></span>[egonzalez@localhost]$ cd integration/packaging/docker/centos/
</pre></div>


<p>Build the new image, you can call it as your DockerHub name(in my case
egonzalez90), so you can push it there later.<br>
If you don't want to create a new image, you can use my image. This
step will download and start the new container:
<code>docker run -d egonzalez90/opendaylight</code></p>
<div class="highlight"><pre><span></span>[egonzalez@localhost centos]$ docker build -t egonzalez90/opendaylight .

Sending build context to Docker daemon  7.68 kB
Step 1 : FROM centos:7
Trying to pull repository docker.io/library/centos ... 7: Pulling from library/centos
1544084fad81: Pull complete 
df0fc3863fbc: Pull complete 
a3d54b467fad: Pull complete 
a65193109361: Pull complete 
Digest: sha256:a9237ff42b09cc6f610bab60a36df913ef326178a92f3b61631331867178f982
Status: Downloaded newer image for docker.io/centos:7

 ---&gt; a65193109361
Step 2 : MAINTAINER OpenDaylight Project &lt;info@opendaylight.org&gt;
 ---&gt; Running in d3f98f949b11
 ---&gt; 81a1bad2e3a7
Removing intermediate container d3f98f949b11
Step 3 : ADD opendaylight-3-candidate.repo /etc/yum.repos.d/
 ---&gt; 069a9c60878e
Removing intermediate container b9afb18311f3
Step 4 : RUN yum update -y &amp;&amp; yum install -y opendaylight
 ---&gt; Running in 559b3970235d

[[[ PACKAGE INSTALLATION STUFF ]]]

Complete!
 ---&gt; 4003e5874b03
Removing intermediate container 559b3970235d
Step 5 : EXPOSE 162 179 1088 1790 1830 2400 2550 2551 2552 4189 4342 5005 5666 6633 6640 6653 7800 8000 8080 8101 8181 8383 12001
 ---&gt; Running in 7defebe8b7e2
 ---&gt; 9668a559bdac
Removing intermediate container 7defebe8b7e2
Step 6 : WORKDIR /opt/opendaylight
 ---&gt; Running in 9298a116dd14
 ---&gt; 5bf42f56e282
Removing intermediate container 9298a116dd14
Step 7 : CMD ./bin/karaf server
 ---&gt; Running in e0a218941b15
 ---&gt; c1a0db72dbbc
Removing intermediate container e0a218941b15
Successfully built c1a0db72dbbc
</pre></div>


<p>Once the image is built or downloaded, ensure you have it locally</p>
<div class="highlight"><pre><span></span>[egonzalez@localhost]$ docker images | grep opendaylight
egonzalez90/opendaylight                              latest              c1a0db72dbbc        About a minute ago   740.6 MB
</pre></div>


<p>Start a new container in a detached mode.</p>
<div class="highlight"><pre><span></span>[egonzalez@localhost]$ docker run -d egonzalez90/opendaylight
ae08898ba6adc30df012513dc6eac54943d9de8c8059e73ade185757fe684c6a
Usage of loopback devices is strongly discouraged for production use. Either use `--storage-opt dm.thinpooldev` or use `--storage-opt dm.no_warn_on_loop_devices=true` to suppress this warning.
</pre></div>


<p>Check if the container is running with:</p>
<div class="highlight"><pre><span></span>[egonzalez@localhost]$ docker ps | grep opendaylight 
ae08898ba6ad        egonzalez90/opendaylight   &quot;./bin/karaf server&quot;     14 seconds ago      Up 11 seconds       162/tcp, 179/tcp, 1088/tcp, 1790/tcp, 1830/tcp, 2400/tcp, 2550-2552/tcp, 4189/tcp, 4342/tcp, 5005/tcp, 5666/tcp, 6633/tcp, 6640/tcp, 6653/tcp, 7800/tcp, 8000/tcp, 8080/tcp, 8101/tcp, 8181/tcp, 8383/tcp, 12001/tcp   awesome_khorana
</pre></div>


<p>Now, check container information with docker inspect, we search for the
IP address</p>
<div class="highlight"><pre><span></span>[egonzalez@localhost]$ docker inspect  ae08898ba6ad | grep -i IPAddress
        &quot;SecondaryIPAddresses&quot;: null,
        &quot;IPAddress&quot;: &quot;172.17.0.3&quot;,
                &quot;IPAddress&quot;: &quot;172.17.0.3&quot;,
</pre></div>


<p>Now you know the container IP address, to login into karaf, first we
need to download and install karaf client tool<br>
Go to the following URL to download the package:
<a href="http://www.apache.org/dyn/closer.lua/karaf/4.0.5/apache-karaf-4.0.5.tar.gz">http://www.apache.org/dyn/closer.lua/karaf/4.0.5/apache-karaf-4.0.5.tar.gz</a></p>
<p>Extract the files and move to the new directory</p>
<div class="highlight"><pre><span></span>[egonzalez@localhost Downloads]$ tar -xzvf apache-karaf-4.0.5.tar.gz 
[egonzalez@localhost Downloads]$ cd apache-karaf-4.0.5/
</pre></div>


<p>Execute the client authenticating with the container IP</p>
<div class="highlight"><pre><span></span><span class="cp">[</span><span class="nx">egonzalez</span><span class="p">@</span><span class="nx">localhost</span> <span class="nx">apache</span><span class="na">-karaf</span><span class="o">-</span><span class="mf">4.0.5</span><span class="cp">]</span><span class="o">$</span> <span class="o">./</span><span class="nt">bin</span><span class="o">/</span><span class="nt">client</span> <span class="nt">-a</span> <span class="nt">8101</span> <span class="nt">-h</span> <span class="nt">172</span><span class="p">.</span><span class="nc">17</span><span class="p">.</span><span class="nc">0</span><span class="p">.</span><span class="nc">3</span> <span class="nt">-u</span> <span class="nt">karaf</span> <span class="nt">-v</span>
<span class="nt">client</span><span class="o">:</span> <span class="nt">JAVA_HOME</span> <span class="nt">not</span> <span class="nt">set</span><span class="o">;</span> <span class="nt">results</span> <span class="nt">may</span> <span class="nt">vary</span>
<span class="nt">13</span> <span class="cp">[</span><span class="nx">main</span><span class="cp">]</span> <span class="nt">INFO</span> <span class="nt">org</span><span class="p">.</span><span class="nc">apache</span><span class="p">.</span><span class="nc">sshd</span><span class="p">.</span><span class="nc">common</span><span class="p">.</span><span class="nc">util</span><span class="p">.</span><span class="nc">SecurityUtils</span> <span class="nt">-</span> <span class="nt">BouncyCastle</span> <span class="nt">not</span> <span class="nt">registered</span><span class="o">,</span> <span class="nt">using</span> <span class="nt">the</span> <span class="nt">default</span> <span class="nt">JCE</span> <span class="nt">provider</span>
<span class="nt">Logging</span> <span class="nt">in</span> <span class="nt">as</span> <span class="nt">karaf</span>
<span class="nt">194</span> <span class="cp">[</span><span class="nx">sshd</span><span class="na">-SshClient</span><span class="err">[</span><span class="mi">12</span><span class="nx">bb4df8</span><span class="cp">]</span><span class="nt">-nio2-thread-1</span><span class="o">]</span> <span class="nt">INFO</span> <span class="nt">org</span><span class="p">.</span><span class="nc">apache</span><span class="p">.</span><span class="nc">sshd</span><span class="p">.</span><span class="nc">client</span><span class="p">.</span><span class="nc">session</span><span class="p">.</span><span class="nc">ClientSessionImpl</span> <span class="nt">-</span> <span class="nt">Client</span> <span class="nt">session</span> <span class="nt">created</span>
<span class="nt">203</span> <span class="cp">[</span><span class="nx">main</span><span class="cp">]</span> <span class="nt">INFO</span> <span class="nt">org</span><span class="p">.</span><span class="nc">apache</span><span class="p">.</span><span class="nc">sshd</span><span class="p">.</span><span class="nc">client</span><span class="p">.</span><span class="nc">session</span><span class="p">.</span><span class="nc">ClientSessionImpl</span> <span class="nt">-</span> <span class="nt">Start</span> <span class="nt">flagging</span> <span class="nt">packets</span> <span class="nt">as</span> <span class="nt">pending</span> <span class="nt">until</span> <span class="nt">key</span> <span class="nt">exchange</span> <span class="nt">is</span> <span class="nt">done</span>
<span class="nt">204</span> <span class="cp">[</span><span class="nx">sshd</span><span class="na">-SshClient</span><span class="err">[</span><span class="mi">12</span><span class="nx">bb4df8</span><span class="cp">]</span><span class="nt">-nio2-thread-1</span><span class="o">]</span> <span class="nt">INFO</span> <span class="nt">org</span><span class="p">.</span><span class="nc">apache</span><span class="p">.</span><span class="nc">sshd</span><span class="p">.</span><span class="nc">client</span><span class="p">.</span><span class="nc">session</span><span class="p">.</span><span class="nc">ClientSessionImpl</span> <span class="nt">-</span> <span class="nt">Server</span> <span class="nt">version</span> <span class="nt">string</span><span class="o">:</span> <span class="nt">SSH-2</span><span class="p">.</span><span class="nc">0-SSHD-CORE-0</span><span class="p">.</span><span class="nc">12</span><span class="p">.</span><span class="nc">0</span>
<span class="nt">321</span> <span class="cp">[</span><span class="nx">sshd</span><span class="na">-SshClient</span><span class="err">[</span><span class="mi">12</span><span class="nx">bb4df8</span><span class="cp">]</span><span class="nt">-nio2-thread-3</span><span class="o">]</span> <span class="nt">WARN</span> <span class="nt">org</span><span class="p">.</span><span class="nc">apache</span><span class="p">.</span><span class="nc">sshd</span><span class="p">.</span><span class="nc">client</span><span class="p">.</span><span class="nc">keyverifier</span><span class="p">.</span><span class="nc">AcceptAllServerKeyVerifier</span> <span class="nt">-</span> <span class="nt">Server</span> <span class="nt">at</span> <span class="o">/</span><span class="nt">172</span><span class="p">.</span><span class="nc">17</span><span class="p">.</span><span class="nc">0</span><span class="p">.</span><span class="nc">3</span><span class="p">:</span><span class="nd">8101</span> <span class="nt">presented</span> <span class="nt">unverified</span> <span class="nt">DSA</span> <span class="nt">key</span><span class="o">:</span> <span class="nt">09</span><span class="p">:</span><span class="nd">a0</span><span class="p">:</span><span class="nd">45</span><span class="p">:</span><span class="nd">95</span><span class="p">:</span><span class="nd">7a</span><span class="p">:</span><span class="nd">dd</span><span class="p">:</span><span class="nd">94</span><span class="p">:</span><span class="nd">7c</span><span class="p">:</span><span class="nd">6b</span><span class="p">:</span><span class="nd">c3</span><span class="p">:</span><span class="nd">f9</span><span class="p">:</span><span class="nd">c0</span><span class="p">:</span><span class="nd">23</span><span class="p">:</span><span class="nd">88</span><span class="p">:</span><span class="nd">1d</span><span class="p">:</span><span class="nd">b0</span>
<span class="nt">324</span> <span class="cp">[</span><span class="nx">sshd</span><span class="na">-SshClient</span><span class="err">[</span><span class="mi">12</span><span class="nx">bb4df8</span><span class="cp">]</span><span class="nt">-nio2-thread-3</span><span class="o">]</span> <span class="nt">INFO</span> <span class="nt">org</span><span class="p">.</span><span class="nc">apache</span><span class="p">.</span><span class="nc">sshd</span><span class="p">.</span><span class="nc">client</span><span class="p">.</span><span class="nc">session</span><span class="p">.</span><span class="nc">ClientSessionImpl</span> <span class="nt">-</span> <span class="nt">Dequeing</span> <span class="nt">pending</span> <span class="nt">packets</span>
<span class="nt">327</span> <span class="cp">[</span><span class="nx">sshd</span><span class="na">-SshClient</span><span class="err">[</span><span class="mi">12</span><span class="nx">bb4df8</span><span class="cp">]</span><span class="nt">-nio2-thread-4</span><span class="o">]</span> <span class="nt">INFO</span> <span class="nt">org</span><span class="p">.</span><span class="nc">apache</span><span class="p">.</span><span class="nc">sshd</span><span class="p">.</span><span class="nc">client</span><span class="p">.</span><span class="nc">session</span><span class="p">.</span><span class="nc">ClientUserAuthServiceNew</span> <span class="nt">-</span> <span class="nt">Received</span> <span class="nt">SSH_MSG_USERAUTH_FAILURE</span>
<span class="nt">338</span> <span class="cp">[</span><span class="nx">sshd</span><span class="na">-SshClient</span><span class="err">[</span><span class="mi">12</span><span class="nx">bb4df8</span><span class="cp">]</span><span class="nt">-nio2-thread-5</span><span class="o">]</span> <span class="nt">INFO</span> <span class="nt">org</span><span class="p">.</span><span class="nc">apache</span><span class="p">.</span><span class="nc">sshd</span><span class="p">.</span><span class="nc">client</span><span class="p">.</span><span class="nc">session</span><span class="p">.</span><span class="nc">ClientUserAuthServiceNew</span> <span class="nt">-</span> <span class="nt">Received</span> <span class="nt">SSH_MSG_USERAUTH_FAILURE</span>
<span class="nt">341</span> <span class="cp">[</span><span class="nx">sshd</span><span class="na">-SshClient</span><span class="err">[</span><span class="mi">12</span><span class="nx">bb4df8</span><span class="cp">]</span><span class="nt">-nio2-thread-6</span><span class="o">]</span> <span class="nt">INFO</span> <span class="nt">org</span><span class="p">.</span><span class="nc">apache</span><span class="p">.</span><span class="nc">sshd</span><span class="p">.</span><span class="nc">client</span><span class="p">.</span><span class="nc">auth</span><span class="p">.</span><span class="nc">UserAuthKeyboardInteractive</span> <span class="nt">-</span> <span class="nt">Received</span> <span class="nt">Password</span> <span class="nt">authentication</span>  <span class="nt">en-US</span>
<span class="nt">344</span> <span class="cp">[</span><span class="nx">sshd</span><span class="na">-SshClient</span><span class="err">[</span><span class="mi">12</span><span class="nx">bb4df8</span><span class="cp">]</span><span class="nt">-nio2-thread-7</span><span class="o">]</span> <span class="nt">INFO</span> <span class="nt">org</span><span class="p">.</span><span class="nc">apache</span><span class="p">.</span><span class="nc">sshd</span><span class="p">.</span><span class="nc">client</span><span class="p">.</span><span class="nc">session</span><span class="p">.</span><span class="nc">ClientUserAuthServiceNew</span> <span class="nt">-</span> <span class="nt">Received</span> <span class="nt">SSH_MSG_USERAUTH_SUCCESS</span>

    <span class="nt">________</span>                       <span class="nt">________</span>                <span class="p">.</span><span class="nc">__</span>  <span class="p">.</span><span class="nc">__</span>       <span class="p">.</span><span class="nc">__</span>     <span class="nt">__</span>       
    <span class="err">\</span><span class="nt">_____</span>  <span class="err">\</span> <span class="nt">______</span>   <span class="nt">____</span>   <span class="nt">____</span> <span class="err">\</span><span class="nt">______</span> <span class="err">\</span> <span class="nt">_____</span>  <span class="nt">___</span><span class="p">.</span><span class="nc">__</span><span class="o">.|</span>  <span class="o">|</span> <span class="o">|</span><span class="nt">__</span><span class="o">|</span> <span class="nt">____</span> <span class="o">|</span>  <span class="o">|</span><span class="nt">___</span><span class="o">/</span>  <span class="o">|</span><span class="nt">_</span>     
     <span class="o">/</span>   <span class="o">|</span>   <span class="err">\\</span><span class="nt">____</span> <span class="err">\</span><span class="nt">_</span><span class="o">/</span> <span class="nt">__</span> <span class="err">\</span> <span class="o">/</span>    <span class="err">\</span> <span class="o">|</span>    <span class="o">|</span>  <span class="err">\\</span><span class="nt">__</span>  <span class="err">\</span><span class="o">&lt;</span> <span class="o">|</span> <span class="o">||</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|/</span> <span class="nt">___</span><span class="err">\</span><span class="o">|</span> <span class="o">|</span> <span class="err">\</span> <span class="nt">__</span><span class="err">\</span> <span class="o">/</span> <span class="o">|</span> <span class="err">\</span> <span class="o">|</span><span class="nt">_</span><span class="o">&gt;</span> <span class="o">&gt;</span>  <span class="nt">___</span><span class="o">/|</span>   <span class="o">|</span>  <span class="err">\</span><span class="o">|</span>    <span class="err">`</span>   <span class="err">\</span><span class="o">/</span> <span class="nt">__</span> <span class="err">\\</span><span class="nt">___</span>  <span class="o">||</span>  <span class="o">|</span><span class="nt">_</span><span class="o">|</span>  <span class="o">/</span> <span class="o">/</span><span class="nt">_</span><span class="o">/</span>  <span class="o">&gt;</span>   <span class="nt">Y</span>  <span class="err">\</span>  <span class="o">|</span>      
    <span class="err">\</span><span class="nt">_______</span>  <span class="o">/</span>   <span class="nt">__</span><span class="o">/</span> <span class="err">\</span><span class="nt">___</span>  <span class="o">&gt;</span><span class="nt">___</span><span class="o">|</span>  <span class="o">/</span><span class="nt">_______</span>  <span class="o">(</span><span class="nt">____</span>  <span class="o">/</span> <span class="nt">____</span><span class="o">||</span><span class="nt">____</span><span class="o">/</span><span class="nt">__</span><span class="err">\</span><span class="nt">___</span>  <span class="o">/|</span><span class="nt">___</span><span class="o">|</span>  <span class="o">/</span><span class="nt">__</span><span class="o">|</span>      
            <span class="err">\</span><span class="o">/|</span><span class="nt">__</span><span class="o">|</span>        <span class="err">\</span><span class="o">/</span>     <span class="err">\</span><span class="o">/</span>        <span class="err">\</span><span class="o">/</span>     <span class="err">\</span><span class="o">/</span><span class="err">\</span><span class="o">/</span>            <span class="o">/</span><span class="nt">_____</span><span class="o">/</span>      <span class="err">\</span><span class="o">/</span>


<span class="nt">Hit</span> <span class="s1">&#39;&#39;</span> <span class="nt">for</span> <span class="nt">a</span> <span class="nt">list</span> <span class="nt">of</span> <span class="nt">available</span> <span class="nt">commands</span>
<span class="nt">and</span> <span class="s1">&#39;</span><span class="cp">[</span><span class="nx">cmd</span><span class="cp">]</span><span class="s1"> --help&#39;</span> <span class="nt">for</span> <span class="nt">help</span> <span class="nt">on</span> <span class="nt">a</span> <span class="nt">specific</span> <span class="nt">command</span><span class="o">.</span>
<span class="nt">Hit</span> <span class="s1">&#39;&#39;</span> <span class="nt">or</span> <span class="nt">type</span> <span class="s1">&#39;system:shutdown&#39;</span> <span class="nt">or</span> <span class="s1">&#39;logout&#39;</span> <span class="nt">to</span> <span class="nt">shutdown</span> <span class="nt">OpenDaylight</span><span class="o">.</span>
</pre></div>


<p>Once karaf login succeed, install a few features like DLUX</p>
<div class="highlight"><pre><span></span>opendaylight-user@root&gt;feature:install odl-restconf odl-l2switch-switch odl-mdsal-apidocs odl-dlux-core
</pre></div>


<p>Now you can login at the container IP with admin as username and
password.</p>
<div class="highlight"><pre><span></span>http://172.17.0.3:8181/index.html
</pre></div>


<p><img alt="Selection_001" src="http://egonzalez.org/wp-content/uploads/2016/06/Selection_001.png"></p>
<p>Best regards</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/opendaylight-in-a-docker-container.html">posted at 18:26</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/linux-various.html" rel="tag">Linux, Various</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/-configure.html" class="tags">--configure</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/container.html" class="tags">container</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/controller.html" class="tags selected">controller</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/docker.html" class="tags">docker</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/install.html" class="tags">install</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/opendaylight.html" class="tags">OpenDaylight</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/sdn.html" class="tags">sdn</a>
                </div>
		<a href="https://egonzalez90.github.io/opendaylight-in-a-docker-container.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Feb 04, 2015</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/nova-en-controller-node.html" rel="bookmark" title="Permanent Link to &quot;Nova en Controller Node&quot;">Nova en Controller Node</a>
                </h2>

                
                

                <p>Instalaremos los paquetes de Nova en Controller node.</p>
<blockquote>
<p># yum install openstack-nova-api
openstack-nova-cert openstack-nova-conductor</p>
<p>openstack-nova-console openstack-nova-novncproxy
openstack-nova-scheduler</p>
<p>openstack-python-novaclient</p>
</blockquote>
<p>Configuramos nova para que use nuestra base de datos.</p>
<blockquote>
<p># openstack-config --set /etc/nova/nova.conf database connection
mysql://nova:PASSWD@controller/nova</p>
</blockquote>
<p>Configuramos el uso de QPID.</p>
<blockquote>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT rpc_backend
qpid</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT qpid_hostname
controller</p>
</blockquote>
<p>Configuramos algunos parámetros como el vnc.</p>
<blockquote>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT my_ip
192.168.1.11</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT
vncserver_listen 192.168.1.11</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT
vncserver_proxyclient_address    192.168.1.11</p>
</blockquote>
<p>Creamos el usuario nova en la base de datos.</p>
<blockquote>
<p># mysql -u root -p</p>
<p># CREATE DATABASE nova;</p>
<p># GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'localhost' IDENTIFIED BY
'passwd';</p>
<p># GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'%' IDENTIFIED BY
'passwd';</p>
</blockquote>
<p>Creamos las tablas de nova en la base de datos.</p>
<blockquote>
<p># su -s /bin/sh -c "nova-manage db sync" nova</p>
</blockquote>
<p>Creamos el usuario nova en el tenant service con rol de admin.</p>
<p># keystone user-create --name=nova --pass=PASSWD --email=nova@mail.com</p>
<p># keystone user-role-add --user=nova --tenant=service --role=admin</p>
<p>Configuramos nova para que use keystone.</p>
<blockquote>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT auth_strategy
keystone</p>
<p># openstack-config --set /etc/nova/nova.conf keystone_authtoken
auth_uri http://controller:5000</p>
<p># openstack-config --set /etc/nova/nova.conf keystone_authtoken
auth_host controller</p>
<p># openstack-config --set /etc/nova/nova.conf keystone_authtoken
auth_protocol http</p>
<p># openstack-config --set /etc/nova/nova.conf keystone_authtoken
auth_port 35357</p>
<p># openstack-config --set /etc/nova/nova.conf keystone_authtoken
admin_user nova</p>
<p># openstack-config --set /etc/nova/nova.conf keystone_authtoken
admin_tenant_name service</p>
<p># openstack-config --set /etc/nova/nova.conf keystone_authtoken
admin_password PASSWD</p>
</blockquote>
<p>Registramos el servicio en nova y creamos el endpoint.</p>
<blockquote>
<p># keystone service-create --name=nova --type=compute
--description="Openstack Compute"</p>
<p># keystone endpoint-create<br>
 --service-id=\$(keystone service-list | awk '/ compute / {print
\$2}')<br>
 --publicurl=http://controller:8774/v2/%(tenant_id)s<br>
 --internalurl=http://controller:8774/v2/%(tenant_id)s<br>
 --adminurl=http://controller:8774/v2/%(tenant_id)s</p>
</blockquote>
<p>Iniciamos los servicios y establecemos la ejecución en el arranque.</p>
<blockquote>
<p># service openstack-nova-api start</p>
<p># service openstack-nova-cert start</p>
<p># service openstack-nova-consoleauth start</p>
<p># service openstack-nova-scheduler start</p>
<p># service openstack-nova-conductor start</p>
<p># service openstack-nova-novncproxy start</p>
<p># chkconfig openstack-nova-api on</p>
<p># chkconfig openstack-nova-cert on</p>
<p># chkconfig openstack-nova-consoleauth on</p>
<p># chkconfig openstack-nova-scheduler on</p>
<p># chkconfig openstack-nova-conductor on</p>
<p># chkconfig openstack-nova-novncproxy on</p>
</blockquote>
<p>Comprobamos que esta correctamente configurado</p>
<blockquote>
<p># nova image-list</p>
</blockquote>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/nova-en-controller-node.html">posted at 17:11</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/openstack.html" rel="tag">OpenStack</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/cloud.html" class="tags">cloud</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/compute.html" class="tags">compute</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/configurar.html" class="tags">configurar</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/controller.html" class="tags selected">controller</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/image-list.html" class="tags">image-list</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/nova.html" class="tags">nova</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/openstack.html" class="tags">openstack</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/service.html" class="tags">service</a>
                </div>
		<a href="https://egonzalez90.github.io/nova-en-controller-node.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Oct 19, 2014</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/configuracion-de-red-basica-openstack.html" rel="bookmark" title="Permanent Link to &quot;Configuracion de red basica Openstack&quot;">Configuracion de red basica Openstack</a>
                </h2>

                
                

                <p>En la siguiente entrada tienes como configurar las tarjetas de red para
realizar esta instalación de Openstack: <a href="http://egonzalez.org/configuracion-basica-red-rhel-y-centos/" title="Configuracion basica red RHEL y centOS">Configuración básica de red
RHEL</a></p>
<p>Aquí mostrare el esquema conceptual de como ira configurada cada tarjeta
de los distintos nodos.<!--more--></p>
<h1>CONTROLLER</h1>
<blockquote>
<p>hostname controller</p>
</blockquote>
<h3>eth0:</h3>
<ul>
<li>IP 192.168.1.11</li>
<li>GATEWAY 192.168.1.1</li>
</ul>
<h1>NETWORK</h1>
<blockquote>
<p>hostname network</p>
</blockquote>
<h3>eth0</h3>
<ul>
<li>IP 192.168.1.21</li>
<li>GATEWAY 192.168.1.1</li>
</ul>
<h3>eth1</h3>
<ul>
<li>IP 10.0.1.21</li>
</ul>
<h3>External network (eth2)</h3>
<ul>
<li>En el archivo de configuración dejaremos BOOTPROTO=none, sin
    configurar IP ni Netmask</li>
</ul>
<h1>COMPUTE</h1>
<blockquote>
<p>hostname compute1</p>
</blockquote>
<h3>eth0</h3>
<ul>
<li>IP 192.168.1.31</li>
<li>GATEWAY 192.168.1.1</li>
</ul>
<h3>eth1</h3>
<ul>
<li>IP 10.0.1.31</li>
</ul>
<p>*Los siguientes nodos de cómputo se pueden utilizar las siguientes IP</p>
<p>En todos los nodos, se ha de configurar el archivo host de la siguiente
manera</p>
<blockquote>
<p>vi /etc/hosts</p>
<p>192.168.1.11      controller</p>
<p>192.168.1.21      network</p>
<p>192.168.1.31      compute1</p>
</blockquote>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/configuracion-de-red-basica-openstack.html">posted at 16:46</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/openstack.html" rel="tag">OpenStack</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/3-nodos.html" class="tags">3 nodos</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/basica.html" class="tags">basica</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/centos.html" class="tags">centos</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/compute.html" class="tags">compute</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/controller.html" class="tags selected">controller</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/eth0.html" class="tags">eth0</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/network.html" class="tags">network</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/openstack.html" class="tags">openstack</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/red.html" class="tags">red</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/redhat.html" class="tags">redhat</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/rhel.html" class="tags">rhel</a>
                </div>
		<a href="https://egonzalez90.github.io/configuracion-de-red-basica-openstack.html#disqus_thread">Click to read and post comments</a>
            </article>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="https://egonzalez90.github.io/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>