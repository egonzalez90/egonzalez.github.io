<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>OpenStack Stuff - IAM</title>
        <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/main.css" />
        <link href="https://egonzalez90.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="OpenStack Stuff Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://egonzalez90.github.io/">OpenStack Stuff </a></h1>
                <nav><ul>
                    <li><a href="https://docs.openstack.org">OpenStack</a></li>
                    <li><a href="https://www.linkedin.com/in/eduardogonzalezgutierrez">Linkedin</a></li>
                    <li><a href="https://github.com/egonzalez90">Github</a></li>
                    <li><a href="https://egonzalez90.github.io/category/linux.html">Linux</a></li>
                    <li><a href="https://egonzalez90.github.io/category/linux-openstack.html">Linux, OpenStack</a></li>
                    <li><a href="https://egonzalez90.github.io/category/linux-openstack-various.html">Linux, OpenStack, Various</a></li>
                    <li><a href="https://egonzalez90.github.io/category/linux-various.html">Linux, Various</a></li>
                    <li><a href="https://egonzalez90.github.io/category/linux-virtualizacion.html">Linux, Virtualizacion</a></li>
                    <li><a href="https://egonzalez90.github.io/category/misc.html">misc</a></li>
                    <li><a href="https://egonzalez90.github.io/category/openstack.html">OpenStack</a></li>
                    <li><a href="https://egonzalez90.github.io/category/reflexiones.html">Reflexiones</a></li>
                    <li><a href="https://egonzalez90.github.io/category/various.html">Various</a></li>
                    <li><a href="https://egonzalez90.github.io/category/virtualizacion.html">Virtualizacion</a></li>
                </ul>
                </nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://egonzalez90.github.io/s3cmd-administracion-bucket-aws.html">s3cmd, administración bucket AWS</a></h1>
<footer class="post-info">
        <span>Mon 29 September 2014</span>
<span>| tags: <a href="https://egonzalez90.github.io/tag/-configure.html">--configure</a><a href="https://egonzalez90.github.io/tag/access-denied.html">access denied</a><a href="https://egonzalez90.github.io/tag/access-key.html">access key</a><a href="https://egonzalez90.github.io/tag/amazon.html">amazon</a><a href="https://egonzalez90.github.io/tag/aws.html">AWS</a><a href="https://egonzalez90.github.io/tag/cloud.html">cloud</a><a href="https://egonzalez90.github.io/tag/configurar.html">configurar</a><a href="https://egonzalez90.github.io/tag/iam.html">IAM</a><a href="https://egonzalez90.github.io/tag/instalar.html">instalar</a><a href="https://egonzalez90.github.io/tag/permisos.html">permisos</a><a href="https://egonzalez90.github.io/tag/policy.html">policy</a><a href="https://egonzalez90.github.io/tag/s3cmd.html">s3cmd</a><a href="https://egonzalez90.github.io/tag/s3tools.html">s3tools</a><a href="https://egonzalez90.github.io/tag/secret-key.html">secret key</a><a href="https://egonzalez90.github.io/tag/services.html">services</a><a href="https://egonzalez90.github.io/tag/usuario.html">usuario</a><a href="https://egonzalez90.github.io/tag/web.html">web</a></span>
</footer><!-- /.post-info --><p>Buenos días, en esta entrada mostrare el proceso para instalar s3cmd con
el que podremos administrar nuestros contenedores de AWS.<!--more--></p>
<p>Para ello primero deberemos localizar el repositorio para la versión de
nuestro RHEL, lo podéis hacer en este enlace:
<a href="http://s3tools.org/repositories">http://s3tools.org/repositories</a></p>
<p>En mi caso uso la versión 6.5 de RHEL, por lo que usare el repositorio
de la versión 6, descargaremos el archivo .repo acorde con nuestra
versión, cambiando el enlace por el proporcionado por la pagina anterior
si fuera otra versión fuera de la 6</p>
<blockquote>
<p>wget http://s3tools.org/repo/RHEL_6/s3tools.repo</p>
</blockquote>
<p>A continuación moveremos el archivo .repo a la localización de los
repositorios en el SO, este paso se puede saltar si el comando wget se
lanza desde el mismo directorio /etc/yum.repos.d/</p>
<blockquote>
<p>mv s3tools.repo /etc/yum.repos.d/</p>
</blockquote>
<p>Ahora actualizaremos la lista de repositorios para que el SO la
reconozca</p>
<blockquote>
<p>sudo yum repolist</p>
</blockquote>
<p>Después instalaremos s3cmd mediante el siguiente comando</p>
<blockquote>
<p>sudo yum install s3cmd</p>
</blockquote>
<p>Para acabar, procederemos a configurar s3cmd para que pueda acceder a
nuestros contenedores en AWS</p>
<blockquote>
<p>s3cmd --configure</p>
<div class="highlight"><pre><span></span><span class="nv">Enter</span> <span class="s s-Atom">new</span> <span class="s s-Atom">values</span> <span class="s s-Atom">or</span> <span class="s s-Atom">accept</span> <span class="s s-Atom">defaults</span> <span class="s s-Atom">in</span> <span class="s s-Atom">brackets</span> <span class="s s-Atom">with</span> <span class="nv">Enter</span><span class="p">.</span>
<span class="nv">Refer</span> <span class="s s-Atom">to</span> <span class="s s-Atom">user</span> <span class="s s-Atom">manual</span> <span class="s s-Atom">for</span> <span class="s s-Atom">detailed</span> <span class="s s-Atom">description</span> <span class="s s-Atom">of</span> <span class="s s-Atom">all</span> <span class="s s-Atom">options</span><span class="p">.</span>

<span class="nv">Access</span> <span class="s s-Atom">key</span> <span class="s s-Atom">and</span> <span class="nv">Secret</span> <span class="s s-Atom">key</span> <span class="s s-Atom">are</span> <span class="s s-Atom">your</span> <span class="s s-Atom">identifiers</span> <span class="s s-Atom">for</span> <span class="nv">Amazon</span> <span class="nv">S3</span>
<span class="nv">Access</span> <span class="nv">Key</span><span class="s s-Atom">:</span> <span class="s s-Atom">xxxxxxxxxxxxxxxxxxxxxx</span>
<span class="nv">Secret</span> <span class="nv">Key</span><span class="s s-Atom">:</span> <span class="s s-Atom">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>

<span class="nv">Encryption</span> <span class="s s-Atom">password</span> <span class="o">is</span> <span class="s s-Atom">used</span> <span class="s s-Atom">to</span> <span class="s s-Atom">protect</span> <span class="s s-Atom">your</span> <span class="s s-Atom">files</span> <span class="s s-Atom">from</span> <span class="s s-Atom">reading</span>
<span class="s s-Atom">by</span> <span class="s s-Atom">unauthorized</span> <span class="s s-Atom">persons</span> <span class="s s-Atom">while</span> <span class="s s-Atom">in</span> <span class="s s-Atom">transfer</span> <span class="s s-Atom">to</span> <span class="nv">S3</span>
<span class="nv">Encryption</span> <span class="nn">password</span><span class="p">:</span> <span class="s s-Atom">xxxxxxxxxx</span>
<span class="nv">Path</span> <span class="s s-Atom">to</span> <span class="nv">GPG</span> <span class="s s-Atom">program</span> <span class="p">[</span><span class="o">/</span><span class="s s-Atom">usr</span><span class="o">/</span><span class="s s-Atom">bin</span><span class="o">/</span><span class="s s-Atom">gpg</span><span class="p">]</span><span class="s s-Atom">:</span>

<span class="nv">When</span> <span class="s s-Atom">using</span> <span class="s s-Atom">secure</span> <span class="nv">HTTPS</span> <span class="s s-Atom">protocol</span> <span class="s s-Atom">all</span> <span class="s s-Atom">communication</span> <span class="s s-Atom">with</span> <span class="nv">Amazon</span> <span class="nv">S3</span>
<span class="s s-Atom">servers</span> <span class="o">is</span> <span class="s s-Atom">protected</span> <span class="s s-Atom">from</span> <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="s s-Atom">party</span> <span class="s s-Atom">eavesdropping</span><span class="p">.</span> <span class="nv">This</span> <span class="s s-Atom">method</span> <span class="o">is</span>
<span class="s s-Atom">slower</span> <span class="s s-Atom">than</span> <span class="s s-Atom">plain</span> <span class="nv">HTTP</span> <span class="s s-Atom">and</span> <span class="s s-Atom">can&#39;t be used if you&#39;re</span> <span class="s s-Atom">behind</span> <span class="s s-Atom">a</span> <span class="s s-Atom">proxy</span>
<span class="nv">Use</span> <span class="nv">HTTPS</span> <span class="s s-Atom">protocol</span> <span class="p">[</span><span class="nv">No</span><span class="p">]</span><span class="s s-Atom">:</span> <span class="nv">Yes</span>

<span class="nv">New</span> <span class="nn">settings</span><span class="p">:</span>
  <span class="nv">Access</span> <span class="nv">Key</span><span class="s s-Atom">:</span> <span class="s s-Atom">xxxxxxxxxxxxxxxxxxxxxx</span>
  <span class="nv">Secret</span> <span class="nv">Key</span><span class="s s-Atom">:</span> <span class="s s-Atom">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>
  <span class="nv">Encryption</span> <span class="nn">password</span><span class="p">:</span> <span class="s s-Atom">xxxxxxxxxx</span>
  <span class="nv">Path</span> <span class="s s-Atom">to</span> <span class="nv">GPG</span> <span class="nn">program</span><span class="p">:</span> <span class="o">/</span><span class="s s-Atom">usr</span><span class="o">/</span><span class="s s-Atom">bin</span><span class="o">/</span><span class="s s-Atom">gpg</span>
  <span class="nv">Use</span> <span class="nv">HTTPS</span> <span class="nn">protocol</span><span class="p">:</span> <span class="nv">True</span>
  <span class="nv">HTTP</span> <span class="nv">Proxy</span> <span class="s s-Atom">server</span> <span class="nn">name</span><span class="p">:</span>
  <span class="nv">HTTP</span> <span class="nv">Proxy</span> <span class="s s-Atom">server</span> <span class="nn">port</span><span class="p">:</span> <span class="mi">0</span>

<span class="nv">Test</span> <span class="s s-Atom">access</span> <span class="s s-Atom">with</span> <span class="s s-Atom">supplied</span> <span class="s s-Atom">credentials?</span> <span class="p">[</span><span class="nv">Y</span><span class="o">/</span><span class="s s-Atom">n</span><span class="p">]</span> <span class="nv">Y</span>
<span class="nv">Please</span> <span class="s s-Atom">wait</span><span class="p">,</span> <span class="s s-Atom">attempting</span> <span class="s s-Atom">to</span> <span class="s s-Atom">list</span> <span class="s s-Atom">all</span> <span class="s s-Atom">buckets</span><span class="p">...</span>
<span class="nv">Success</span><span class="p">.</span> <span class="nv">Your</span> <span class="s s-Atom">access</span> <span class="s s-Atom">key</span> <span class="s s-Atom">and</span> <span class="s s-Atom">secret</span> <span class="s s-Atom">key</span> <span class="s s-Atom">worked</span> <span class="nf">fine</span> <span class="o">:-</span><span class="p">)</span>

<span class="nv">Now</span> <span class="s s-Atom">verifying</span> <span class="s s-Atom">that</span> <span class="s s-Atom">encryption</span> <span class="s s-Atom">works</span><span class="p">...</span>
<span class="nv">Success</span><span class="p">.</span> <span class="nv">Encryption</span> <span class="s s-Atom">and</span> <span class="s s-Atom">decryption</span> <span class="s s-Atom">worked</span> <span class="nf">fine</span> <span class="o">:-</span><span class="p">)</span>

<span class="nv">Save</span> <span class="s s-Atom">settings?</span> <span class="p">[</span><span class="s s-Atom">y</span><span class="o">/</span><span class="nv">N</span><span class="p">]</span> <span class="s s-Atom">y</span>
<span class="nv">Configuration</span> <span class="s s-Atom">saved</span> <span class="s s-Atom">to</span> <span class="s s-Atom">&#39;/root/.s3cfg&#39;</span>
</pre></div>


</blockquote>
<p>Access Key la puedes encontrar en: Security Credentials/ Users/ Access
Credentials</p>
<p><a href="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/access.png"><img alt="access" src="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/access.png"></a></p>
<p>Secret Key solo se puede descargar una única vez, al crear las claves de
acceso, si fuera necesario, deberías de crear unas nuevas para poder
obtener Secret Key para esa clave.</p>
<p>Seguramente que te de un error si lanzas el comando ahora, para que no
te de el error Access Denied, tienes que agregar una política de usuario
con permisos</p>
<p><a href="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/userpolicy.png"><img alt="userpolicy" src="http://vps38574.vps.ovh.ca/wp-content/uploads/2014/09/userpolicy.png"></a></p>
<p>Por ultimo probaremos que tenemos acceso a los bucket</p>
<blockquote>
<p>s3cmd ls</p>
</blockquote>
<p>Esto nos debería de mostrar los contenedores a los que tenemos permisos
dentro de AWS</p>
<p>Ahora solo te queda investigar las diferentes posibilidades que te da
s3cmd</p>
<p>Un saludo</p><p><a href="https://egonzalez90.github.io/s3cmd-administracion-bucket-aws.html#disqus_thread">comments</a></p>                </article>
<p class="paginator">
    Page 1 / 1
</p>
            </aside><!-- /#featured -->
            </ol><!-- /#posts-list -->
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://egonzalez90.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/egongu90">Twitter</a></li>
                            <li><a href="https://www.linkedin.com/in/eduardogonzalezgutierrez">Linkedin</a></li>
                            <li><a href="https://github.com/egonzalez90">Github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme <a href="https://github.com/blueicefield/pelican-blueidea/">blueidea</a>, inspired by the default theme.</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'egonzalez-1';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>