<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenStack Stuff | articles tagged "VM"</title>
    <link rel="shortcut icon" type="image/png" href="https://egonzalez90.github.io/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://egonzalez90.github.io/favicon.ico">
    <link href="https://egonzalez90.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="OpenStack Stuff Full Atom Feed" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/print.css" type="text/css" media="print" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="Eduardo Gonzalez" />
</head>
<body>
    <header>
        <nav>
            <ul>
                <li class="ephemeral selected"><a href="https://egonzalez90.github.io/tag/vm.html">VM</a></li>
                <li><a href="https://egonzalez90.github.io/">Home</a></li>
                <li><a href="https://docs.openstack.org">OpenStack</a></li>
                <li><a href="https://www.linkedin.com/in/eduardogonzalezgutierrez">Linkedin</a></li>
                <li><a href="https://github.com/egonzalez90">Github</a></li>
                <li><a href="https://egonzalez90.github.io/archives">Archives</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="https://egonzalez90.github.io/">OpenStack Stuff</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Dec 02, 2014</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/eliminar-vm-ldom-en-sparc.html" rel="bookmark" title="Permanent Link to &quot;Eliminar VM (LDOM) en SPARC&quot;">Eliminar VM (LDOM) en SPARC</a>
                </h2>

                
                

                <p>Primero comprobaremos que maquinas tenemos y el estado de ellas</p>
<blockquote>
<p>ldm list</p>
</blockquote>
<p>A continuación, si la maquina que queremos borrar esta encendida la
apagaremos</p>
<blockquote>
<p>ldm stop LDOM</p>
</blockquote>
<p>Lo siguiente será quitar la consola de la maquina</p>
<blockquote>
<p>ldm unbind LDOM</p>
</blockquote>
<p>Listaremos la configuración de la maquina y buscaremos los discos que
tenga asignados, normalmente está al final del archivo</p>
<blockquote>
<p>ldm list-bindings LDOM</p>
</blockquote>
<p>Quitaremos el controlador del disco de la maquina</p>
<blockquote>
<p>ldm remove-vdiskserverdevice VOLUMEN@LDOM</p>
</blockquote>
<p>Eliminaremos el disco de la configuración de la maquina</p>
<blockquote>
<p>ldm remove-vdisk DISKNAME LDOM</p>
</blockquote>
<p>Eliminamos las NIC</p>
<blockquote>
<p>ldm remove-vnet NIC_NAME LDOM</p>
</blockquote>
<p>Borramos VDS</p>
<blockquote>
<p>ldm remove-vds LDOM</p>
</blockquote>
<p>Eliminamos configuración de la maquina</p>
<blockquote>
<p>ldm remove-domain LDOM</p>
</blockquote>
<p>Borramos los datos de la maquina, esto se hace eliminando la carpeta
donde están las maquinas guardadas</p>
<blockquote>
<p>rm -R /ruta/carpeta/LDOM/</p>
</blockquote>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/eliminar-vm-ldom-en-sparc.html">posted at 14:51</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/virtualizacion.html" rel="tag">Virtualizacion</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/eliminar.html" class="tags">eliminar</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/ldm-list.html" class="tags">ldm list</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/ldm-remove.html" class="tags">ldm remove</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/ldom.html" class="tags">ldom</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/list-bindings.html" class="tags">list-bindings</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/oracle.html" class="tags">oracle</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/quitar.html" class="tags">quitar</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/remove.html" class="tags">remove</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/solaris.html" class="tags">solaris</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/sparc.html" class="tags">sparc</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/vm.html" class="tags selected">VM</a>
                </div>
		<a href="https://egonzalez90.github.io/eliminar-vm-ldom-en-sparc.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Sep 03, 2014</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/alineamiento-mbr-maquinas-virtuales.html" rel="bookmark" title="Permanent Link to &quot;Alineamiento MBR maquinas virtuales&quot;">Alineamiento MBR maquinas virtuales</a>
                </h2>

                
                

                <p>Antes de la llegada de el sistema de ficheros EXT4, cuando creabas
maquinas virtuales, estas estaban desalineadas el mbr del vmfs y de el
almacenamiento,  lo que generaba menor rendimiento.<!--more--></p>
<p>Para ello dedico esta entrada, con la que mostrare como alinear el mbr.</p>
<p>Lo primero que necesitaremos es el paquete con las tools mbrscan y
mbralign, este paquete le copiaremos a el directorio /opt/ontap/ de un
host ESXi que tenga acceso al almacenamiento donde tenemos la maquina
guardada.</p>
<p>Una vez copiado el paquete a dicho directorio pasaremos a escanear y a
realinear el mbr de la maquina, para ello necesitamos que este apagada.</p>
<p>Una vez apagada iremos al directorio /opt/ontap/ y ejecutaremos el
siguiente comando con el que analizaremos el disco de la maquina para
ver si necesita ser alineado.</p>
<blockquote>
<p>./mbrscan
/vmfs/volumes/ALMACENAMIENTO/maquinavirtual/maquinavirtual-flat.vmdk</p>
</blockquote>
<p>Esto nos mostrara un mensaje en el que pondra:</p>
<blockquote>
<p>Aligned yes o Aligned no</p>
</blockquote>
<p>En el caso de que pusiera align no, deberemos realinear el mbr de la
maquina, lo haremos mediante este comando:</p>
<blockquote>
<p>./mbralign
/vmfs/volumes/ALMACENAMIENTO/maquinavirtual/maquinavirtual-flat.vmdk</p>
</blockquote>
<p>Esto nos creara un archivo .bak del disco que vamos a alinear por si
fallara este proceso poder recuperarlo, este proceso tardara
bastante(dependiendo del tamaño del disco)</p>
<p>Una vez acabado ese proceso de alineamiento, volveremos a utilizar el
comando mbrscan para comprobar que este bien hecho.</p>
<p>Por ultimo, el alineado del mbr se carga totalmente el GRUB de la
maquina, por lo que deberemos recuperarlo.</p>
<p>En esta entrada tienes como hacerlo: <a href="http://egonzalez.org/recuperar-grub-rhel-y-centos/%20" title="Recuperar GRUB RHEL y CentOS"><span id="sample-permalink"
style="color: #666666;" tabindex="-1">http://egonzalez.org/<span
id="editable-post-name"
title="Enlace permanente temporal. Haz clic para editar esta parte.">recuperar-grub-rhel-y-centos</span>/</span><span
style="color: #666666;"> </span></a></p>
<p>Una vez recuperado el GRUB y comprobado que la maquina funciona
correctamente, borraremos el archivo .bak que se había creado.</p>
<p>Espero poder ayudar, un saludo</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/alineamiento-mbr-maquinas-virtuales.html">posted at 15:21</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/linux-virtualizacion.html" rel="tag">Linux, Virtualizacion</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/alinear.html" class="tags">alinear</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/esxi.html" class="tags">esxi</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/ext3.html" class="tags">ext3</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/ext4.html" class="tags">ext4</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/grub.html" class="tags">grub</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/maquina-virtual.html" class="tags">maquina virtual</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/mbr.html" class="tags">mbr</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/mbralign.html" class="tags">mbralign</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/mbrscan.html" class="tags">mbrscan</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/netapp.html" class="tags">netapp</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/redhat.html" class="tags">redhat</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/rhel.html" class="tags">rhel</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/vm.html" class="tags selected">VM</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/vmfs.html" class="tags">vmfs</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/vmware.html" class="tags">vmware</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/volumes.html" class="tags">volumes</a>
                </div>
		<a href="https://egonzalez90.github.io/alineamiento-mbr-maquinas-virtuales.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Nov 13, 2013</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/solucion-fallo-virtualbox-en-fedora-19.html" rel="bookmark" title="Permanent Link to &quot;Solución fallo VirtualBox en Fedora 19&quot;">Solución fallo VirtualBox en Fedora 19</a>
                </h2>

                
                

                <p>Mucha gente ha tenido problemas a la hora de abrir una maquina virtual
en VirtualBox con Fedora 19, suele salir un error de compilación de VBox
que por mucho que lo recompiles no se soluciona si no sigues los pasos
previos que voy a explicar.<br>
<!--more--><br>
En primer lugar deberías de desinstalar VirtualBox completamente, doy
por hecho de que si lo has instalado también sabrás desinstalarlo.<br>
A continuación deberías de actualizar los paquetes del sistema, esto no
es necesario, pero siempre recomendable por motivos de seguridad.Se hace
mediante este comando:</p>
<div class="highlight"><pre><span></span># yum -y upate
</pre></div>


<p><address>
 </p>
<p></address>
Después instalamos datos del kernel</p>
<div class="highlight"><pre><span></span># yum -y install kernel-headers kernel-devel dkms gcc
</pre></div>


<p><address>
 </p>
<p></address>
Ahora vamos a la carpeta de repositorios de fedora</p>
<div class="highlight"><pre><span></span># cd /etc/yum.repos.d
</pre></div>


<p><address>
 </p>
<p></address>
Ahora creamos/modificamos este archivo</p>
<div class="highlight"><pre><span></span># vi virtualbox.repo
</pre></div>


<p><address>
 </p>
<p></address>
Se rellena con la siguiente información:</p>
<div class="highlight"><pre><span></span>               [virtualbox]
name=Fedora$releasever - $basearch - VirtualBox
baseurl=http://download.virtualbox.org/virtualbox/rpm/fedora/$releasever/$basearch
enabled=1
gpgcheck=1
gpgkey=http://download.virtualbox.org/virtualbox/debian/oracle_vbox.asc
</pre></div>


<p>Guardamos y salimos de este archivo</p>
<p>Ahora instalamos VirtualBox</p>
<div class="highlight"><pre><span></span># yum -y install VirtualBox-4.2
</pre></div>


<p><address>
 </p>
<p></address>
Ahora ejecutamos este comando para configurar VirtualBox</p>
<div class="highlight"><pre><span></span># /etc/init.d/vboxdrv setup
</pre></div>


<p><address>
 </p>
<p></address>
Ahora añadimos nuestro usuario al grupo que tiene permisos para usar
VirtualBox</p>
<div class="highlight"><pre><span></span># usermod -G vboxusers -a &quot;NombredeUsuario&quot;
</pre></div>


<p>Esto debería permitirnos crear maquinas virtuales y abrirlas ya</p>
<p><address>
 </p>
<p></address></p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/solucion-fallo-virtualbox-en-fedora-19.html">posted at 18:00</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/linux.html" rel="tag">Linux</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/error.html" class="tags">error</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/fedora-19.html" class="tags">fedora 19</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/linux.html" class="tags">linux</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/maquina-virtual.html" class="tags">maquina virtual</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/solucion.html" class="tags">solucion</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/virtualbox.html" class="tags">Virtualbox</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/virtualizacion.html" class="tags">virtualizacion</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/vm.html" class="tags selected">VM</a>
                </div>
		<a href="https://egonzalez90.github.io/solucion-fallo-virtualbox-en-fedora-19.html#disqus_thread">Click to read and post comments</a>
            </article>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="https://egonzalez90.github.io/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>