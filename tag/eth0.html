<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenStack Stuff | articles tagged "eth0"</title>
    <link rel="shortcut icon" type="image/png" href="https://egonzalez90.github.io/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://egonzalez90.github.io/favicon.ico">
    <link href="https://egonzalez90.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="OpenStack Stuff Full Atom Feed" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://egonzalez90.github.io/theme/css/print.css" type="text/css" media="print" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="Eduardo Gonzalez" />
</head>
<body>
    <header>
        <nav>
            <ul>
                <li class="ephemeral selected"><a href="https://egonzalez90.github.io/tag/eth0.html">eth0</a></li>
                <li><a href="https://egonzalez90.github.io/">Home</a></li>
                <li><a href="https://docs.openstack.org">OpenStack</a></li>
                <li><a href="https://www.linkedin.com/in/eduardogonzalezgutierrez">Linkedin</a></li>
                <li><a href="https://github.com/egonzalez90">Github</a></li>
                <li><a href="https://egonzalez90.github.io/archives">Archives</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="https://egonzalez90.github.io/">OpenStack Stuff</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Oct 19, 2014</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/configuracion-de-red-basica-openstack.html" rel="bookmark" title="Permanent Link to &quot;Configuracion de red basica Openstack&quot;">Configuracion de red basica Openstack</a>
                </h2>

                
                

                <p>En la siguiente entrada tienes como configurar las tarjetas de red para
realizar esta instalación de Openstack: <a href="http://egonzalez.org/configuracion-basica-red-rhel-y-centos/" title="Configuracion basica red RHEL y centOS">Configuración básica de red
RHEL</a></p>
<p>Aquí mostrare el esquema conceptual de como ira configurada cada tarjeta
de los distintos nodos.<!--more--></p>
<h1>CONTROLLER</h1>
<blockquote>
<p>hostname controller</p>
</blockquote>
<h3>eth0:</h3>
<ul>
<li>IP 192.168.1.11</li>
<li>GATEWAY 192.168.1.1</li>
</ul>
<h1>NETWORK</h1>
<blockquote>
<p>hostname network</p>
</blockquote>
<h3>eth0</h3>
<ul>
<li>IP 192.168.1.21</li>
<li>GATEWAY 192.168.1.1</li>
</ul>
<h3>eth1</h3>
<ul>
<li>IP 10.0.1.21</li>
</ul>
<h3>External network (eth2)</h3>
<ul>
<li>En el archivo de configuración dejaremos BOOTPROTO=none, sin
    configurar IP ni Netmask</li>
</ul>
<h1>COMPUTE</h1>
<blockquote>
<p>hostname compute1</p>
</blockquote>
<h3>eth0</h3>
<ul>
<li>IP 192.168.1.31</li>
<li>GATEWAY 192.168.1.1</li>
</ul>
<h3>eth1</h3>
<ul>
<li>IP 10.0.1.31</li>
</ul>
<p>*Los siguientes nodos de cómputo se pueden utilizar las siguientes IP</p>
<p>En todos los nodos, se ha de configurar el archivo host de la siguiente
manera</p>
<blockquote>
<p>vi /etc/hosts</p>
<p>192.168.1.11      controller</p>
<p>192.168.1.21      network</p>
<p>192.168.1.31      compute1</p>
</blockquote>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/configuracion-de-red-basica-openstack.html">posted at 16:46</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/openstack.html" rel="tag">OpenStack</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/3-nodos.html" class="tags">3 nodos</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/basica.html" class="tags">basica</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/centos.html" class="tags">centos</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/compute.html" class="tags">compute</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/controller.html" class="tags">controller</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/eth0.html" class="tags selected">eth0</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/network.html" class="tags">network</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/openstack.html" class="tags">openstack</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/red.html" class="tags">red</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/redhat.html" class="tags">redhat</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/rhel.html" class="tags">rhel</a>
                </div>
		<a href="https://egonzalez90.github.io/configuracion-de-red-basica-openstack.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Aug 30, 2014</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/configuracion-basica-red-rhel-y-centos.html" rel="bookmark" title="Permanent Link to &quot;Configuracion basica red RHEL y centOS&quot;">Configuracion basica red RHEL y centOS</a>
                </h2>

                
                

                <p>En esta entrada aprenderás la configuración de red básica de un servidor
Red Hat Enterprise Linux o un CentOS, ambos versiones 6<!--more--></p>
<p>Primero editaremos este archivo de configuración</p>
<blockquote>
<p>vi /etc/sysconfig/network</p>
</blockquote>
<p>Este archivo lo rellenaremos de la siguiente forma</p>
<blockquote>
<p>NETWORKING=yes</p>
<p>HOSTNAME=nombreservidor #nombredns</p>
<p>GATEWAY=192.168.1.1 #IP puerta de enlace</p>
</blockquote>
<p>Una vez acabemos guardaremos y editaremos el archivo de configuración de
las interfaces de red, cambiando el nombre según la interfaz que sea</p>
<blockquote>
<p>vi /etc/sysconfig/network-scripts/ifcfg-eth0</p>
</blockquote>
<p>Este es un ejemplo de configuración de una IP estática (si tu RHEL es
anterior a la versión 6 deberas incluir la linea GATEWAY en este
archivo, en vez de en /etc/sysconfig/network)</p>
<blockquote>
<p>DEVICE=eth0</p>
<p>BOOTPROTO=none #IP estatica</p>
<p>ONBOOT=yes</p>
<p>IPADDR=192.168.1.40 #IP</p>
<p>NETMASK=255.255.255.0 #Mascara de red</p>
</blockquote>
<p>Este es un ejemplo de configuración de red por dhcp</p>
<blockquote>
<p>DEVICE=eth0</p>
<p>BOOTPROTO=dhcp</p>
<p>ONBOOT=yes</p>
</blockquote>
<p>A continuación configuraremos el archivo del DNS</p>
<blockquote>
<p>vi /etc/resolv.conf</p>
</blockquote>
<p>Aqui rellenaremos nameserver y la IP o hostname de nuestros servidores
DNS</p>
<blockquote>
<p>nameserver 8.8.8.8 #IP o hostname servidor DNS</p>
<p>nameserver 4.4.4.4 #IP o hostname servidor DNS2</p>
</blockquote>
<p>Ahora estableceremos el hostname a el servidor</p>
<blockquote>
<p>hostname nombreservidor</p>
</blockquote>
<p>Por ultimo reiniciaremos el servicio de red para que coja los cambios</p>
<blockquote>
<p>service network restart</p>
</blockquote>
<p>Esta seria una configuración básica de red en un servidor Red Hat
Enterprise Linux o CentOS</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/configuracion-basica-red-rhel-y-centos.html">posted at 15:49</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/linux.html" rel="tag">Linux</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/basica.html" class="tags">basica</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/centos.html" class="tags">centos</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/configuracion.html" class="tags">configuracion</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/eth0.html" class="tags selected">eth0</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/interfaces.html" class="tags">interfaces</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/internet.html" class="tags">internet</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/linux.html" class="tags">linux</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/network.html" class="tags">network</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/network-scripts.html" class="tags">network-scripts</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/red.html" class="tags">red</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/red-hat.html" class="tags">red hat</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/rhel.html" class="tags">rhel</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/sysconfig.html" class="tags">sysconfig</a>
                </div>
		<a href="https://egonzalez90.github.io/configuracion-basica-red-rhel-y-centos.html#disqus_thread">Click to read and post comments</a>
            </article>            <h4 class="date">Aug 07, 2014</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://egonzalez90.github.io/error-configuracion-red-en-rhel-6-y-vmware-esxi-5-5.html" rel="bookmark" title="Permanent Link to &quot;Error configuración red en RHEL 6 y VMware ESXi 5.5&quot;">Error configuración red en RHEL 6 y VMware ESXi 5.5</a>
                </h2>

                
                

                <p>Ultimamente, desde que hemos empezado a trabajar mas con RHEL 6, nos
dimos cuenta que tras el clonado de las VM, las interfaces de red no se
configuraban bien.</p>
<p>Primero vimos que las MAC de la eth, no se asignaban correctamente, y
despues comprobamos que una vez configuradas al hacer reboot o reinicio
de la red, estas se configuraban como les daba la gana y perdias la
configuracion e internet.</p>
<p>Pues bien, tras un proceso de investigacion llege a la solucion( o al
menos en nuestro sistema), los pasos son los siguientes:</p>
<p>-Quitar las NIC de la antigua configuracion</p>
<p>-Añadir las NIC en vmxnet3 en el vCenter igual que estaban configuradas
anteriormente</p>
<p>-Borrar el archivo /etc/udev/rules.d/70-persistent-net.rules</p>
<p>-Configurar los archivos /etc/sysconfig/network-scripts/ifcfg-eth*
añadiendo la linea entre su configuracion</p>
<p><strong>NM_CONTROLLED=no</strong></p>
<p>-Parar el servicio NetworkManager y deshabilitarlo del arranque</p>
<p><strong>service NetworkManager stop</strong></p>
<p><strong>chkconfig NetworkManager off</strong></p>
<p>-Habilitar el servicio network en arranque(puede que ya lo esté)</p>
<p><strong>chkconfig network on</strong></p>
<p>-Instalar las vmtools</p>
<p>-Reiniciar la maquina y comprobar que no cambia la configuración entre
el inicio del sistema y tras service network restart</p>
<p>Bien, el problema que había, es que por algún error, el network manager
se hacia con el control de la red y daba errores con el demonio network,
lo que hacemos para solucionarlo es, borrar el archivo de la
configuración de las tarjetas,configurar las eth deshabilitando el
control por el Network manager y después deshabilitar Network Manager
del sistema.</p>
<p>De este modo nos funciona sin ningun problema la red.</p>
<p>Espero haber ayudado, un saludo</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://egonzalez90.github.io/error-configuracion-red-en-rhel-6-y-vmware-esxi-5-5.html">posted at 16:49</a>
                    &nbsp;&middot;&nbsp;<a href="https://egonzalez90.github.io/category/linux-virtualizacion.html" rel="tag">Linux, Virtualizacion</a>
                    &nbsp;&middot;
                    &nbsp;<a href="https://egonzalez90.github.io/tag/55.html" class="tags">5.5</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/70-persistent-netrules.html" class="tags">70-persistent-net.rules</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/clon.html" class="tags">clon</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/clondado.html" class="tags">clondado</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/daemon.html" class="tags">daemon</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/esxi.html" class="tags">esxi</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/eth0.html" class="tags selected">eth0</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/ifcfg-eth.html" class="tags">ifcfg-eth</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/linux.html" class="tags">linux</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/network.html" class="tags">network</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/network-manager.html" class="tags">network manager</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/nic.html" class="tags">nic</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/nm_controlled.html" class="tags">nm_controlled</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/red-hat.html" class="tags">red hat</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/rhel6.html" class="tags">rhel6</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/sysadmin.html" class="tags">sysadmin</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/virtualizacion.html" class="tags">virtualizacion</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/vmware.html" class="tags">vmware</a>
                    &nbsp;<a href="https://egonzalez90.github.io/tag/vmxnet3.html" class="tags">vmxnet3</a>
                </div>
		<a href="https://egonzalez90.github.io/error-configuracion-red-en-rhel-6-y-vmware-esxi-5-5.html#disqus_thread">Click to read and post comments</a>
            </article>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="https://egonzalez90.github.io/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>