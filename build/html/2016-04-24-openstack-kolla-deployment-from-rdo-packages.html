
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>OpenStack kolla deployment from RDO packages &#8212; egonzalez  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Magnum in RDO OpenStack Liberty manual installation from source code" href="2016-03-24-magnum-in-rdo-openstack-liberty-manual-installation-from-source-code.html" />
    <link rel="prev" title="OpenDaylight in a Docker container" href="2016-06-06-opendaylight-in-a-docker-container.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="openstack-kolla-deployment-from-rdo-packages">
<h1>OpenStack kolla deployment from RDO packages<a class="headerlink" href="#openstack-kolla-deployment-from-rdo-packages" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line">OpenStack, Ansible, Docker, production ready, HA, etc. Nothing can be
so interesting as Kolla.</div>
<div class="line">Kolla includes all you need to create, maintain and operate an
OpenStack environment.</div>
<div class="line">All the services will be installed along the nodes you specify inside
docker containers with high availability and load balancing between
services by default, you don’t need to care about an external tool for
these purposes.</div>
<div class="line">In future posts, i will talk in more detail about Kolla and how works,
also more tips or deployment types. For now, go to the official
documentation.</div>
<div class="line">At this demo, i will use:</div>
</div>
<ul class="simple">
<li>x1 Deployment node: Laptop with 12GB of RAM and a single CPU</li>
<li>x3 Target nodes: VMs with 24GB of RAM and 2 vCPU each one.</li>
<li>All nodes connected to a shared connection with 300Mbs</li>
</ul>
<div class="section" id="all-nodes">
<h2>ALL NODES<a class="headerlink" href="#all-nodes" title="Permalink to this headline">¶</a></h2>
<p>Before deploy OpenStack with Kolla, we need to ensure all the nodes got
time synchronized.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">ntp</span>
<span class="n">systemctl</span> <span class="n">enable</span> <span class="n">ntpd</span><span class="o">.</span><span class="n">service</span>
<span class="n">systemctl</span> <span class="n">start</span> <span class="n">ntpd</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
<p>Next, stop and disable libvirt service to avoid conflicts with libvirt
containers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">stop</span> <span class="n">libvirtd</span>
<span class="n">systemctl</span> <span class="n">disable</span> <span class="n">libvirtd</span>
</pre></div>
</div>
<p>Install docker</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">sSL</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">get</span><span class="o">.</span><span class="n">docker</span><span class="o">.</span><span class="n">io</span> <span class="o">|</span> <span class="n">bash</span>
</pre></div>
</div>
<p>Add the user you are using to docker group so this user can issue docker
commands without sudo. Logoff and login to apply changes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">usermod</span> <span class="o">-</span><span class="n">aG</span> <span class="n">docker</span> <span class="n">root</span>
</pre></div>
</div>
<p>Create a file called kolla.conf with the following content.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">docker</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">kolla</span><span class="o">.</span><span class="n">conf</span>
<span class="p">[</span><span class="n">Service</span><span class="p">]</span>
<span class="n">MountFlags</span><span class="o">=</span><span class="n">shared</span>
</pre></div>
</div>
<p>Restart and enable docker service</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">restart</span> <span class="n">docker</span>
<span class="n">systemctl</span> <span class="n">enable</span> <span class="n">docker</span>
</pre></div>
</div>
<p>Install some packages who are needed by next steps.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">python</span><span class="o">-</span><span class="n">devel</span> <span class="n">libffi</span><span class="o">-</span><span class="n">devel</span> <span class="n">openssl</span><span class="o">-</span><span class="n">devel</span> <span class="n">gcc</span> <span class="n">git</span> <span class="n">python</span><span class="o">-</span><span class="n">pip</span> <span class="n">python</span><span class="o">-</span><span class="n">openstackclient</span>
</pre></div>
</div>
<div class="section" id="deploy-node">
<h3>DEPLOY NODE<a class="headerlink" href="#deploy-node" title="Permalink to this headline">¶</a></h3>
<p>Install EPEL repository</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">epel</span><span class="o">-</span><span class="n">release</span>
</pre></div>
</div>
<p>Install ansible</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">ansible</span>
</pre></div>
</div>
<p>Clone Kolla mitaka/stable code.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">git</span><span class="o">.</span><span class="n">openstack</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">openstack</span><span class="o">/</span><span class="n">kolla</span> <span class="o">-</span><span class="n">b</span> <span class="n">stable</span><span class="o">/</span><span class="n">mitaka</span>
</pre></div>
</div>
<p>Install kolla and dependencies.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">kolla</span><span class="o">/</span>
</pre></div>
</div>
<p>Copy kolla configuration files to /etc/</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">kolla</span>
<span class="n">cp</span> <span class="o">-</span><span class="n">r</span> <span class="n">etc</span><span class="o">/</span><span class="n">kolla</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span>
</pre></div>
</div>
<p>Create kolla build config file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">tox</span>
<span class="n">tox</span> <span class="o">-</span><span class="n">e</span> <span class="n">genconfig</span>
</pre></div>
</div>
<p>Edit kolla-build file with the following content</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kolla</span><span class="o">/</span><span class="n">kolla</span><span class="o">-</span><span class="n">build</span><span class="o">.</span><span class="n">conf</span>

<span class="n">base</span> <span class="o">=</span> <span class="n">centos</span>
<span class="n">base_tag</span> <span class="o">=</span> <span class="n">mitaka</span>
<span class="n">push</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">install_type</span> <span class="o">=</span> <span class="n">rdo</span>
<span class="n">registry</span> <span class="o">=</span> <span class="n">docker</span><span class="o">.</span><span class="n">io</span>
</pre></div>
</div>
<p>Login with your DockerHub account, sometimes, login doesn’t works as
expected. Review auth url at authentication file in ~/.docker/
directory. After Austin Summit i will post exact changes i made in the
URL.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">login</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Create and push the images to your DockerHub account.</div>
<div class="line">If images are not automatically pushed to the remote repository, push
them manually once image creation finished.</div>
<div class="line">Building images can last various hours, in my experience sometimes
were built in 3 hours and another times in 9 hours. And much more if
you are going to push them to your DockerHub instead of a private
registry.</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kolla</span><span class="o">-</span><span class="n">build</span> <span class="o">-</span><span class="n">n</span> <span class="n">egonzalez90</span> <span class="o">--</span><span class="n">push</span>
</pre></div>
</div>
<p>Review all docker images kolla has created.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[egonzalez@localhost kolla]$ docker images | grep mitaka
egonzalez90/centos-binary-cinder-api                  mitaka              ba2cca4b09fa        16 hours ago        814.5 MB
egonzalez90/centos-binary-cinder-volume               mitaka              1d31a049f327        16 hours ago        802.4 MB
egonzalez90/centos-binary-cinder-rpcbind              mitaka              5f7bc909f41b        16 hours ago        804.2 MB
egonzalez90/centos-binary-mesos-slave                 mitaka              57a0e00d1901        16 hours ago        651.6 MB
egonzalez90/centos-binary-swift-rsyncd                mitaka              36f5b9c9d4c5        16 hours ago        565.3 MB
egonzalez90/centos-binary-cinder-backup               mitaka              a7a8161398fe        16 hours ago        775.3 MB
egonzalez90/centos-binary-cinder-scheduler            mitaka              a5c5b79a25f6        16 hours ago        775.3 MB
egonzalez90/centos-binary-marathon                    mitaka              704ce8261a7f        16 hours ago        770.4 MB
egonzalez90/centos-binary-chronos                     mitaka              974525562cea        16 hours ago        732.8 MB
egonzalez90/centos-binary-swift-object                mitaka              e09b529bad32        16 hours ago        582.9 MB
egonzalez90/centos-binary-swift-account               mitaka              573b8e5bd3c7        16 hours ago        582.9 MB
egonzalez90/centos-binary-swift-container             mitaka              c63d9a5be014        16 hours ago        583.2 MB
egonzalez90/centos-binary-mesos-master                mitaka              2610881df9c0        16 hours ago        536.8 MB
egonzalez90/centos-binary-swift-proxy-server          mitaka              3632ee65ace9        16 hours ago        584.7 MB
egonzalez90/centos-binary-ceilometer-api              mitaka              808cd12e9287        16 hours ago        598.6 MB
egonzalez90/centos-binary-ceilometer-compute          mitaka              59e7a5e3bd79        16 hours ago        612.6 MB
egonzalez90/centos-binary-ceilometer-central          mitaka              de094dabf9fd        16 hours ago        612.6 MB
egonzalez90/centos-binary-magnum-api                  mitaka              6ce41a1856f8        16 hours ago        690 MB
egonzalez90/centos-binary-glance-api                  mitaka              2a1c8702341a        16 hours ago        688.5 MB
egonzalez90/centos-binary-ceilometer-notification     mitaka              7ccb484383ae        16 hours ago        594 MB
egonzalez90/centos-binary-ceilometer-collector        mitaka              c2e043f6e2b1        16 hours ago        595.4 MB
egonzalez90/centos-binary-magnum-conductor            mitaka              19674f37dc9b        16 hours ago        790.8 MB
egonzalez90/centos-binary-aodh-api                    mitaka              c35c48dee3c4        16 hours ago        593.2 MB
egonzalez90/centos-binary-glance-registry             mitaka              a72949aaaf45        16 hours ago        688.5 MB
egonzalez90/centos-binary-aodh-expirer                mitaka              ffa9bc296a02        16 hours ago        593.2 MB
egonzalez90/centos-binary-aodh-evaluator              mitaka              c214eac9bbd9        16 hours ago        593.2 MB
egonzalez90/centos-binary-neutron-metadata-agent      mitaka              0cea7ba50b8e        16 hours ago        817.9 MB
egonzalez90/centos-binary-aodh-listener               mitaka              c5d255b20d4e        16 hours ago        593.2 MB
egonzalez90/centos-binary-aodh-notifier               mitaka              dbd4c8d5515d        16 hours ago        593.2 MB
egonzalez90/centos-binary-neutron-server              mitaka              688d6800684b        16 hours ago        817.9 MB
egonzalez90/centos-binary-gnocchi-api                 mitaka              5f8daeb7a511        17 hours ago        840.8 MB
egonzalez90/centos-binary-neutron-openvswitch-agent   mitaka              3c2f03d388fa        17 hours ago        843.4 MB
egonzalez90/centos-binary-nova-compute                mitaka              aef19eb18b41        17 hours ago        1.076 GB
egonzalez90/centos-binary-neutron-linuxbridge-agent   mitaka              672550e296af        17 hours ago        843.1 MB
egonzalez90/centos-binary-nova-libvirt                mitaka              46cd6d68a29d        17 hours ago        1.127 GB
egonzalez90/centos-binary-gnocchi-statsd              mitaka              8369b97d0fb7        17 hours ago        840.7 MB
egonzalez90/centos-binary-neutron-dhcp-agent          mitaka              b6a6de5c4d3f        17 hours ago        817.9 MB
egonzalez90/centos-binary-neutron-l3-agent            mitaka              6d4956cd63e6        17 hours ago        817.9 MB
egonzalez90/centos-binary-nova-spicehtml5proxy        mitaka              6db500ef18b0        17 hours ago        629.5 MB
egonzalez90/centos-binary-nova-compute-ironic         mitaka              89f4f8ba32b9        17 hours ago        1.04 GB
egonzalez90/centos-binary-nova-conductor              mitaka              71e00696b65a        17 hours ago        629.4 MB
egonzalez90/centos-binary-nova-novncproxy             mitaka              4153ed5cdfa5        17 hours ago        630 MB
egonzalez90/centos-binary-nova-api                    mitaka              7bf702527a50        17 hours ago        629.4 MB
egonzalez90/centos-binary-nova-ssh                    mitaka              0c71e10ba8bb        17 hours ago        630.4 MB
egonzalez90/centos-binary-nova-network                mitaka              ff2ed3dc65ab        17 hours ago        630.4 MB
egonzalez90/centos-binary-heat-api                    mitaka              3f3bac2b91b4        17 hours ago        592.2 MB
egonzalez90/centos-binary-nova-consoleauth            mitaka              f7f558ed3061        17 hours ago        629.5 MB
egonzalez90/centos-binary-nova-scheduler              mitaka              f9b8750d4812        17 hours ago        629.4 MB
egonzalez90/centos-binary-heat-engine                 mitaka              69b416b2481c        17 hours ago        592.2 MB
egonzalez90/centos-binary-heat-api-cfn                mitaka              220acaf5f692        18 hours ago        592.2 MB
egonzalez90/centos-binary-manila-api                  mitaka              3e21270b4e91        18 hours ago        588.4 MB
egonzalez90/centos-binary-trove-api                   mitaka              68868b718307        18 hours ago        585.8 MB
egonzalez90/centos-binary-manila-share                mitaka              45e069ec5233        18 hours ago        637.8 MB
egonzalez90/centos-binary-trove-guestagent            mitaka              484a9b5b5631        18 hours ago        586.1 MB
egonzalez90/centos-binary-trove-conductor             mitaka              2817941fed43        18 hours ago        585.8 MB
egonzalez90/centos-binary-trove-taskmanager           mitaka              16fc85e299a1        18 hours ago        585.8 MB
egonzalez90/centos-binary-manila-scheduler            mitaka              075beb4c058e        18 hours ago        588.4 MB
egonzalez90/centos-binary-designate-api               mitaka              0dfb2e4b971d        18 hours ago        589.8 MB
egonzalez90/centos-binary-designate-central           mitaka              d4ab5d846989        18 hours ago        589.8 MB
egonzalez90/centos-binary-designate-poolmanager       mitaka              17570055aa01        18 hours ago        594.3 MB
egonzalez90/centos-binary-designate-sink              mitaka              16e1113010dd        18 hours ago        589.8 MB
egonzalez90/centos-binary-designate-backend-bind9     mitaka              a83d15642a07        18 hours ago        594.3 MB
egonzalez90/centos-binary-cinder-base                 mitaka              ebc196468197        18 hours ago        775.3 MB
egonzalez90/centos-binary-ironic-pxe                  mitaka              3b825ca5e758        18 hours ago        595.2 MB
egonzalez90/centos-binary-ironic-api                  mitaka              53b3a144266a        18 hours ago        591.6 MB
egonzalez90/centos-binary-zookeeper                   mitaka              91270c923346        18 hours ago        544.8 MB
egonzalez90/centos-binary-designate-mdns              mitaka              2de6dfb55068        18 hours ago        589.8 MB
egonzalez90/centos-binary-ironic-inspector            mitaka              631d5c362116        18 hours ago        597.4 MB
egonzalez90/centos-binary-ironic-conductor            mitaka              aceccff4bef0        18 hours ago        620.3 MB
egonzalez90/centos-binary-horizon                     mitaka              b8a5f7db8daf        18 hours ago        690.6 MB
egonzalez90/centos-binary-swift-base                  mitaka              c98164063b84        18 hours ago        563.7 MB
egonzalez90/centos-binary-mesos-base                  mitaka              a50e0e1e8edc        18 hours ago        536.5 MB
egonzalez90/centos-binary-ceilometer-base             mitaka              07164b2054b8        18 hours ago        574.2 MB
egonzalez90/centos-binary-glance-base                 mitaka              b40e34f047d7        18 hours ago        688.5 MB
egonzalez90/centos-binary-magnum-base                 mitaka              bad9157e57ba        18 hours ago        668.3 MB
egonzalez90/centos-binary-aodh-base                   mitaka              9a919ceb1213        19 hours ago        573.5 MB
egonzalez90/centos-binary-neutron-base                mitaka              7669e9646a22        19 hours ago        817.9 MB
egonzalez90/centos-binary-gnocchi-base                mitaka              509a5c7395fb        19 hours ago        817.5 MB
egonzalez90/centos-binary-keystone                    mitaka              231990ed7b4d        19 hours ago        606.4 MB
egonzalez90/centos-binary-nova-base                   mitaka              a4523a00e9b2        19 hours ago        608.8 MB
egonzalez90/centos-binary-zaqar                       mitaka              43b8675a9bda        19 hours ago        607.4 MB
egonzalez90/centos-binary-heat-base                   mitaka              10662065592f        19 hours ago        572.6 MB
egonzalez90/centos-binary-manila-base                 mitaka              215fc8275580        19 hours ago        588.4 MB
egonzalez90/centos-binary-trove-base                  mitaka              0eda6621a5c3        19 hours ago        566.5 MB
egonzalez90/centos-binary-designate-base              mitaka              dc53110d609c        19 hours ago        570.2 MB
egonzalez90/centos-binary-dind                        mitaka              f2e7bbe028b4        19 hours ago        539.3 MB
egonzalez90/centos-binary-tempest                     mitaka              28cceef2319d        19 hours ago        628 MB
egonzalez90/centos-binary-ironic-base                 mitaka              7b52957bf3a0        19 hours ago        572 MB
egonzalez90/centos-binary-openvswitch-db-server       mitaka              a624dd2d260d        19 hours ago        379 MB
egonzalez90/centos-binary-openvswitch-vswitchd        mitaka              4c36af8e0e44        20 hours ago        379 MB
egonzalez90/centos-binary-ceph-mon                    mitaka              81486c6a7605        20 hours ago        553.3 MB
egonzalez90/centos-binary-kolla-toolbox               mitaka              3fc4535c3d5e        20 hours ago        675.4 MB
egonzalez90/centos-binary-elasticsearch               mitaka              0a81ba71ec7f        20 hours ago        576.4 MB
egonzalez90/centos-binary-keepalived                  mitaka              3559905c7d86        20 hours ago        409.3 MB
egonzalez90/centos-binary-ceph-osd                    mitaka              26dc5c40e160        20 hours ago        553.3 MB
egonzalez90/centos-binary-heka                        mitaka              919dd5a93ca3        20 hours ago        420.6 MB
egonzalez90/centos-binary-rabbitmq                    mitaka              4ab020955a66        20 hours ago        552.7 MB
egonzalez90/centos-binary-mesosphere-base             mitaka              a9f2a4c7cf1c        20 hours ago        381.9 MB
egonzalez90/centos-binary-openstack-base              mitaka              46a527edf49a        20 hours ago        539.3 MB
egonzalez90/centos-binary-ceph-rgw                    mitaka              f57ab1371bd3        20 hours ago        553.3 MB
egonzalez90/centos-binary-openvswitch-base            mitaka              f91c5a909b2c        20 hours ago        379 MB
egonzalez90/centos-binary-mariadb                     mitaka              8fe89c13a637        20 hours ago        678.6 MB
egonzalez90/centos-binary-cron                        mitaka              a239ea240c2e        20 hours ago        366.7 MB
egonzalez90/centos-binary-mongodb                     mitaka              48946c962d7e        20 hours ago        539.2 MB
egonzalez90/centos-binary-ceph-base                   mitaka              02be30a43c6e        20 hours ago        553.3 MB
egonzalez90/centos-binary-haproxy                     mitaka              b8d8ac3e371d        20 hours ago        367.4 MB
egonzalez90/centos-binary-memcached                   mitaka              175026eb6466        20 hours ago        404.1 MB
egonzalez90/centos-binary-kibana                      mitaka              885aeb0b2b97        20 hours ago        490.9 MB
egonzalez90/centos-binary-mesos-dns                   mitaka              95e29f8429e7        21 hours ago        361 MB
egonzalez90/centos-binary-base                        mitaka              b104d01004c6        21 hours ago        349.2 MB
</pre></div>
</div>
</div>
</div>
<div class="section" id="target-hosts">
<h2>TARGET HOSTS<a class="headerlink" href="#target-hosts" title="Permalink to this headline">¶</a></h2>
<p>In target nodes, a newer version of pip and docker-py is needed, install
it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pip</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">docker</span><span class="o">-</span><span class="n">py</span>
</pre></div>
</div>
</div>
<div class="section" id="deploy-kolla">
<h2>DEPLOY KOLLA<a class="headerlink" href="#deploy-kolla" title="Permalink to this headline">¶</a></h2>
<p>Kolla ships a tool to create random passwords, issue this command to run
this tool. Also, you can modify passwords file at /etc/kolla/ directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kolla</span><span class="o">-</span><span class="n">genpwd</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Edit globals.yml file with the following content, use your own info if
necessary.</div>
<div class="line">Change docker_namespace with your docker account name.</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kolla</span><span class="o">/</span><span class="nb">globals</span><span class="o">.</span><span class="n">yml</span>

<span class="n">kolla_base_distro</span><span class="p">:</span> <span class="s2">&quot;centos&quot;</span>
<span class="n">kolla_install_type</span><span class="p">:</span> <span class="s2">&quot;binary&quot;</span>
<span class="n">openstack_release</span><span class="p">:</span> <span class="s2">&quot;mitaka&quot;</span> <span class="c1">## Tag at docker hub</span>
<span class="n">kolla_internal_vip_address</span><span class="p">:</span> <span class="s2">&quot;192.168.1.90&quot;</span>
<span class="n">docker_registry</span><span class="p">:</span> <span class="s2">&quot;docker.io&quot;</span>
<span class="n">docker_namespace</span><span class="p">:</span> <span class="s2">&quot;egonzalez90&quot;</span>
<span class="n">network_interface</span><span class="p">:</span> <span class="s2">&quot;eth2&quot;</span>
<span class="n">neutron_external_interface</span><span class="p">:</span> <span class="s2">&quot;ens9&quot;</span>
</pre></div>
</div>
<p>Edit the inventory file with your server’s IPs or hostnames.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vi</span> <span class="n">ansible</span><span class="o">/</span><span class="n">inventory</span><span class="o">/</span><span class="n">multinode</span>

<span class="p">[</span><span class="n">control</span><span class="p">]</span>
<span class="c1"># These hostname must be resolvable from your deployment host</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.77</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.74</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.78</span>

<span class="c1"># The network nodes are where your l3-agent and loadbalancers will run</span>
<span class="c1"># This can be the same as a host in the control group</span>
<span class="p">[</span><span class="n">network</span><span class="p">]</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.77</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.74</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.78</span>

<span class="p">[</span><span class="n">compute</span><span class="p">]</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.77</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.74</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.78</span>

<span class="c1"># When compute nodes and control nodes use different interfaces,</span>
<span class="c1"># you can specify &quot;api_interface&quot; and another interfaces like below:</span>
<span class="c1">#compute01 neutron_external_interface=eth0 api_interface=em1 storage_interface=em1 tunnel_interface=em1</span>

<span class="p">[</span><span class="n">storage</span><span class="p">]</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.77</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.74</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.78</span>
</pre></div>
</div>
<p>Create an SSH key to login into target servers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@kolla</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">node</span> <span class="n">kolla</span><span class="p">]</span><span class="c1"># ssh-keygen</span>
<span class="n">Generating</span> <span class="n">public</span><span class="o">/</span><span class="n">private</span> <span class="n">rsa</span> <span class="n">key</span> <span class="n">pair</span><span class="o">.</span>
<span class="n">Enter</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">which</span> <span class="n">to</span> <span class="n">save</span> <span class="n">the</span> <span class="n">key</span> <span class="p">(</span><span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="p">):</span>
<span class="n">Enter</span> <span class="n">passphrase</span> <span class="p">(</span><span class="n">empty</span> <span class="k">for</span> <span class="n">no</span> <span class="n">passphrase</span><span class="p">):</span>
<span class="n">Enter</span> <span class="n">same</span> <span class="n">passphrase</span> <span class="n">again</span><span class="p">:</span>
<span class="n">Your</span> <span class="n">identification</span> <span class="n">has</span> <span class="n">been</span> <span class="n">saved</span> <span class="ow">in</span> <span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span>
<span class="n">Your</span> <span class="n">public</span> <span class="n">key</span> <span class="n">has</span> <span class="n">been</span> <span class="n">saved</span> <span class="ow">in</span> <span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span>
<span class="n">The</span> <span class="n">key</span> <span class="n">fingerprint</span> <span class="ow">is</span><span class="p">:</span>
<span class="n">bd</span><span class="p">:</span><span class="mi">3</span><span class="n">e</span><span class="p">:</span><span class="n">ce</span><span class="p">:</span><span class="mi">7</span><span class="n">c</span><span class="p">:</span><span class="mi">2</span><span class="n">a</span><span class="p">:</span><span class="mi">6</span><span class="n">b</span><span class="p">:</span><span class="n">a7</span><span class="p">:</span><span class="mi">99</span><span class="p">:</span><span class="n">ed</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="n">cf</span><span class="p">:</span><span class="n">c2</span><span class="p">:</span><span class="mi">60</span><span class="p">:</span><span class="mi">5</span><span class="n">f</span><span class="p">:</span><span class="mi">2</span><span class="n">f</span><span class="p">:</span><span class="mi">12</span> <span class="n">root</span><span class="nd">@kolla</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">node</span>
<span class="n">The</span> <span class="n">key</span><span class="s1">&#39;s randomart image is:</span>
<span class="o">+--</span><span class="p">[</span> <span class="n">RSA</span> <span class="mi">2048</span><span class="p">]</span><span class="o">----+</span>
<span class="o">|</span>                 <span class="o">|</span>
<span class="o">|</span>                 <span class="o">|</span>
<span class="o">|</span>                 <span class="o">|</span>
<span class="o">|</span>         <span class="o">.</span>       <span class="o">|</span>
<span class="o">|</span>      <span class="n">o</span> <span class="n">E</span> <span class="n">o</span>      <span class="o">|</span>
<span class="o">|</span>     <span class="o">.</span> <span class="o">+</span> <span class="o">*</span> <span class="n">o</span>     <span class="o">|</span>
<span class="o">|</span>        <span class="o">=</span> <span class="o">*</span> <span class="o">.</span>    <span class="o">|</span>
<span class="o">|</span>        <span class="n">o</span><span class="nd">@o</span><span class="o">..</span>    <span class="o">|</span>
<span class="o">|</span>       <span class="o">.=</span><span class="n">BO</span><span class="o">+</span>     <span class="o">|</span>
<span class="o">+-----------------+</span>
</pre></div>
</div>
<p>Copy the SSH key you have previously created to all your target nodes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@kolla</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">node</span> <span class="n">kolla</span><span class="p">]</span><span class="c1"># ssh-copy-id root@192.168.1.77</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@kolla</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">node</span> <span class="n">kolla</span><span class="p">]</span><span class="c1"># ssh-copy-id root@192.168.1.74</span>
<span class="p">[</span><span class="n">root</span><span class="nd">@kolla</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">node</span> <span class="n">kolla</span><span class="p">]</span><span class="c1"># ssh-copy-id root@192.168.1.78</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Ensure all hostnames can be resolved between all the nodes, this is a
necessary step, if not, rabbitmq will fail.</div>
<div class="line">If using a DNS server you can skip this task.</div>
<div class="line">Configure hosts file.</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vi</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts</span>

<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.77</span> <span class="n">node1</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.74</span> <span class="n">node2</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.78</span> <span class="n">node3</span>
</pre></div>
</div>
<p>Copy hosts file to the other nodes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scp</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts</span> <span class="n">root</span><span class="nd">@node2</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts</span>
<span class="n">scp</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts</span> <span class="n">root</span><span class="nd">@node3</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts</span>
</pre></div>
</div>
<p>Execute the prechecks tool to ensure all requisites are ok.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@kolla</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">node</span> <span class="n">kolla</span><span class="p">]</span><span class="c1"># kolla-ansible prechecks -i ansible/inventory/multinode</span>
<span class="n">Pre</span><span class="o">-</span><span class="n">deployment</span> <span class="n">checking</span> <span class="p">:</span> <span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="o">-</span><span class="n">i</span> <span class="n">ansible</span><span class="o">/</span><span class="n">inventory</span><span class="o">/</span><span class="n">multinode</span> <span class="o">-</span><span class="n">e</span> <span class="o">@/</span><span class="n">etc</span><span class="o">/</span><span class="n">kolla</span><span class="o">/</span><span class="nb">globals</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">e</span> <span class="o">@/</span><span class="n">etc</span><span class="o">/</span><span class="n">kolla</span><span class="o">/</span><span class="n">passwords</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">e</span> <span class="n">CONFIG_DIR</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">kolla</span>  <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">kolla</span><span class="o">/</span><span class="n">ansible</span><span class="o">/</span><span class="n">prechecks</span><span class="o">.</span><span class="n">yml</span>

<span class="n">PLAY</span> <span class="p">[</span><span class="nb">all</span><span class="p">]</span> <span class="o">********************************************************************</span>

<span class="n">GATHERING</span> <span class="n">FACTS</span> <span class="o">***************************************************************</span>
<span class="n">ok</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.77</span><span class="p">]</span>
<span class="n">ok</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.74</span><span class="p">]</span>
<span class="n">ok</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.78</span><span class="p">]</span>
<span class="o">.......................</span>
<span class="n">PLAY</span> <span class="n">RECAP</span> <span class="o">********************************************************************</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.74</span>               <span class="p">:</span> <span class="n">ok</span><span class="o">=</span><span class="mi">63</span>   <span class="n">changed</span><span class="o">=</span><span class="mi">0</span>    <span class="n">unreachable</span><span class="o">=</span><span class="mi">0</span>    <span class="n">failed</span><span class="o">=</span><span class="mi">0</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.77</span>               <span class="p">:</span> <span class="n">ok</span><span class="o">=</span><span class="mi">63</span>   <span class="n">changed</span><span class="o">=</span><span class="mi">0</span>    <span class="n">unreachable</span><span class="o">=</span><span class="mi">0</span>    <span class="n">failed</span><span class="o">=</span><span class="mi">0</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.78</span>               <span class="p">:</span> <span class="n">ok</span><span class="o">=</span><span class="mi">63</span>   <span class="n">changed</span><span class="o">=</span><span class="mi">0</span>    <span class="n">unreachable</span><span class="o">=</span><span class="mi">0</span>    <span class="n">failed</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Once all requistes are passed, start the installation of OpenStack by
Kolla.</div>
<div class="line">The first time usually take a long time, because docker images need to
be pulled into target hosts, and more if pull comes from DockerHub
registry instead of a local one.</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@kolla</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">node</span> <span class="n">kolla</span><span class="p">]</span><span class="c1"># kolla-ansible deploy -i ansible/inventory/multinode</span>
<span class="n">Deploying</span> <span class="n">Playbooks</span> <span class="p">:</span> <span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="o">-</span><span class="n">i</span> <span class="n">ansible</span><span class="o">/</span><span class="n">inventory</span><span class="o">/</span><span class="n">multinode</span> <span class="o">-</span><span class="n">e</span> <span class="o">@/</span><span class="n">etc</span><span class="o">/</span><span class="n">kolla</span><span class="o">/</span><span class="nb">globals</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">e</span> <span class="o">@/</span><span class="n">etc</span><span class="o">/</span><span class="n">kolla</span><span class="o">/</span><span class="n">passwords</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">e</span> <span class="n">CONFIG_DIR</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">kolla</span>  <span class="o">-</span><span class="n">e</span> <span class="n">action</span><span class="o">=</span><span class="n">deploy</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">kolla</span><span class="o">/</span><span class="n">ansible</span><span class="o">/</span><span class="n">site</span><span class="o">.</span><span class="n">yml</span>

<span class="n">PLAY</span> <span class="p">[</span><span class="n">ceph</span><span class="o">-</span><span class="n">mon</span><span class="p">;</span><span class="n">ceph</span><span class="o">-</span><span class="n">osd</span><span class="p">;</span><span class="n">ceph</span><span class="o">-</span><span class="n">rgw</span><span class="p">]</span> <span class="o">*********************************************</span>

<span class="n">GATHERING</span> <span class="n">FACTS</span> <span class="o">***************************************************************</span>
<span class="n">ok</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.77</span><span class="p">]</span>
<span class="n">ok</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.74</span><span class="p">]</span>
<span class="n">ok</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.78</span><span class="p">]</span>

<span class="n">TASK</span><span class="p">:</span> <span class="p">[</span><span class="n">common</span> <span class="o">|</span> <span class="n">Ensuring</span> <span class="n">config</span> <span class="n">directories</span> <span class="n">exist</span><span class="p">]</span> <span class="o">****************************</span>
<span class="n">skipping</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.77</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">heka</span><span class="p">)</span>
<span class="n">skipping</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.74</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">heka</span><span class="p">)</span>
<span class="n">skipping</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.77</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">cron</span><span class="p">)</span>
<span class="n">skipping</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.78</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">heka</span><span class="p">)</span>
<span class="n">skipping</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.74</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">cron</span><span class="p">)</span>
<span class="n">skipping</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.77</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">cron</span><span class="o">/</span><span class="n">logrotate</span><span class="p">)</span>
<span class="n">skipping</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.74</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">cron</span><span class="o">/</span><span class="n">logrotate</span><span class="p">)</span>
<span class="n">skipping</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.78</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">cron</span><span class="p">)</span>
<span class="n">skipping</span><span class="p">:</span> <span class="p">[</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.78</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">cron</span><span class="o">/</span><span class="n">logrotate</span><span class="p">)</span>

<span class="o">.......................</span>

<span class="n">PLAY</span> <span class="n">RECAP</span> <span class="o">********************************************************************</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.74</span>               <span class="p">:</span> <span class="n">ok</span><span class="o">=</span><span class="mi">301</span>  <span class="n">changed</span><span class="o">=</span><span class="mi">93</span>   <span class="n">unreachable</span><span class="o">=</span><span class="mi">0</span>    <span class="n">failed</span><span class="o">=</span><span class="mi">0</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.77</span>               <span class="p">:</span> <span class="n">ok</span><span class="o">=</span><span class="mi">301</span>  <span class="n">changed</span><span class="o">=</span><span class="mi">93</span>   <span class="n">unreachable</span><span class="o">=</span><span class="mi">0</span>    <span class="n">failed</span><span class="o">=</span><span class="mi">0</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">1.78</span>               <span class="p">:</span> <span class="n">ok</span><span class="o">=</span><span class="mi">301</span>  <span class="n">changed</span><span class="o">=</span><span class="mi">93</span>   <span class="n">unreachable</span><span class="o">=</span><span class="mi">0</span>    <span class="n">failed</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>Execute this tool to create a credential file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@kolla</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">node</span> <span class="n">kolla</span><span class="p">]</span><span class="c1"># kolla-ansible post-deploy</span>

<span class="n">Post</span><span class="o">-</span><span class="n">Deploying</span> <span class="n">Playbooks</span> <span class="p">:</span> <span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="o">-</span><span class="n">i</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">kolla</span><span class="o">/</span><span class="n">ansible</span><span class="o">/</span><span class="n">inventory</span><span class="o">/</span><span class="nb">all</span><span class="o">-</span><span class="ow">in</span><span class="o">-</span><span class="n">one</span> <span class="o">-</span><span class="n">e</span> <span class="o">@/</span><span class="n">etc</span><span class="o">/</span><span class="n">kolla</span><span class="o">/</span><span class="nb">globals</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">e</span> <span class="o">@/</span><span class="n">etc</span><span class="o">/</span><span class="n">kolla</span><span class="o">/</span><span class="n">passwords</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">e</span> <span class="n">CONFIG_DIR</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">kolla</span>  <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">kolla</span><span class="o">/</span><span class="n">ansible</span><span class="o">/</span><span class="n">post</span><span class="o">-</span><span class="n">deploy</span><span class="o">.</span><span class="n">yml</span>

<span class="n">PLAY</span> <span class="p">[</span><span class="n">Creating</span> <span class="n">admin</span> <span class="n">openrc</span> <span class="n">file</span> <span class="n">on</span> <span class="n">the</span> <span class="n">deploy</span> <span class="n">node</span><span class="p">]</span> <span class="o">**************************</span>

<span class="n">GATHERING</span> <span class="n">FACTS</span> <span class="o">***************************************************************</span>
<span class="n">ok</span><span class="p">:</span> <span class="p">[</span><span class="n">localhost</span><span class="p">]</span>

<span class="n">TASK</span><span class="p">:</span> <span class="p">[</span><span class="n">template</span> <span class="p">]</span> <span class="o">*************************************************************</span>
<span class="n">changed</span><span class="p">:</span> <span class="p">[</span><span class="n">localhost</span><span class="p">]</span>

<span class="n">PLAY</span> <span class="n">RECAP</span> <span class="o">********************************************************************</span>
<span class="n">localhost</span>                  <span class="p">:</span> <span class="n">ok</span><span class="o">=</span><span class="mi">2</span>    <span class="n">changed</span><span class="o">=</span><span class="mi">1</span>    <span class="n">unreachable</span><span class="o">=</span><span class="mi">0</span>    <span class="n">failed</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>Source credential file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@kolla</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">node</span> <span class="n">kolla</span><span class="p">]</span><span class="c1"># source /etc/kolla/admin-openrc.sh</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Kolla ships a tool to create a base Openstack configuration layout,
this will create networks, routers, images, etc.</div>
<div class="line">Execute it in the newly OpenStack environment.</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@kolla</span><span class="o">-</span><span class="n">deployment</span><span class="o">-</span><span class="n">node</span> <span class="n">kolla</span><span class="p">]</span><span class="c1"># tools/init-runonce</span>
<span class="n">Downloading</span> <span class="n">glance</span> <span class="n">image</span><span class="o">.</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                 <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span> <span class="mf">12.6</span><span class="n">M</span>  <span class="mi">100</span> <span class="mf">12.6</span><span class="n">M</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">873</span><span class="n">k</span>      <span class="mi">0</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">14</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">14</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">1823</span><span class="n">k</span>
<span class="n">Creating</span> <span class="n">glance</span> <span class="n">image</span><span class="o">.</span>
<span class="p">[</span><span class="o">=============================&gt;</span><span class="p">]</span> <span class="mi">100</span><span class="o">%</span>
<span class="o">+------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Property</span>         <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">checksum</span>         <span class="o">|</span> <span class="n">ee1eca47dc88f4879d8a229cc70a07c6</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">container_format</span> <span class="o">|</span> <span class="n">bare</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span>       <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">15</span><span class="n">T19</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mf">20.000000</span>           <span class="o">|</span>
<span class="o">|</span> <span class="n">deleted</span>          <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">deleted_at</span>       <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">disk_format</span>      <span class="o">|</span> <span class="n">qcow2</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>               <span class="o">|</span> <span class="mi">0</span><span class="n">b5ec320</span><span class="o">-</span><span class="n">ace9</span><span class="o">-</span><span class="mi">4</span><span class="n">b34</span><span class="o">-</span><span class="mi">93</span><span class="n">cb</span><span class="o">-</span><span class="mi">54</span><span class="n">fa6f2c70f5</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">is_public</span>        <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">min_disk</span>         <span class="o">|</span> <span class="mi">0</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">min_ram</span>          <span class="o">|</span> <span class="mi">0</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>             <span class="o">|</span> <span class="n">cirros</span>                               <span class="o">|</span>
<span class="o">|</span> <span class="n">owner</span>            <span class="o">|</span> <span class="n">a9c2e6c6a55b40619d4f12f05aea03f1</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">protected</span>        <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">size</span>             <span class="o">|</span> <span class="mi">13287936</span>                             <span class="o">|</span>
<span class="o">|</span> <span class="n">status</span>           <span class="o">|</span> <span class="n">active</span>                               <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span>       <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">15</span><span class="n">T19</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span><span class="mf">35.000000</span>           <span class="o">|</span>
<span class="o">|</span> <span class="n">virtual_size</span>     <span class="o">|</span> <span class="kc">None</span>                                 <span class="o">|</span>
<span class="o">+------------------+--------------------------------------+</span>
<span class="n">Configuring</span> <span class="n">neutron</span><span class="o">.</span>
<span class="n">Created</span> <span class="n">a</span> <span class="n">new</span> <span class="n">network</span><span class="p">:</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Field</span>                     <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">admin_state_up</span>            <span class="o">|</span> <span class="kc">True</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">availability_zone_hints</span>   <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">availability_zones</span>        <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span>                <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">15</span><span class="n">T19</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">07</span>                  <span class="o">|</span>
<span class="o">|</span> <span class="n">description</span>               <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>                        <span class="o">|</span> <span class="mi">12</span><span class="n">c74cdb</span><span class="o">-</span><span class="mi">9218</span><span class="o">-</span><span class="mi">4</span><span class="n">d8b</span><span class="o">-</span><span class="n">ab24</span><span class="o">-</span><span class="n">d5bc7f17d8c5</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">ipv4_address_scope</span>        <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">ipv6_address_scope</span>        <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">is_default</span>                <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">mtu</span>                       <span class="o">|</span> <span class="mi">1500</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>                      <span class="o">|</span> <span class="n">public1</span>                              <span class="o">|</span>
<span class="o">|</span> <span class="n">provider</span><span class="p">:</span><span class="n">network_type</span>     <span class="o">|</span> <span class="n">flat</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">provider</span><span class="p">:</span><span class="n">physical_network</span> <span class="o">|</span> <span class="n">physnet1</span>                             <span class="o">|</span>
<span class="o">|</span> <span class="n">provider</span><span class="p">:</span><span class="n">segmentation_id</span>  <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">router</span><span class="p">:</span><span class="n">external</span>           <span class="o">|</span> <span class="kc">True</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">shared</span>                    <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">status</span>                    <span class="o">|</span> <span class="n">ACTIVE</span>                               <span class="o">|</span>
<span class="o">|</span> <span class="n">subnets</span>                   <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">tags</span>                      <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">tenant_id</span>                 <span class="o">|</span> <span class="n">a9c2e6c6a55b40619d4f12f05aea03f1</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span>                <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">15</span><span class="n">T19</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">07</span>                  <span class="o">|</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="n">Created</span> <span class="n">a</span> <span class="n">new</span> <span class="n">subnet</span><span class="p">:</span>
<span class="o">+-------------------+----------------------------------------------+</span>
<span class="o">|</span> <span class="n">Field</span>             <span class="o">|</span> <span class="n">Value</span>                                        <span class="o">|</span>
<span class="o">+-------------------+----------------------------------------------+</span>
<span class="o">|</span> <span class="n">allocation_pools</span>  <span class="o">|</span> <span class="p">{</span><span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;10.0.2.150&quot;</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="s2">&quot;10.0.2.199&quot;</span><span class="p">}</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">cidr</span>              <span class="o">|</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.0</span><span class="o">/</span><span class="mi">24</span>                                  <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span>        <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">15</span><span class="n">T19</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">47</span>                          <span class="o">|</span>
<span class="o">|</span> <span class="n">description</span>       <span class="o">|</span>                                              <span class="o">|</span>
<span class="o">|</span> <span class="n">dns_nameservers</span>   <span class="o">|</span>                                              <span class="o">|</span>
<span class="o">|</span> <span class="n">enable_dhcp</span>       <span class="o">|</span> <span class="kc">False</span>                                        <span class="o">|</span>
<span class="o">|</span> <span class="n">gateway_ip</span>        <span class="o">|</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.1</span>                                     <span class="o">|</span>
<span class="o">|</span> <span class="n">host_routes</span>       <span class="o">|</span>                                              <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>                <span class="o">|</span> <span class="mi">274</span><span class="n">bee58</span><span class="o">-</span><span class="mi">68</span><span class="n">bb</span><span class="o">-</span><span class="mi">4</span><span class="n">a96</span><span class="o">-</span><span class="n">bae5</span><span class="o">-</span><span class="mi">41</span><span class="n">c03022a363</span>         <span class="o">|</span>
<span class="o">|</span> <span class="n">ip_version</span>        <span class="o">|</span> <span class="mi">4</span>                                            <span class="o">|</span>
<span class="o">|</span> <span class="n">ipv6_address_mode</span> <span class="o">|</span>                                              <span class="o">|</span>
<span class="o">|</span> <span class="n">ipv6_ra_mode</span>      <span class="o">|</span>                                              <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>              <span class="o">|</span> <span class="mi">1</span><span class="o">-</span><span class="n">subnet</span>                                     <span class="o">|</span>
<span class="o">|</span> <span class="n">network_id</span>        <span class="o">|</span> <span class="mi">12</span><span class="n">c74cdb</span><span class="o">-</span><span class="mi">9218</span><span class="o">-</span><span class="mi">4</span><span class="n">d8b</span><span class="o">-</span><span class="n">ab24</span><span class="o">-</span><span class="n">d5bc7f17d8c5</span>         <span class="o">|</span>
<span class="o">|</span> <span class="n">subnetpool_id</span>     <span class="o">|</span>                                              <span class="o">|</span>
<span class="o">|</span> <span class="n">tenant_id</span>         <span class="o">|</span> <span class="n">a9c2e6c6a55b40619d4f12f05aea03f1</span>             <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span>        <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">15</span><span class="n">T19</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">47</span>                          <span class="o">|</span>
<span class="o">+-------------------+----------------------------------------------+</span>
<span class="n">Created</span> <span class="n">a</span> <span class="n">new</span> <span class="n">network</span><span class="p">:</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Field</span>                     <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">admin_state_up</span>            <span class="o">|</span> <span class="kc">True</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">availability_zone_hints</span>   <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">availability_zones</span>        <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span>                <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">15</span><span class="n">T19</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span><span class="mi">42</span>                  <span class="o">|</span>
<span class="o">|</span> <span class="n">description</span>               <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>                        <span class="o">|</span> <span class="mi">9</span><span class="n">bb7cca0</span><span class="o">-</span><span class="n">e7ea</span><span class="o">-</span><span class="mi">4601</span><span class="o">-</span><span class="mi">8770</span><span class="o">-</span><span class="mi">7296473</span><span class="n">bdfff</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">ipv4_address_scope</span>        <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">ipv6_address_scope</span>        <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">mtu</span>                       <span class="o">|</span> <span class="mi">1450</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>                      <span class="o">|</span> <span class="n">demo</span><span class="o">-</span><span class="n">net</span>                             <span class="o">|</span>
<span class="o">|</span> <span class="n">provider</span><span class="p">:</span><span class="n">network_type</span>     <span class="o">|</span> <span class="n">vxlan</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">provider</span><span class="p">:</span><span class="n">physical_network</span> <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">provider</span><span class="p">:</span><span class="n">segmentation_id</span>  <span class="o">|</span> <span class="mi">94</span>                                   <span class="o">|</span>
<span class="o">|</span> <span class="n">router</span><span class="p">:</span><span class="n">external</span>           <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">shared</span>                    <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">status</span>                    <span class="o">|</span> <span class="n">ACTIVE</span>                               <span class="o">|</span>
<span class="o">|</span> <span class="n">subnets</span>                   <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">tags</span>                      <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">tenant_id</span>                 <span class="o">|</span> <span class="n">a9c2e6c6a55b40619d4f12f05aea03f1</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span>                <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">15</span><span class="n">T19</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span><span class="mi">43</span>                  <span class="o">|</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="n">Created</span> <span class="n">a</span> <span class="n">new</span> <span class="n">subnet</span><span class="p">:</span>
<span class="o">+-------------------+--------------------------------------------+</span>
<span class="o">|</span> <span class="n">Field</span>             <span class="o">|</span> <span class="n">Value</span>                                      <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------------+</span>
<span class="o">|</span> <span class="n">allocation_pools</span>  <span class="o">|</span> <span class="p">{</span><span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;10.0.0.2&quot;</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="s2">&quot;10.0.0.254&quot;</span><span class="p">}</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">cidr</span>              <span class="o">|</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">created_at</span>        <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">15</span><span class="n">T19</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">25</span>                        <span class="o">|</span>
<span class="o">|</span> <span class="n">description</span>       <span class="o">|</span>                                            <span class="o">|</span>
<span class="o">|</span> <span class="n">dns_nameservers</span>   <span class="o">|</span> <span class="mf">8.8</span><span class="o">.</span><span class="mf">8.8</span>                                    <span class="o">|</span>
<span class="o">|</span> <span class="n">enable_dhcp</span>       <span class="o">|</span> <span class="kc">True</span>                                       <span class="o">|</span>
<span class="o">|</span> <span class="n">gateway_ip</span>        <span class="o">|</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span>                                   <span class="o">|</span>
<span class="o">|</span> <span class="n">host_routes</span>       <span class="o">|</span>                                            <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>                <span class="o">|</span> <span class="mi">28</span><span class="n">ef0e39</span><span class="o">-</span><span class="mi">33</span><span class="n">a4</span><span class="o">-</span><span class="mi">43</span><span class="n">ea</span><span class="o">-</span><span class="n">b1a6</span><span class="o">-</span><span class="mi">8</span><span class="n">ea01d7c3379</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">ip_version</span>        <span class="o">|</span> <span class="mi">4</span>                                          <span class="o">|</span>
<span class="o">|</span> <span class="n">ipv6_address_mode</span> <span class="o">|</span>                                            <span class="o">|</span>
<span class="o">|</span> <span class="n">ipv6_ra_mode</span>      <span class="o">|</span>                                            <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>              <span class="o">|</span> <span class="n">demo</span><span class="o">-</span><span class="n">subnet</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">network_id</span>        <span class="o">|</span> <span class="mi">9</span><span class="n">bb7cca0</span><span class="o">-</span><span class="n">e7ea</span><span class="o">-</span><span class="mi">4601</span><span class="o">-</span><span class="mi">8770</span><span class="o">-</span><span class="mi">7296473</span><span class="n">bdfff</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">subnetpool_id</span>     <span class="o">|</span>                                            <span class="o">|</span>
<span class="o">|</span> <span class="n">tenant_id</span>         <span class="o">|</span> <span class="n">a9c2e6c6a55b40619d4f12f05aea03f1</span>           <span class="o">|</span>
<span class="o">|</span> <span class="n">updated_at</span>        <span class="o">|</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">15</span><span class="n">T19</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">25</span>                        <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------------+</span>
<span class="n">Created</span> <span class="n">a</span> <span class="n">new</span> <span class="n">router</span><span class="p">:</span>
<span class="o">+-------------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Field</span>                   <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+-------------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">admin_state_up</span>          <span class="o">|</span> <span class="kc">True</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">availability_zone_hints</span> <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">availability_zones</span>      <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">description</span>             <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">distributed</span>             <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="n">external_gateway_info</span>   <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">ha</span>                      <span class="o">|</span> <span class="kc">False</span>                                <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>                      <span class="o">|</span> <span class="mi">53</span><span class="n">a09f8a</span><span class="o">-</span><span class="mi">576</span><span class="n">a</span><span class="o">-</span><span class="mi">4</span><span class="n">f83</span><span class="o">-</span><span class="mi">82</span><span class="n">b0</span><span class="o">-</span><span class="mi">995</span><span class="n">a26f83deb</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>                    <span class="o">|</span> <span class="n">demo</span><span class="o">-</span><span class="n">router</span>                          <span class="o">|</span>
<span class="o">|</span> <span class="n">routes</span>                  <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">status</span>                  <span class="o">|</span> <span class="n">ACTIVE</span>                               <span class="o">|</span>
<span class="o">|</span> <span class="n">tenant_id</span>               <span class="o">|</span> <span class="n">a9c2e6c6a55b40619d4f12f05aea03f1</span>     <span class="o">|</span>
<span class="o">+-------------------------+--------------------------------------+</span>
<span class="n">Added</span> <span class="n">interface</span> <span class="n">ed81ba4c</span><span class="o">-</span><span class="mf">0e51</span><span class="o">-</span><span class="mi">4</span><span class="n">cd9</span><span class="o">-</span><span class="mi">9810</span><span class="o">-</span><span class="mi">0</span><span class="n">a9b883102c2</span> <span class="n">to</span> <span class="n">router</span> <span class="n">demo</span><span class="o">-</span><span class="n">router</span><span class="o">.</span>
<span class="n">Set</span> <span class="n">gateway</span> <span class="k">for</span> <span class="n">router</span> <span class="n">demo</span><span class="o">-</span><span class="n">router</span>
<span class="n">Created</span> <span class="n">a</span> <span class="n">new</span> <span class="n">security_group_rule</span><span class="p">:</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Field</span>             <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">description</span>       <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">direction</span>         <span class="o">|</span> <span class="n">ingress</span>                              <span class="o">|</span>
<span class="o">|</span> <span class="n">ethertype</span>         <span class="o">|</span> <span class="n">IPv4</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>                <span class="o">|</span> <span class="mi">4</span><span class="n">f836611</span><span class="o">-</span><span class="mi">830</span><span class="n">d</span><span class="o">-</span><span class="mf">48e7</span><span class="o">-</span><span class="n">a81c</span><span class="o">-</span><span class="mi">7</span><span class="n">aa65a2573a4</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">port_range_max</span>    <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">port_range_min</span>    <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">protocol</span>          <span class="o">|</span> <span class="n">icmp</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">remote_group_id</span>   <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">remote_ip_prefix</span>  <span class="o">|</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">0</span>                            <span class="o">|</span>
<span class="o">|</span> <span class="n">security_group_id</span> <span class="o">|</span> <span class="n">c9e76d1f</span><span class="o">-</span><span class="n">d58c</span><span class="o">-</span><span class="mi">4621</span><span class="o">-</span><span class="n">b402</span><span class="o">-</span><span class="mi">1295</span><span class="n">d9e5168d</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">tenant_id</span>         <span class="o">|</span> <span class="n">a9c2e6c6a55b40619d4f12f05aea03f1</span>     <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="n">Created</span> <span class="n">a</span> <span class="n">new</span> <span class="n">security_group_rule</span><span class="p">:</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Field</span>             <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">description</span>       <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">direction</span>         <span class="o">|</span> <span class="n">ingress</span>                              <span class="o">|</span>
<span class="o">|</span> <span class="n">ethertype</span>         <span class="o">|</span> <span class="n">IPv4</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>                <span class="o">|</span> <span class="mi">8</span><span class="n">cb6c081</span><span class="o">-</span><span class="mi">0388</span><span class="o">-</span><span class="mi">4</span><span class="n">d94</span><span class="o">-</span><span class="mi">98</span><span class="n">f8</span><span class="o">-</span><span class="mi">58190</span><span class="n">c574133</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">port_range_max</span>    <span class="o">|</span> <span class="mi">22</span>                                   <span class="o">|</span>
<span class="o">|</span> <span class="n">port_range_min</span>    <span class="o">|</span> <span class="mi">22</span>                                   <span class="o">|</span>
<span class="o">|</span> <span class="n">protocol</span>          <span class="o">|</span> <span class="n">tcp</span>                                  <span class="o">|</span>
<span class="o">|</span> <span class="n">remote_group_id</span>   <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">remote_ip_prefix</span>  <span class="o">|</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">0</span>                            <span class="o">|</span>
<span class="o">|</span> <span class="n">security_group_id</span> <span class="o">|</span> <span class="n">c9e76d1f</span><span class="o">-</span><span class="n">d58c</span><span class="o">-</span><span class="mi">4621</span><span class="o">-</span><span class="n">b402</span><span class="o">-</span><span class="mi">1295</span><span class="n">d9e5168d</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">tenant_id</span>         <span class="o">|</span> <span class="n">a9c2e6c6a55b40619d4f12f05aea03f1</span>     <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="n">Created</span> <span class="n">a</span> <span class="n">new</span> <span class="n">security_group_rule</span><span class="p">:</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Field</span>             <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">description</span>       <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">direction</span>         <span class="o">|</span> <span class="n">ingress</span>                              <span class="o">|</span>
<span class="o">|</span> <span class="n">ethertype</span>         <span class="o">|</span> <span class="n">IPv4</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>                <span class="o">|</span> <span class="mi">76142824</span><span class="o">-</span><span class="mi">3</span><span class="n">cb2</span><span class="o">-</span><span class="mi">43</span><span class="n">a5</span><span class="o">-</span><span class="n">bbd7</span><span class="o">-</span><span class="mi">635</span><span class="n">aedd05666</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">port_range_max</span>    <span class="o">|</span> <span class="mi">8000</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">port_range_min</span>    <span class="o">|</span> <span class="mi">8000</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">protocol</span>          <span class="o">|</span> <span class="n">tcp</span>                                  <span class="o">|</span>
<span class="o">|</span> <span class="n">remote_group_id</span>   <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">remote_ip_prefix</span>  <span class="o">|</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">0</span>                            <span class="o">|</span>
<span class="o">|</span> <span class="n">security_group_id</span> <span class="o">|</span> <span class="n">c9e76d1f</span><span class="o">-</span><span class="n">d58c</span><span class="o">-</span><span class="mi">4621</span><span class="o">-</span><span class="n">b402</span><span class="o">-</span><span class="mi">1295</span><span class="n">d9e5168d</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">tenant_id</span>         <span class="o">|</span> <span class="n">a9c2e6c6a55b40619d4f12f05aea03f1</span>     <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="n">Created</span> <span class="n">a</span> <span class="n">new</span> <span class="n">security_group_rule</span><span class="p">:</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">Field</span>             <span class="o">|</span> <span class="n">Value</span>                                <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="o">|</span> <span class="n">description</span>       <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">direction</span>         <span class="o">|</span> <span class="n">ingress</span>                              <span class="o">|</span>
<span class="o">|</span> <span class="n">ethertype</span>         <span class="o">|</span> <span class="n">IPv4</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="nb">id</span>                <span class="o">|</span> <span class="n">ce77b36f</span><span class="o">-</span><span class="n">a9ed</span><span class="o">-</span><span class="mi">4</span><span class="n">c10</span><span class="o">-</span><span class="n">ba1f</span><span class="o">-</span><span class="mi">2697</span><span class="n">ad1c8138</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">port_range_max</span>    <span class="o">|</span> <span class="mi">8080</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">port_range_min</span>    <span class="o">|</span> <span class="mi">8080</span>                                 <span class="o">|</span>
<span class="o">|</span> <span class="n">protocol</span>          <span class="o">|</span> <span class="n">tcp</span>                                  <span class="o">|</span>
<span class="o">|</span> <span class="n">remote_group_id</span>   <span class="o">|</span>                                      <span class="o">|</span>
<span class="o">|</span> <span class="n">remote_ip_prefix</span>  <span class="o">|</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">0</span>                            <span class="o">|</span>
<span class="o">|</span> <span class="n">security_group_id</span> <span class="o">|</span> <span class="n">c9e76d1f</span><span class="o">-</span><span class="n">d58c</span><span class="o">-</span><span class="mi">4621</span><span class="o">-</span><span class="n">b402</span><span class="o">-</span><span class="mi">1295</span><span class="n">d9e5168d</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">tenant_id</span>         <span class="o">|</span> <span class="n">a9c2e6c6a55b40619d4f12f05aea03f1</span>     <span class="o">|</span>
<span class="o">+-------------------+--------------------------------------+</span>
<span class="n">Configuring</span> <span class="n">nova</span> <span class="n">public</span> <span class="n">key</span> <span class="ow">and</span> <span class="n">quotas</span><span class="o">.</span>
</pre></div>
</div>
<p>Check nova services status</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[egonzalez@localhost kolla]$ nova service-list
+----+------------------+-------+----------+---------+-------+----------------------------+-----------------+
| Id | Binary           | Host  | Zone     | Status  | State | Updated_at                 | Disabled Reason |
+----+------------------+-------+----------+---------+-------+----------------------------+-----------------+
| 40 | nova-consoleauth | node3 | internal | enabled | up    | 2016-04-15T20:15:44.000000 | -               |
| 43 | nova-consoleauth | node1 | internal | enabled | up    | 2016-04-15T20:15:46.000000 | -               |
| 46 | nova-consoleauth | node2 | internal | enabled | up    | 2016-04-15T20:15:48.000000 | -               |
| 49 | nova-scheduler   | node3 | internal | enabled | up    | 2016-04-15T20:15:50.000000 | -               |
| 52 | nova-scheduler   | node2 | internal | enabled | up    | 2016-04-15T20:15:42.000000 | -               |
| 55 | nova-scheduler   | node1 | internal | enabled | up    | 2016-04-15T20:15:43.000000 | -               |
| 58 | nova-conductor   | node1 | internal | enabled | up    | 2016-04-15T20:15:36.000000 | -               |
| 64 | nova-conductor   | node2 | internal | enabled | up    | 2016-04-15T20:15:37.000000 | -               |
| 70 | nova-conductor   | node3 | internal | enabled | up    | 2016-04-15T20:15:35.000000 | -               |
| 79 | nova-compute     | node3 | nova     | enabled | up    | 2016-04-15T20:15:43.000000 | -               |
| 85 | nova-compute     | node2 | nova     | enabled | up    | 2016-04-15T20:15:50.000000 | -               |
| 88 | nova-compute     | node1 | nova     | enabled | up    | 2016-04-15T20:15:51.000000 | -               |
+----+------------------+-------+----------+---------+-------+----------------------------+-----------------+
</pre></div>
</div>
<p>Check Neutron agents status.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[egonzalez@localhost kolla]$ neutron agent-list
+--------------------------------------+--------------------+-------+-------+----------------+---------------------------+
| id                                   | agent_type         | host  | alive | admin_state_up | binary                    |
+--------------------------------------+--------------------+-------+-------+----------------+---------------------------+
| 08d12ccd-74cd-4e8e-9cda-3d3d2e191191 | Metadata agent     | node3 | :-)   | True           | neutron-metadata-agent    |
| 0916aa0e-6d07-4398-99a5-e0e9123cef37 | DHCP agent         | node1 | :-)   | True           | neutron-dhcp-agent        |
| 14707eaf-2d37-4eaf-964a-82b63d1bdc96 | Open vSwitch agent | node3 | :-)   | True           | neutron-openvswitch-agent |
| 265a0acc-e31a-4098-842a-b139e8095056 | L3 agent           | node2 | :-)   | True           | neutron-l3-agent          |
| 50869311-b3bb-4fb3-9676-d1f56d77deb0 | Metadata agent     | node2 | :-)   | True           | neutron-metadata-agent    |
| 5c48b20a-1b57-4e3b-865a-f0f298ea0af8 | DHCP agent         | node2 | :-)   | True           | neutron-dhcp-agent        |
| 89470cc7-6430-45a2-8ee2-852e0ba85cff | Open vSwitch agent | node2 | :-)   | True           | neutron-openvswitch-agent |
| ba689300-c49a-46a7-8c85-e7a6daa5f2cb | DHCP agent         | node3 | :-)   | True           | neutron-dhcp-agent        |
| baadfe87-db69-491b-b7ad-7f16c1468632 | Metadata agent     | node1 | :-)   | True           | neutron-metadata-agent    |
| bc823fff-11a3-4f81-90d5-8f9e4a7a617a | L3 agent           | node3 | :-)   | True           | neutron-l3-agent          |
| d26c860d-e5e3-4da0-b0af-f8ad3a69e9f6 | L3 agent           | node1 | :-)   | True           | neutron-l3-agent          |
| e90277e7-3e46-42d0-a2fd-dce412f503dd | Open vSwitch agent | node1 | :-)   | True           | neutron-openvswitch-agent |
+--------------------------------------+--------------------+-------+-------+----------------+---------------------------+
</pre></div>
</div>
<p>Create a new instance and see what happens.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[egonzalez@localhost kolla]$ openstack server create --image cirros --flavor m1.tiny --nic net-id=demo-net demo-instance
</pre></div>
</div>
<p>Check how the instance is going.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[egonzalez@localhost kolla]$ openstack server list
+--------------------------------------+---------------+--------+-------------------+
| ID                                   | Name          | Status | Networks          |
+--------------------------------------+---------------+--------+-------------------+
| b234e514-2975-47fd-a618-8ef6aa9ff2bc | demo-instance | ACTIVE | demo-net=10.0.0.3 |
+--------------------------------------+---------------+--------+-------------------+
</pre></div>
</div>
<p>Thats all for now, in future posts we will see in more detail how Kolla
works.</p>
<p>Cheers, Eduardo Gonzalez</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">egonzalez</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Post:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="2017-08-28-openstack-tacker-and-service-function-chaining-sfc-with-kolla.html">OpenStack tacker and service function chaining sfc with kolla</a></li>
<li class="toctree-l1"><a class="reference internal" href="2017-02-22-deploy-openstack-designate-with-kolla-ansible.html">Deploy OpenStack designate with kolla-ansible</a></li>
<li class="toctree-l1"><a class="reference internal" href="2017-01-31-openstack-keystone-zero-downtime-upgrade-process-n-to-o.html">OpenStack keystone zero downtime upgrade process newton to ocata</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-10-31-to-conditional-or-to-skip-that-is-the-ansible-question.html">To conditional or to skip, that’s the Ansible question</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-07-04-midonet-integration-with-openstack-mitaka.html">Midonet integration with OpenStack Mitaka</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-06-15-rally-openstack-benchmarking-from-docker-containers.html">Rally OpenStack benchmarking from Docker containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-06-06-opendaylight-in-a-docker-container.html">OpenDaylight in a Docker container</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">OpenStack kolla deployment from RDO packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-03-24-magnum-in-rdo-openstack-liberty-manual-installation-from-source-code.html">Magnum in RDO OpenStack Liberty manual installation from source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-03-17-ceph-ansible-baremetal-deployment.html">Ceph Ansible baremetal deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-03-02-nova-vnc-flows-under-the-hood.html">Nova VNC flows under the hood</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-02-24-ansible-ini_file-module-simplifying-your-devops-life.html">Ansible INI file module, simplifying your DevOps life</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-02-15-working-with-affinityanti-affinity-groups-openstack.html">Working with affinity/anti-affinity groups OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-02-02-migrate-from-keystone-v2-0-to-keystone-v3-openstack-liberty.html">Migrate keystone v2.0 to keystone v3 OpenStack Liberty</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-01-27-configure-neutron-dvr-openstack-liberty.html">Configure neutron DVR OpenStack Liberty</a></li>
<li class="toctree-l1"><a class="reference internal" href="2016-01-14-openstack-segregation-with-availability-zones-and-host-aggregates.html">OpenStack segregation with availability zones and host aggregates</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-12-23-nova-docker-driver.html">Nova Docker driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-12-14-murano-in-rdo-openstack-manual-installation.html">Murano in RDO OpenStack manual installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-09-08-ceph-radosgw-admin-ops-how-to-use-it.html">Ceph RadosGW admin Ops, how to use it</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-08-13-multiple-store-locations-for-glance-images.html">Multiple store locations for glance images</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-07-02-list-all-tenants-belonging-an-user.html">List all tenants belonging an user</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-03-24-load-balancer-as-a-service-lbaas.html">Load balancer as a service OpenStack LbaaS</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-03-16-openstack-nova-api-start-error-could-not-bind-to-0-0-0-0-address-already-in-use.html">OpenStack nova APi start error, could not bind to 0.0.0.0 address all ready in use</a></li>
<li class="toctree-l1"><a class="reference internal" href="2015-03-09-delete-openstack-neutron-networks-solution-to-unable-to-complete-operation-on-subnet.html">Delete OpenStack neutron networks, fix to unable to complete operation on subnet</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="2016-06-06-opendaylight-in-a-docker-container.html" title="previous chapter">OpenDaylight in a Docker container</a></li>
      <li>Next: <a href="2016-03-24-magnum-in-rdo-openstack-liberty-manual-installation-from-source-code.html" title="next chapter">Magnum in RDO OpenStack Liberty manual installation from source code</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Eduardo Gonzalez.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/2016-04-24-openstack-kolla-deployment-from-rdo-packages.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>