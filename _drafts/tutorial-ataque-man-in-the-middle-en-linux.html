---
layout: post
title: Tutorial Ataque Man In The Middle en Linux
date: 
type: post
parent_id: '0'
published: false
password: ''
status: private
categories:
- Various
tags:
- ARP
- Hacking
- MITM
- Seguridad
- Sniffing
- Tutorial
meta:
  _publicize_pending: '1'
  _publicize_done_external: a:1:{s:8:"facebook";a:1:{i:1161837279;b:1;}}
  _wpas_done_2632354: '1'
  publicize_twitter_user: egongu90
  _wpas_done_2632362: '1'
  publicize_reach: a:3:{s:7:"twitter";a:1:{i:2632362;i:78;}s:2:"fb";a:1:{i:2632354;i:97;}s:2:"wp";a:1:{i:0;i:0;}}
  _wpas_skip_2632354: '1'
  _wpas_skip_2632362: '1'
  _edit_last: '2'
author:
  login: egongu90
  email: egongu90@hotmail.com
  display_name: Editor
  first_name: ''
  last_name: ''
permalink: "/tutorial-ataque-man-in-the-middle-en-linux/"
---
<p>En primer lugar, este post es un tutorial para analizar su propia red, los daños que puedan realizar a terceros serán vuestra responsabilidad.</p>
<p>Ahora bien, empecemos con el concepto básico de Man In the Middle:</p>
<p>Es un ataque que permite monitorizar el trafico de una red en las dos direcciones, host- router, router-host.</p>
<p>Este tipo de incursión es muy peligrosa y difícil de bloquear o detectar, se pueden analizar contraseñas, mensajes y todo lo que haga el router monitorizado.<!--more--></p>
<p>Para poder realizar este ataque se necesita de un software y la modificación de algunos parámetros. El software básico es el siguiente:</p>
<ul>
<li>Wireshark</li>
<li>Paquete Dsniff</li>
<li>Arpspoof</li>
<li>SSLstrip</li>
<li>Librería Libcap</li>
</ul>
<p>Se puede utilizar alguna distribución de Linux que incluya integrada algunas de las herramientas necesarias.Yo en mi caso uso BackBox, una distribución basada en la auditoria de redes y búsqueda de vulnerabilidades.</p>
<p>Lo primero que hay que modificar es el archivo ip_fordward  para poder redireccionar el trafico hacia el destino, sin que se note nada raro en la conexión del equipo victima, de no hacer esto realizaríamos una denegación de servicio DDOS a la victima. Utilizamos este comando</p>
<ul>
<li>sudo nano /proc/sys/net/ipv4/ip_fordward</li>
</ul>
<p>Sustituimos el 0 por el 1 , hay veces que no te detecta ese comando, entonces deberá acceder a la ruta cd /proc/sys/net/ipv4/ y abrir el archivo con nano ./ip_fordward</p>
<p>Después se ha de abrir Wireshrak con privilegios de root y con la interface de red a usar</p>
<address> </address>
<ul>
<li>Ejemplo sudo wireshark -i eth0</li>
</ul>
<p>Después se deberán abrir  dos consolas a la vez  para ejecutar los siguientes comandos, uno en cada una</p>
<address> </address>
<ul>
<li>sudo arpspoof -i (interface) -t (ip_objetivo) (ip_router)</li>
<li>sudo arpspoof -i(interface) -t (ip_router) (ip_objetivo)</li>
</ul>
<p>Para ver las opciones de cada comando se puede utilizar dándole dos veces al tabulador, esto ara que en interface nos muestre eth0, wlan0, etc..</p>
<p>Después de estos comando ya podríamos capturar la información del objetivo, puesto que con esto hemos falseado la tabla ARP , y capturaríamos el trafico de la equipo victima al router.</p>
<p>Lo ultimo seria abrir la ventana de Wireshark que teníamos previamente abierta.</p>
<p>Esta nos d varias posibilidades, un botón de editar,de empezar captura, de pararla y de guardar el log de captura de datos.</p>
<p>Dentro de la aplicación hay un enlace a la información, tutoriales,etc que nos ofrecen los desarrolladores de la aplicacion</p>
<h2>SSLstrip Seguridad en Redes sociales</h2>
<p>La gran mayoria de redes sociales y gestores de email utilizan SSL (secure socket layer) que lo utilizan para mantener mayor seguridad en el envio de datos, cosa que como ya vereis es muy facil evitar.</p>
<p>Lo unico que hay que hacer es  escribir el siguiente comando</p>
<address> </address>
<ul>
<li>iptables - t nat -A PREROUTING -p tcp --destination-port 80 -j REDIRECT --to-ports 10000</li>
</ul>
<p>Que esto realiza un redirecionamiento del puerto 80 al 10000</p>
<p>Despues se abre SSLstrip y le decimos que guarde los datos en un fichero determinado</p>
<address> </address>
<ul>
<li>sslstrip -w nombredelfichero.txt</li>
</ul>
<p>esto nos generaria un log de datos en los que incluirian las contraseñas de las redes sociales que ubiera utilizado la victima.</p>
<p>Lo ultimo que nos quedaria seria utilizar y analizar la información interceptada, en los que incluirían contraseñas, datos enviados, etc.</p>
<p>En el siguiente post explicare como detectar este tipo de ataques y los sistemas de seguridad que se pueden implementar en los equipos</p>
<div></div>
