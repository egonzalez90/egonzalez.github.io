---
layout: post
title: Cambio de PSP para un dispositivo RDM en ESXi 5.x
date: 2014-09-27 16:33:05.000000000 +02:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Virtualizacion
tags:
- cambiar
- cambio
- dispositivo
- esxcli
- esxi
- most recent used
- MRU
- naa.
- nmp
- PSP
- raw
- rdm
- round robin
- RR
- storage
- virtualizacion
- vml.
- vmware
meta:
  _edit_last: '2'
  _thumbnail_id: '673'
  snap_MYURL: ''
  snapEdIT: '1'
  snapFB: N;
  snapTW: N;
  _wpas_done_all: '1'
  _wpas_skip_5226565: '1'
  _wpas_skip_4949654: '1'
  _wpas_skip_8706018: '1'
  _jetpack_related_posts_cache: a:1:{s:32:"8f6677c9d6b0f903e98ad32ec61f8deb";a:2:{s:7:"expires";i:1567368493;s:7:"payload";a:3:{i:0;a:1:{s:2:"id";i:527;}i:1;a:1:{s:2:"id";i:551;}i:2;a:1:{s:2:"id";i:263;}}}}
  dsq_thread_id: '6238310012'
author:
  login: egongu90
  email: egongu90@hotmail.com
  display_name: Editor
  first_name: ''
  last_name: ''
permalink: "/cambio-de-psp-para-un-dispositivo-rdm-en-esxi-5-x/"
---
<p>Primero veremos la información del RDM mediante este comando</p>
<blockquote><p>vmkfstools -q /vmfs/volumes/CabinaAlmacenamiento/MaquinaVirtual/MaquinaVirtual.vmdk</p></blockquote>
<p><!--more--></p>
<p>Nos sacara esta información. A nosotros nos interesa el vml.*****, el cual es el que utilizaremos en el siguiente paso.</p>
<blockquote><p>Disk /vmfs/volumes/CabinaAlmacenamiento/MaquinaVirtual/MaquinaVirtual.vmdk is a Passthrough Raw Device Mapping</p>
<p>Maps to: vml.0200460111600c0ff0001db1507629da5301000000333833383334</p></blockquote>
<p>A continuación utilizaremos el vml.**** para ver la información del dispositivo</p>
<blockquote><p>esxcfg-scsidevs -l -d vml.0200460111600c0ff0001db1507629da5301000000333833383334</p></blockquote>
<p>Esto nos mostrara una información parecida a esta, a nosotros nos interesa el naa.*****</p>
<blockquote><p>naa.600drtf0001db1507629da5301055555</p>
<p>Device Type: Direct-Access</p>
<p>Size: 7629388 MB</p>
<p>Display Name: DotHill Fibre Channel Disk (naa.600drtf0001db1507629da5301055555)</p>
<p>Multipath Plugin: NMP</p>
<p>Console Device: /vmfs/devices/disks/naa.600drtf0001db1507629da5301055555</p>
<p>Devfs Path: /vmfs/devices/disks/naa.600drtf0001db1507629da5301055555</p>
<p>Vendor: DotHill   Model: DH3834            Revis: G105</p>
<p>SCSI Level: 5  Is Pseudo: false Status: on</p>
<p>Is RDM Capable: true  Is Removable: false</p>
<p>Is Local: false Is SSD: false</p>
<p>Other Names:</p>
<p>vml.0200460111600c0ff0001db1507629da5301000000333833383334</p>
<p>VAAI Status: supported</p></blockquote>
<p>Los siguiente es ver que configuración de PSP tiene el dispositivo, para ello utilizaremos este comando con el naa.***** que nos mostró el comando anterior</p>
<blockquote><p>esxcli storage nmp device list -d naa.600drtf0001db1507629da5301055555</p></blockquote>
<p>Esta es la salida del comando anterior, en el que podremos ver el tipo de PSP en la linea Path selection Policy, en este caso es MRU (Most Recent Used)</p>
<blockquote><p>naa.600drtf0001db1507629da5301055555</p>
<p>Device Display Name: DotHill Fibre Channel Disk (naa.600drtf0001db1507629da5301055555)</p>
<p>Storage Array Type: VMW_SATP_ALUA</p>
<p>Storage Array Type Device Config: {implicit_support=on;explicit_support=off; explicit_allow=on;alua_followover=on;{TPG_id=1,TPG_state=ANO}{TPG_id=0,TPG_state=AO}}</p>
<p>Path Selection Policy: VMW_PSP_MRU</p>
<p>Path Selection Policy Device Config: Current Path=vmhba0:C0:T3:L1</p>
<p>Path Selection Policy Device Custom Config:</p>
<p>Working Paths: vmhba0:C0:T3:L1</p>
<p>Is Local SAS Device: false</p>
<p>Is Boot USB Device: false</p></blockquote>
<p>Si quisiéramos cambiar el PSP lo haremos mediante este comando, en este caso la política que aplicaremos sera RR(Round Robin)</p>
<blockquote><p>esxcli storage nmp device set -d naa.600drtf0001db1507629da5301055555 --psp=VMW_PSP_RR</p></blockquote>
<p>Volvemos a comprobar que tipo de politica se ha aplicado</p>
<blockquote><p>esxcli storage nmp device list -d naa.600drtf0001db1507629da5301055555</p></blockquote>
<p>Aquí vemos como efectivamente esta en RR el PSP</p>
<blockquote><p>naa.600drtf0001db1507629da5301055555</p>
<p>Device Display Name: DotHill Fibre Channel Disk (naa.600drtf0001db1507629da5301055555)</p>
<p>Storage Array Type: VMW_SATP_ALUA</p>
<p>Storage Array Type Device Config: {implicit_support=on;explicit_support=off; explicit_allow=on;alua_followover=on;{TPG_id=1,TPG_state=ANO}{TPG_id=0,TPG_state=AO}}</p>
<p>Path Selection Policy: VMW_PSP_RR</p>
<p>Path Selection Policy Device Config: Current Path=vmhba0:C0:T3:L1</p>
<p>Path Selection Policy Device Custom Config:</p>
<p>Working Paths: vmhba0:C0:T3:L1</p>
<p>Is Local SAS Device: false</p>
<p>Is Boot USB Device: false</p></blockquote>
<p>&nbsp;</p>
<p>Muchas gracias por leer el blog.</p>
