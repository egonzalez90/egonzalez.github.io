---
layout: post
title: Nova en Compute Node
date: 2015-02-05 17:37:51.000000000 +01:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- OpenStack
tags:
- compute
- configurar
- node
- nova
- openstack
- qemu
meta:
  _edit_last: '2'
  _publicize_twitter_user: "@egongu90"
  _wpas_mess: Nova en Compute Node
  _wpas_skip_10228321: '1'
  _wpas_done_all: '1'
  _wpas_skip_8706018: '1'
  _jetpack_related_posts_cache: a:1:{s:32:"8f6677c9d6b0f903e98ad32ec61f8deb";a:2:{s:7:"expires";i:1568830112;s:7:"payload";a:3:{i:0;a:1:{s:2:"id";i:927;}i:1;a:1:{s:2:"id";i:879;}i:2;a:1:{s:2:"id";i:859;}}}}
  dsq_thread_id: '6269998765'
author:
  login: egongu90
  email: egongu90@hotmail.com
  display_name: Editor
  first_name: ''
  last_name: ''
permalink: "/nova-en-compute-node/"
---
<p>Primero instalaremos los paquetes necesarios de nova.</p>
<blockquote><p># yum install openstack-nova-compute</p></blockquote>
<p>Configuraremos el uso de la base de datos y de la autenticación en keystone.</p>
<blockquote><p># openstack-config --set /etc/nova/nova.conf database connection mysql://nova:PASSWD@controller/nova</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT auth_strategy keystone</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT keystone_authtoken auth_uri http://controller:5000</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT keystone_authtoken auth_host controller</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT keystone_authtoken auth_port 35357</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT keystone_authtoken auth_protocol http</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT keystone_authtoken admin_user nova</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT keystone_authtoken admin_tenant_name service</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT keystone_authtoken admin_password PASSWD</p></blockquote>
<p>Configuramos el uso de QPID.</p>
<blockquote><p># openstack-config --set /etc/nova/nova.conf DEFAULT rpc_backend qpid</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT qpid_hostname controller</p></blockquote>
<p>Configuramos VNC.</p>
<blockquote><p># openstack-config --set /etc/nova/nova.conf DEFAULT my_ip 192.168.1.31</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT vnc_enabled True</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT vncserver_listen 0.0.0.0</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT vncserver_proxyclient_address 192.168.1.31</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT novncproxy_base_url http://controller:6080/vnc_auto.html</p>
<p>Configuramos acceso a Glance Image Service.</p>
<p># openstack-config --set /etc/nova/nova.conf DEFAULT glance_host controller</p></blockquote>
<p>Comprobamos si la CPU soporta aceleración por hardware, si es 1 o mas el resultado si que soporta, si no, configurar libvirt para que utilice QEMU en vez de KVM.</p>
<blockquote><p># egrep -c '(vmx|svm)' /proc/cpuinfo</p></blockquote>
<p>**********************************************</p>
<p>Configurar libvirt para que use QEMU</p>
<blockquote><p># openstack-config --set /etc/nova/nova.conf libvirt virt_type qemu</p></blockquote>
<p>**********************************************</p>
<p>Iniciar servicios y ejecución en el arranque.</p>
<blockquote><p># service libvirtd start</p>
<p># service messagebus start</p>
<p># service openstack-nova-compute start</p>
<p># chkconfig libvirt on</p>
<p>#chkconfig messagebus on</p>
<p># chkconfig openstack-nova-compute on</p></blockquote>
